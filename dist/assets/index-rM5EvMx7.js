var ln=Object.defineProperty;var cn=(i,t,e)=>t in i?ln(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var vt=(i,t,e)=>(cn(i,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();function it(){}function ko(i){return i()}function ze(){return Object.create(null)}function Dt(i){i.forEach(ko)}function $t(i){return typeof i=="function"}function Xt(i,t){return i!=i?t==t:i!==t||i&&typeof i=="object"||typeof i=="function"}function dn(i){return Object.keys(i).length===0}function z(i,t){i.appendChild(t)}function ct(i,t,e){i.insertBefore(t,e||null)}function rt(i){i.parentNode&&i.parentNode.removeChild(i)}function hn(i,t){for(let e=0;e<i.length;e+=1)i[e]&&i[e].d(t)}function q(i){return document.createElement(i)}function un(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function wt(i){return document.createTextNode(i)}function dt(){return wt(" ")}function wo(){return wt("")}function yt(i,t,e,o){return i.addEventListener(t,e,o),()=>i.removeEventListener(t,e,o)}function X(i,t,e){e==null?i.removeAttribute(t):i.getAttribute(t)!==e&&i.setAttribute(t,e)}function pn(i){return Array.from(i.childNodes)}function yo(i,t){t=""+t,i.data!==t&&(i.data=t)}function fn(i,t){t=""+t,i.wholeText!==t&&(i.data=t)}function xo(i,t){i.value=t??""}function ft(i,t,e,o){e==null?i.style.removeProperty(t):i.style.setProperty(t,e,o?"important":"")}function je(i,t,e){for(let o=0;o<i.options.length;o+=1){const n=i.options[o];if(n.__value===t){n.selected=!0;return}}(!e||t!==void 0)&&(i.selectedIndex=-1)}function gn(i){const t=i.querySelector(":checked");return t&&t.__value}function Ue(i,t,e){i.classList.toggle(t,!!e)}class Co{constructor(t=!1){vt(this,"is_svg",!1);vt(this,"e");vt(this,"n");vt(this,"t");vt(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,o=null){this.e||(this.is_svg?this.e=un(e.nodeName):this.e=q(e.nodeType===11?"TEMPLATE":e.nodeName),this.t=e.tagName!=="TEMPLATE"?e:e.content,this.c(t)),this.i(o)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)ct(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(rt)}}let qt;function zt(i){qt=i}function mn(){if(!qt)throw new Error("Function called outside component initialization");return qt}function Eo(i){mn().$$.on_mount.push(i)}const It=[],fe=[];let Ot=[];const $e=[],bn=Promise.resolve();let ge=!1;function vn(){ge||(ge=!0,bn.then(So))}function ee(i){Ot.push(i)}const le=new Set;let Lt=0;function So(){if(Lt!==0)return;const i=qt;do{try{for(;Lt<It.length;){const t=It[Lt];Lt++,zt(t),kn(t.$$)}}catch(t){throw It.length=0,Lt=0,t}for(zt(null),It.length=0,Lt=0;fe.length;)fe.pop()();for(let t=0;t<Ot.length;t+=1){const e=Ot[t];le.has(e)||(le.add(e),e())}Ot.length=0}while(It.length);for(;$e.length;)$e.pop()();ge=!1,le.clear(),zt(i)}function kn(i){if(i.fragment!==null){i.update(),Dt(i.before_update);const t=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,t),i.after_update.forEach(ee)}}function wn(i){const t=[],e=[];Ot.forEach(o=>i.indexOf(o)===-1?t.push(o):e.push(o)),e.forEach(o=>o()),Ot=t}const Jt=new Set;let yn;function To(i,t){i&&i.i&&(Jt.delete(i),i.i(t))}function xn(i,t,e,o){if(i&&i.o){if(Jt.has(i))return;Jt.add(i),yn.c.push(()=>{Jt.delete(i),o&&(e&&i.d(1),o())}),i.o(t)}else o&&o()}function qe(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Cn(i){i&&i.c()}function Bo(i,t,e){const{fragment:o,after_update:n}=i.$$;o&&o.m(t,e),ee(()=>{const s=i.$$.on_mount.map(ko).filter($t);i.$$.on_destroy?i.$$.on_destroy.push(...s):Dt(s),i.$$.on_mount=[]}),n.forEach(ee)}function Lo(i,t){const e=i.$$;e.fragment!==null&&(wn(e.after_update),Dt(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function En(i,t){i.$$.dirty[0]===-1&&(It.push(i),vn(),i.$$.dirty.fill(0)),i.$$.dirty[t/31|0]|=1<<t%31}function Yt(i,t,e,o,n,s,r=null,a=[-1]){const l=qt;zt(i);const c=i.$$={fragment:null,ctx:[],props:s,update:it,not_equal:n,bound:ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:ze(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};r&&r(c.root);let d=!1;if(c.ctx=e?e(i,t.props||{},(h,p,...g)=>{const f=g.length?g[0]:p;return c.ctx&&n(c.ctx[h],c.ctx[h]=f)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](f),d&&En(i,h)),p}):[],c.update(),d=!0,Dt(c.before_update),c.fragment=o?o(c.ctx):!1,t.target){if(t.hydrate){const h=pn(t.target);c.fragment&&c.fragment.l(h),h.forEach(rt)}else c.fragment&&c.fragment.c();t.intro&&To(i.$$.fragment),Bo(i,t.target,t.anchor),So()}zt(l)}class Zt{constructor(){vt(this,"$$");vt(this,"$$set")}$destroy(){Lo(this,1),this.$destroy=it}$on(t,e){if(!$t(e))return it;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(e),()=>{const n=o.indexOf(e);n!==-1&&o.splice(n,1)}}$set(t){this.$$set&&!dn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Sn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Sn);const Tn=1706968475529,Bn=[{id:"ApDVlm-BRc",type:"paragraph",data:{text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse mollis ligula purus, et egestas sapien vulputate at. Donec ornare, ante at elementum hendrerit, ante odio posuere dui, vitae commodo ligula risus ac ante. Phasellus placerat molestie mi nec scelerisque. Morbi dapibus volutpat ultrices. Nulla tristique metus eget bibendum tempus. Quisque felis metus, sollicitudin in tortor eu, convallis sollicitudin urna. Vestibulum faucibus, est at aliquet tempus, orci urna sodales leo, non pellentesque tortor nulla a purus. Duis et facilisis velit. Pellentesque leo mi, venenatis nec mauris sit amet, tempor volutpat metus. Mauris ac volutpat dolor. Donec ornare malesuada neque, in lacinia neque malesuada nec. Pellentesque dictum ante non dignissim ornare. Nunc eu lacus sapien. Curabitur vestibulum consectetur ultrices. Aenean eget lectus nec lectus hendrerit tristique."}},{id:"YLTb8bEiFY",type:"paragraph",data:{text:"Integer sit amet libero non risus venenatis semper. Vestibulum dui sem, gravida nec tempor ut, ornare sed dui. Nulla a dui erat. Phasellus mattis massa id efficitur consectetur. Nullam mauris quam, tempus non efficitur non, consectetur id libero. Nam scelerisque, leo id ornare efficitur, neque nisl porttitor neque, sed eleifend mi libero non arcu. Sed odio turpis, vehicula a tempus id, blandit in quam."}},{id:"h3e1AaebHg",type:"paragraph",data:{text:"Sed varius vestibulum urna, a dictum est sodales ac. Integer mattis mi vel consequat elementum. Mauris ac purus faucibus, tincidunt dolor vel, congue dolor. In hac habitasse platea dictumst. In rutrum eros nibh, eu eleifend lacus ultrices vel. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Morbi molestie tempor ornare. Maecenas aliquam ex vel ornare viverra. In orci turpis, feugiat et pulvinar ac, dignissim vel metus. Morbi cursus bibendum eros, at porttitor ligula imperdiet et."}},{id:"DR7k4S8QAY",type:"paragraph",data:{text:"Etiam fermentum dui sapien, eu congue ex ultrices quis. Vivamus varius at sapien ac tempus. Duis consectetur, leo at mollis facilisis, neque dui finibus ante, ac rutrum risus nulla quis mauris. Maecenas suscipit aliquet urna, quis mollis ligula tincidunt sed. Sed nec orci vehicula, varius diam non, faucibus dui. Maecenas augue tellus, condimentum iaculis dignissim id, viverra sed magna. In bibendum ultricies risus ac feugiat."}},{id:"WiLP6Td9ql",type:"paragraph",data:{text:"Curabitur a enim elit. Integer ut mauris metus. Etiam aliquam elit vel placerat rhoncus. Sed euismod cursus viverra. Nullam hendrerit velit augue, quis pulvinar sem finibus in. Aliquam consequat lacinia nisl, in ornare libero pretium sed. Nunc accumsan lacinia ex quis placerat. Donec sed odio et velit sollicitudin rhoncus in vestibulum ipsum. Cras justo mauris, ullamcorper et sapien luctus, scelerisque consectetur ante. Sed in consectetur diam, a feugiat leo. Donec nisl odio, pulvinar eu euismod vel, convallis quis lorem. Proin eu tempus massa. Nam nisi est, sodales sed nibh auctor, malesuada interdum neque. Donec est lacus, sagittis non vehicula ut, volutpat eu sem. Donec vitae odio in mi dignissim egestas."}}],Ln="2.29.0",In={time:Tn,blocks:Bn,version:Ln},Mn=1707070455137,An=[{id:"Z8_yQSk41t",type:"IfCondition",data:{type:"IF",condition:"tipo_contrato == 'instalments'"}},{id:"DDPR1t4fmM",type:"header",data:{text:"Contrato del servicio de pago aplazado de Aplazame.",level:2}},{id:"ib5yfjkom5",type:"IfElseCondition",data:{type:"ELSE",condition:"tipo_contrato == 'pay in 4'"}},{id:"uAfhugga0j",type:"header",data:{text:"Contrato del servicio de paga en 4 de Aplazame.",level:2}},{id:"m9-niBrJ3I",type:"IfElseCondition",data:{type:"ELSE",condition:"tipo_contrato == 'paylater'"}},{id:"KmO94oLTHu",type:"header",data:{text:'Contrato de servicio de pago aplazado en <span class="templator-variable"><span class="s-TQFJ7UDzQX2l"><span contenteditable="false" class="s-TQFJ7UDzQX2l">{{</span> <span class="variable-container  s-TQFJ7UDzQX2l">paylater_num_days</span> <span contenteditable="false" class="s-TQFJ7UDzQX2l">}}</span></span></span> d√≠as de Aplazame.',level:2}},{id:"GSvwocZPvK",type:"IfEndCondition",data:{type:"ENDIF"}},{id:"HlHIyPO7lV",type:"header",data:{text:"Condiciones particulares del Contrato",level:4}},{id:"_IfmJPAHce",type:"table",data:{withHeadings:!0,content:[["1. Identidad y datos de contacto del prestamista."],[`<b>Prestamista</b>
WiZink Bank, S.A.U., a trav√©s de su marca APLAZAME
`,`<b>Tel√©fono</b>
919 03 30 15
`,`<b>Correo electr√≥nico</b>
hola@aplazame.com
`,`<b>Direcci√≥n web</b>
<a href="https://aplazame.com">https://aplazame.com</a>
`],[`<b>Direcci√≥n</b>
Ulises n¬∫. 16-18 28043 Madrid
`]]}},{id:"Qt0oEX6FBo",type:"table",data:{withHeadings:!0,content:[["2. Identidad y datos de contacto del prestatario."],[`<b>Nombre y apellidos</b>
<span class="templator-variable"><span class="s-TQFJ7UDzQX2l"><span contenteditable="false" class="s-TQFJ7UDzQX2l">{{</span> <span class="variable-container s-TQFJ7UDzQX2l">full_name</span> <span contenteditable="false" class="s-TQFJ7UDzQX2l">}}</span></span></span>
`],[`<b>Correo electr√≥nico</b>
<span class="templator-variable"><span class="s-TQFJ7UDzQX2l"><span contenteditable="false" class="s-TQFJ7UDzQX2l">{{</span> <span class="variable-container s-TQFJ7UDzQX2l">email</span> <span contenteditable="false" class="s-TQFJ7UDzQX2l">}}</span></span></span>`,`<b>D.N.I / N.I.E.</b>
<span class="templator-variable"><span class="s-TQFJ7UDzQX2l"><span contenteditable="false" class="s-TQFJ7UDzQX2l">{{</span> <span class="variable-container s-TQFJ7UDzQX2l">document_id</span> <span contenteditable="false" class="s-TQFJ7UDzQX2l">}}</span></span></span>
`,`<b>Tel√©fono</b>
<span class="templator-variable"><span class="s-TQFJ7UDzQX2l"><span contenteditable="false" class="s-TQFJ7UDzQX2l">{{</span> <span class="variable-container s-TQFJ7UDzQX2l">phone</span> <span contenteditable="false" class="s-TQFJ7UDzQX2l">}}</span></span></span>
`],[`<b>Domicilio a efectos del presente contrato</b>
<span class="templator-variable"><span class="s-TQFJ7UDzQX2l"><span contenteditable="false" class="s-TQFJ7UDzQX2l">{{</span> <span class="variable-container s-TQFJ7UDzQX2l">address</span> <span contenteditable="false" class="s-TQFJ7UDzQX2l">}}</span></span></span>`],["if","shipping_info"],[`<b>Direcci√≥n de env√≠o del producto adquirido</b>
<span class="templator-variable"><span class="s-TQFJ7UDzQX2l"><span contenteditable="false" class="s-TQFJ7UDzQX2l">{{</span> <span class="variable-container s-TQFJ7UDzQX2l">shipping_info</span> <span contenteditable="false" class="s-TQFJ7UDzQX2l">}}</span></span></span>
`],["endif",""],["if","billing_address"],[`<b>Direccion de facturacion del producto o servicio adquirido</b>
<span class="templator-variable"><span class="s-TQFJ7UDzQX2l"><span contenteditable="false" class="s-TQFJ7UDzQX2l">{{</span> <span class="variable-container s-TQFJ7UDzQX2l">billing_address</span> <span contenteditable="false" class="s-TQFJ7UDzQX2l">}}</span></span></span>
`],["endif",""]]}}],_n="2.29.0",On={time:Mn,blocks:An,version:_n},Rn=1707070369878,Nn=[{id:"5VPe8uxc0E",type:"IfCondition",data:{type:"IF",condition:"condicion1 == resultado1"}},{id:"YLTb8bEiFY",type:"paragraph",data:{text:"Integer sit amet libero non risus venenatis semper. Vestibulum dui sem, gravida nec tempor ut, ornare sed dui. Nulla a dui erat. Phasellus mattis massa id efficitur consectetur. Nullam mauris quam, tempus non efficitur non, consectetur id libero. Nam scelerisque, leo id ornare efficitur, neque nisl porttitor neque, sed eleifend mi libero non arcu. Sed odio turpis, vehicula a tempus id, blandit in quam."}},{id:"njL10QH7r9",type:"IfCondition",data:{type:"IF",condition:"condicion2 == resultado2"}},{id:"v4yR8vPqG0",type:"paragraph",data:{text:"In accumsan risus gravida, fermentum mauris quis, convallis mauris. Fusce ornare turpis nec velit convallis, volutpat euismod ipsum blandit. Maecenas blandit egestas magna a volutpat. Fusce sagittis cursus gravida. Aenean tempor pretium nibh eget faucibus. Donec a est nunc."}},{id:"eRA-6rdOT-",type:"IfCondition",data:{type:"IF",condition:"condicion3 == resultado3"}},{id:"aQe282wc58",type:"paragraph",data:{text:"Ut ullamcorper varius nisi, eget sodales sem. Duis interdum mauris non tortor semper ultricies. Donec eleifend orci non maximus aliquam. Pellentesque pharetra posuere iaculis. Morbi porta gravida nisi, et egestas purus lobortis eu. Donec sed mauris odio. Sed lacinia erat nibh. Sed vestibulum lorem non arcu vulputate eleifend. Aenean rutrum at urna eu dictum. Ut non sodales orci, sit amet ornare diam. Nunc condimentum vehicula dui id vestibulum. Pellentesque rhoncus placerat mi sit amet aliquam. Maecenas eleifend ex molestie urna pellentesque, vitae vulputate nunc pretium."}},{id:"8R8yql62NH",type:"IfEndCondition",data:{type:"ENDIF"}},{id:"fdjYdwpmwM",type:"paragraph",data:{text:"Duis augue odio, rhoncus vitae sollicitudin a, iaculis varius justo. Duis cursus arcu eu efficitur facilisis. Phasellus sed consequat lorem, a dictum nibh. Sed ac turpis nunc. Nulla dapibus, leo id porta posuere, enim augue vulputate ante, et pulvinar risus ipsum at leo. Curabitur semper, ante eu pulvinar laoreet, mauris dui consectetur orci, efficitur semper sem lacus non diam. Suspendisse a eros quis massa gravida ullamcorper. Phasellus aliquet enim placerat, feugiat ipsum ac, condimentum risus. Phasellus sagittis a urna sit amet fringilla. Phasellus in lectus vitae nulla faucibus pellentesque."}},{id:"29Wj_QiPEa",type:"IfEndCondition",data:{type:"ENDIF"}},{id:"TG1bY42LUb",type:"paragraph",data:{text:"In accumsan risus gravida, fermentum mauris quis, convallis mauris. Fusce ornare turpis nec velit convallis, volutpat euismod ipsum blandit. Maecenas blandit egestas magna a volutpat. Fusce sagittis cursus gravida. Aenean tempor pretium nibh eget faucibus. Donec a est nunc."}},{id:"1-OzDXbfUI",type:"IfEndCondition",data:{type:"ENDIF"}}],Dn="2.29.0",Pn={time:Rn,blocks:Nn,version:Dn};var Fn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Se(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function ce(){}Object.assign(ce,{default:ce,register:ce,revert:function(){},__esModule:!0});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(i){const t=(this.document||this.ownerDocument).querySelectorAll(i);let e=t.length;for(;--e>=0&&t.item(e)!==this;);return e>-1});Element.prototype.closest||(Element.prototype.closest=function(i){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(i))return t;t=t.parentElement||t.parentNode}while(t!==null);return null});Element.prototype.prepend||(Element.prototype.prepend=function(i){const t=document.createDocumentFragment();Array.isArray(i)||(i=[i]),i.forEach(e=>{const o=e instanceof Node;t.appendChild(o?e:document.createTextNode(e))}),this.insertBefore(t,this.firstChild)});Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(i){i=arguments.length===0?!0:!!i;const t=this.parentNode,e=window.getComputedStyle(t,null),o=parseInt(e.getPropertyValue("border-top-width")),n=parseInt(e.getPropertyValue("border-left-width")),s=this.offsetTop-t.offsetTop<t.scrollTop,r=this.offsetTop-t.offsetTop+this.clientHeight-o>t.scrollTop+t.clientHeight,a=this.offsetLeft-t.offsetLeft<t.scrollLeft,l=this.offsetLeft-t.offsetLeft+this.clientWidth-n>t.scrollLeft+t.clientWidth,c=s&&!r;(s||r)&&i&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-o+this.clientHeight/2),(a||l)&&i&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-n+this.clientWidth/2),(s||r||a||l)&&!i&&this.scrollIntoView(c)});window.requestIdleCallback=window.requestIdleCallback||function(i){const t=Date.now();return setTimeout(function(){i({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(i){clearTimeout(i)};let Hn=(i=21)=>crypto.getRandomValues(new Uint8Array(i)).reduce((t,e)=>(e&=63,e<36?t+=e.toString(36):e<62?t+=(e-26).toString(36).toUpperCase():e>62?t+="-":t+="_",t),"");var Io=(i=>(i.VERBOSE="VERBOSE",i.INFO="INFO",i.WARN="WARN",i.ERROR="ERROR",i))(Io||{});const R={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},zn={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};function Qt(i,t,e="log",o,n="color: inherit"){if(!("console"in window)||!window.console[e])return;const s=["info","log","warn","error"].includes(e),r=[];switch(Qt.logLevel){case"ERROR":if(e!=="error")return;break;case"WARN":if(!["error","warn"].includes(e))return;break;case"INFO":if(!s||i)return;break}o&&r.push(o);const a="Editor.js 2.29.0";i&&(s?(r.unshift(`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`,n),t=`%c${a}%c ${t}`):t=`( ${a} )${t}`);try{s?o?console[e](`${t} %o`,...r):console[e](t,...r):console[e](t)}catch{}}Qt.logLevel="VERBOSE";function jn(i){Qt.logLevel=i}const U=Qt.bind(window,!1),ht=Qt.bind(window,!0);function Tt(i){return Object.prototype.toString.call(i).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function W(i){return Tt(i)==="function"||Tt(i)==="asyncfunction"}function J(i){return Tt(i)==="object"}function xt(i){return Tt(i)==="string"}function Un(i){return Tt(i)==="boolean"}function We(i){return Tt(i)==="number"}function Ve(i){return Tt(i)==="undefined"}function lt(i){return i?Object.keys(i).length===0&&i.constructor===Object:!0}function Mo(i){return i>47&&i<58||i===32||i===13||i===229||i>64&&i<91||i>95&&i<112||i>185&&i<193||i>218&&i<223}async function $n(i,t=()=>{},e=()=>{}){async function o(n,s,r){try{await n.function(n.data),await s(Ve(n.data)?{}:n.data)}catch{r(Ve(n.data)?{}:n.data)}}return i.reduce(async(n,s)=>(await n,o(s,t,e)),Promise.resolve())}function Ao(i){return Array.prototype.slice.call(i)}function oe(i,t){return function(){const e=this,o=arguments;window.setTimeout(()=>i.apply(e,o),t)}}function qn(i){return i.name.split(".").pop()}function Wn(i){return/^[-\w]+\/([-+\w]+|\*)$/.test(i)}function Xe(i,t,e){let o;return(...n)=>{const s=this,r=()=>{o=null,e||i.apply(s,n)},a=e&&!o;window.clearTimeout(o),o=window.setTimeout(r,t),a&&i.apply(s,n)}}function me(i,t,e=void 0){let o,n,s,r=null,a=0;e||(e={});const l=function(){a=e.leading===!1?0:Date.now(),r=null,s=i.apply(o,n),r||(o=n=null)};return function(){const c=Date.now();!a&&e.leading===!1&&(a=c);const d=t-(c-a);return o=this,n=arguments,d<=0||d>t?(r&&(clearTimeout(r),r=null),a=c,s=i.apply(o,n),r||(o=n=null)):!r&&e.trailing!==!1&&(r=setTimeout(l,d)),s}}function Vn(){const i={win:!1,mac:!1,x11:!1,linux:!1},t=Object.keys(i).find(e=>window.navigator.appVersion.toLowerCase().indexOf(e)!==-1);return t&&(i[t]=!0),i}function Rt(i){return i[0].toUpperCase()+i.slice(1)}function be(i,...t){if(!t.length)return i;const e=t.shift();if(J(i)&&J(e))for(const o in e)J(e[o])?(i[o]||Object.assign(i,{[o]:{}}),be(i[o],e[o])):Object.assign(i,{[o]:e[o]});return be(i,...t)}function ie(i){const t=Vn();return i=i.replace(/shift/gi,"‚áß").replace(/backspace/gi,"‚å´").replace(/enter/gi,"‚èé").replace(/up/gi,"‚Üë").replace(/left/gi,"‚Üí").replace(/down/gi,"‚Üì").replace(/right/gi,"‚Üê").replace(/escape/gi,"‚éã").replace(/insert/gi,"Ins").replace(/delete/gi,"‚ê°").replace(/\+/gi," + "),t.mac?i=i.replace(/ctrl|cmd/gi,"‚åò").replace(/alt/gi,"‚å•"):i=i.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),i}function Xn(i){try{return new URL(i).href}catch{}return i.substring(0,2)==="//"?window.location.protocol+i:window.location.origin+i}function Yn(){return Hn(10)}function Zn(i){window.open(i,"_blank")}function Qn(i=""){return`${i}${Math.floor(Math.random()*1e8).toString(16)}`}function ve(i,t,e){const o=`¬´${t}¬ª is deprecated and will be removed in the next major release. Please use the ¬´${e}¬ª instead.`;i&&ht(o,"warn")}function Pt(i,t,e){const o=e.value?"value":"get",n=e[o],s=`#${t}Cache`;if(e[o]=function(...r){return this[s]===void 0&&(this[s]=n.apply(this,...r)),this[s]},o==="get"&&e.set){const r=e.set;e.set=function(a){delete i[s],r.apply(this,a)}}return e}const _o=650;function St(){return window.matchMedia(`(max-width: ${_o}px)`).matches}const Ye=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function Kn(i,t){const e=Array.isArray(i)||J(i),o=Array.isArray(t)||J(t);return e||o?JSON.stringify(i)===JSON.stringify(t):i===t}let m=class tt{static isSingleTag(t){return t.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(t.tagName)}static isLineBreakTag(t){return t&&t.tagName&&["BR","WBR"].includes(t.tagName)}static make(t,e=null,o={}){const n=document.createElement(t);Array.isArray(e)?n.classList.add(...e):e&&n.classList.add(e);for(const s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s]);return n}static text(t){return document.createTextNode(t)}static append(t,e){Array.isArray(e)?e.forEach(o=>t.appendChild(o)):t.appendChild(e)}static prepend(t,e){Array.isArray(e)?(e=e.reverse(),e.forEach(o=>t.prepend(o))):t.prepend(e)}static swap(t,e){const o=document.createElement("div"),n=t.parentNode;n.insertBefore(o,t),n.insertBefore(t,e),n.insertBefore(e,o),n.removeChild(o)}static find(t=document,e){return t.querySelector(e)}static get(t){return document.getElementById(t)}static findAll(t=document,e){return t.querySelectorAll(e)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(t=>`input[type="${t}"]`).join(", ")}static findAllInputs(t){return Ao(t.querySelectorAll(tt.allInputsSelector)).reduce((e,o)=>tt.isNativeInput(o)||tt.containsOnlyInlineElements(o)?[...e,o]:[...e,...tt.getDeepestBlockElements(o)],[])}static getDeepestNode(t,e=!1){const o=e?"lastChild":"firstChild",n=e?"previousSibling":"nextSibling";if(t&&t.nodeType===Node.ELEMENT_NODE&&t[o]){let s=t[o];if(tt.isSingleTag(s)&&!tt.isNativeInput(s)&&!tt.isLineBreakTag(s))if(s[n])s=s[n];else if(s.parentNode[n])s=s.parentNode[n];else return s.parentNode;return this.getDeepestNode(s,e)}return t}static isElement(t){return We(t)?!1:t&&t.nodeType&&t.nodeType===Node.ELEMENT_NODE}static isFragment(t){return We(t)?!1:t&&t.nodeType&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(t){return t.contentEditable==="true"}static isNativeInput(t){const e=["INPUT","TEXTAREA"];return t&&t.tagName?e.includes(t.tagName):!1}static canSetCaret(t){let e=!0;if(tt.isNativeInput(t))switch(t.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=tt.isContentEditable(t);return e}static isNodeEmpty(t,e){let o;return this.isSingleTag(t)&&!this.isLineBreakTag(t)?!1:(this.isElement(t)&&this.isNativeInput(t)?o=t.value:o=t.textContent.replace("‚Äã",""),e&&(o=o.replace(new RegExp(e,"g"),"")),o.trim().length===0)}static isLeaf(t){return t?t.childNodes.length===0:!1}static isEmpty(t,e){t.normalize();const o=[t];for(;o.length>0;)if(t=o.shift(),!!t){if(this.isLeaf(t)&&!this.isNodeEmpty(t,e))return!1;t.childNodes&&o.push(...Array.from(t.childNodes))}return!0}static isHTMLString(t){const e=tt.make("div");return e.innerHTML=t,e.childElementCount>0}static getContentLength(t){return tt.isNativeInput(t)?t.value.length:t.nodeType===Node.TEXT_NODE?t.length:t.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(t){let e;xt(t)?(e=document.createElement("div"),e.innerHTML=t):e=t;const o=n=>!tt.blockElements.includes(n.tagName.toLowerCase())&&Array.from(n.children).every(o);return Array.from(e.children).every(o)}static getDeepestBlockElements(t){return tt.containsOnlyInlineElements(t)?[t]:Array.from(t.children).reduce((e,o)=>[...e,...tt.getDeepestBlockElements(o)],[])}static getHolder(t){return xt(t)?document.getElementById(t):t}static isAnchor(t){return t.tagName.toLowerCase()==="a"}static offset(t){const e=t.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop,s=e.top+n,r=e.left+o;return{top:s,left:r,bottom:s+e.height,right:r+e.width}}};const Jn={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":""}},Gn={Text:"",Link:"",Bold:"",Italic:""},ti={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},ei={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},Oo={ui:Jn,toolNames:Gn,tools:ti,blockTunes:ei},Mt=class{static ui(i,t){return Mt._t(i,t)}static t(i,t){return Mt._t(i,t)}static setDictionary(i){Mt.currentDictionary=i}static _t(i,t){const e=Mt.getNamespace(i);return!e||!e[t]?t:e[t]}static getNamespace(i){return i.split(".").reduce((t,e)=>!t||!Object.keys(t).length?{}:t[e],Mt.currentDictionary)}};let nt=Mt;nt.currentDictionary=Oo;class Ro extends Error{}class se{constructor(){this.subscribers={}}on(t,e){t in this.subscribers||(this.subscribers[t]=[]),this.subscribers[t].push(e)}once(t,e){t in this.subscribers||(this.subscribers[t]=[]);const o=n=>{const s=e(n),r=this.subscribers[t].indexOf(o);return r!==-1&&this.subscribers[t].splice(r,1),s};this.subscribers[t].push(o)}emit(t,e){lt(this.subscribers)||!this.subscribers[t]||this.subscribers[t].reduce((o,n)=>{const s=n(o);return s!==void 0?s:o},e)}off(t,e){if(this.subscribers[t]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${t.toString()}". Probably, .off() called before .on()`);return}for(let o=0;o<this.subscribers[t].length;o++)if(this.subscribers[t][o]===e){delete this.subscribers[t][o];break}}destroy(){this.subscribers={}}}function Et(i){Object.setPrototypeOf(this,{get id(){return i.id},get name(){return i.name},get config(){return i.config},get holder(){return i.holder},get isEmpty(){return i.isEmpty},get selected(){return i.selected},set stretched(t){i.stretched=t},get stretched(){return i.stretched},get focusable(){return i.focusable},call(t,e){return i.call(t,e)},save(){return i.save()},validate(t){return i.validate(t)},dispatchChange(){i.dispatchChange()}})}class Te{constructor(){this.allListeners=[]}on(t,e,o,n=!1){const s=Qn("l"),r={id:s,element:t,eventType:e,handler:o,options:n};if(!this.findOne(t,e,o))return this.allListeners.push(r),t.addEventListener(e,o,n),s}off(t,e,o,n){const s=this.findAll(t,e,o);s.forEach((r,a)=>{const l=this.allListeners.indexOf(s[a]);l>-1&&(this.allListeners.splice(l,1),r.element.removeEventListener(r.eventType,r.handler,r.options))})}offById(t){const e=this.findById(t);e&&e.element.removeEventListener(e.eventType,e.handler,e.options)}findOne(t,e,o){const n=this.findAll(t,e,o);return n.length>0?n[0]:null}findAll(t,e,o){let n;const s=t?this.findByEventTarget(t):[];return t&&e&&o?n=s.filter(r=>r.eventType===e&&r.handler===o):t&&e?n=s.filter(r=>r.eventType===e):n=s,n}removeAll(){this.allListeners.map(t=>{t.element.removeEventListener(t.eventType,t.handler,t.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(t){return this.allListeners.filter(e=>{if(e.element===t)return e})}findByType(t){return this.allListeners.filter(e=>{if(e.eventType===t)return e})}findByHandler(t){return this.allListeners.filter(e=>{if(e.handler===t)return e})}findById(t){return this.allListeners.find(e=>e.id===t)}}let H=class No{constructor({config:t,eventsDispatcher:e}){if(this.nodes={},this.listeners=new Te,this.readOnlyMutableListeners={on:(o,n,s,r=!1)=>{this.mutableListenerIds.push(this.listeners.on(o,n,s,r))},clearAll:()=>{for(const o of this.mutableListenerIds)this.listeners.offById(o);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===No)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=t,this.eventsDispatcher=e}set state(t){this.Editor=t}removeAllNodes(){for(const t in this.nodes){const e=this.nodes[t];e instanceof HTMLElement&&e.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}};class I{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const t=window.getSelection();return t?t.anchorNode:null}static get anchorElement(){const t=window.getSelection();if(!t)return null;const e=t.anchorNode;return e?m.isElement(e)?e:e.parentElement:null}static get anchorOffset(){const t=window.getSelection();return t?t.anchorOffset:null}static get isCollapsed(){const t=window.getSelection();return t?t.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(I.get())}static isSelectionAtEditor(t){if(!t)return!1;let e=t.anchorNode||t.focusNode;e&&e.nodeType===Node.TEXT_NODE&&(e=e.parentNode);let o=null;return e&&e instanceof Element&&(o=e.closest(`.${I.CSS.editorZone}`)),o?o.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(t){if(!t)return;let e=t.startContainer;e&&e.nodeType===Node.TEXT_NODE&&(e=e.parentNode);let o=null;return e&&e instanceof Element&&(o=e.closest(`.${I.CSS.editorZone}`)),o?o.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!I.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(t){return t&&t.rangeCount?t.getRangeAt(0):null}static get rect(){let t=document.selection,e,o={x:0,y:0,width:0,height:0};if(t&&t.type!=="Control")return t=t,e=t.createRange(),o.x=e.boundingLeft,o.y=e.boundingTop,o.width=e.boundingWidth,o.height=e.boundingHeight,o;if(!window.getSelection)return U("Method window.getSelection is not supported","warn"),o;if(t=window.getSelection(),t.rangeCount===null||isNaN(t.rangeCount))return U("Method SelectionUtils.rangeCount is not supported","warn"),o;if(t.rangeCount===0)return o;if(e=t.getRangeAt(0).cloneRange(),e.getBoundingClientRect&&(o=e.getBoundingClientRect()),o.x===0&&o.y===0){const n=document.createElement("span");if(n.getBoundingClientRect){n.appendChild(document.createTextNode("‚Äã")),e.insertNode(n),o=n.getBoundingClientRect();const s=n.parentNode;s.removeChild(n),s.normalize()}}return o}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(t,e=0){const o=document.createRange(),n=window.getSelection();return m.isNativeInput(t)?m.canSetCaret(t)?(t.focus(),t.selectionStart=t.selectionEnd=e,t.getBoundingClientRect()):void 0:(o.setStart(t,e),o.setEnd(t,e),n.removeAllRanges(),n.addRange(o),o.getBoundingClientRect())}static isRangeInsideContainer(t){const e=I.range;return e===null?!1:t.contains(e.startContainer)}static addFakeCursor(){const t=I.range;if(t===null)return;const e=m.make("span","codex-editor__fake-cursor");e.dataset.mutationFree="true",t.collapse(),t.insertNode(e)}static isFakeCursorInsideContainer(t){return m.find(t,".codex-editor__fake-cursor")!==null}static removeFakeCursor(t=document.body){const e=m.find(t,".codex-editor__fake-cursor");e&&e.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=I.range}restore(){if(!this.savedSelectionRange)return;const t=window.getSelection();t.removeAllRanges(),t.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const t=window.getSelection(),e=document.createRange();e.selectNodeContents(t.focusNode),e.collapse(!1),t.removeAllRanges(),t.addRange(e)}findParentTag(t,e,o=10){const n=window.getSelection();let s=null;return!n||!n.anchorNode||!n.focusNode?null:([n.anchorNode,n.focusNode].forEach(r=>{let a=o;for(;a>0&&r.parentNode&&!(r.tagName===t&&(s=r,e&&r.classList&&!r.classList.contains(e)&&(s=null),s));)r=r.parentNode,a--}),s)}expandToTag(t){const e=window.getSelection();e.removeAllRanges();const o=document.createRange();o.selectNodeContents(t),e.addRange(o)}}function oi(i,t){const{type:e,target:o,addedNodes:n,removedNodes:s}=i;if(o===t)return!0;if(["characterData","attributes"].includes(e)){const l=o.nodeType===Node.TEXT_NODE?o.parentNode:o;return t.contains(l)}const r=Array.from(n).some(l=>t.contains(l)),a=Array.from(s).some(l=>t.contains(l));return r||a}const ke="redactor dom changed",Do="block changed",Po="fake cursor is about to be toggled",Fo="fake cursor have been set";function Ze(i,t){return i.mergeable&&i.name===t.name}function ni(i,t){const e=t==null?void 0:t.export;return W(e)?e(i):xt(e)?i[e]:(e!==void 0&&U("Conversion ¬´export¬ª property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}function ii(i,t){const e=t==null?void 0:t.import;return W(e)?e(i):xt(e)?{[e]:i}:(e!==void 0&&U("Conversion ¬´import¬ª property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}var gt=(i=>(i.APPEND_CALLBACK="appendCallback",i.RENDERED="rendered",i.MOVED="moved",i.UPDATED="updated",i.REMOVED="removed",i.ON_PASTE="onPaste",i))(gt||{});class K extends se{constructor({id:t=Yn(),data:e,tool:o,api:n,readOnly:s,tunesData:r},a){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(l=void 0)=>{const c=l===void 0,d=l instanceof InputEvent;!c&&!d&&this.detectToolRootChange(l);let h;c||d?h=!0:h=!(l.length>0&&l.every(p=>{const{addedNodes:g,removedNodes:f,target:v}=p;return[...Array.from(g),...Array.from(f),v].some(u=>(m.isElement(u)||(u=u.parentElement),u&&u.closest('[data-mutation-free="true"]')!==null))})),h&&(this.dropInputsCache(),this.updateCurrentInput(),this.call("updated"),this.emit("didMutated",this))},this.name=o.name,this.id=t,this.settings=o.settings,this.config=o.settings.config||{},this.api=n,this.editorEventBus=a||null,this.blockAPI=new Et(this),this.tool=o,this.toolInstance=o.create(e,this.blockAPI,s),this.tunes=o.tunes,this.composeTunes(r),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const t=m.findAllInputs(this.holder);return this.inputIndex>t.length-1&&(this.inputIndex=t.length-1),this.cachedInputs=t,t}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(t){const e=this.inputs.findIndex(o=>o===t||o.contains(t));e!==-1&&(this.inputIndex=e)}get firstInput(){return this.inputs[0]}get lastInput(){const t=this.inputs;return t[t.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(t=>t&&!lt(t.data)?t.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return W(this.toolInstance.merge)}get focusable(){return this.inputs.length!==0}get isEmpty(){const t=m.isEmpty(this.pluginsContent,"/"),e=!this.hasMedia;return t&&e}get hasMedia(){const t=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(t.join(","))}set selected(t){var e,o;this.holder.classList.toggle(K.CSS.selected,t);const n=t===!0&&I.isRangeInsideContainer(this.holder),s=t===!1&&I.isFakeCursorInsideContainer(this.holder);(n||s)&&((e=this.editorEventBus)==null||e.emit(Po,{state:t}),n?I.addFakeCursor():I.removeFakeCursor(this.holder),(o=this.editorEventBus)==null||o.emit(Fo,{state:t}))}get selected(){return this.holder.classList.contains(K.CSS.selected)}set stretched(t){this.holder.classList.toggle(K.CSS.wrapperStretched,t)}get stretched(){return this.holder.classList.contains(K.CSS.wrapperStretched)}set dropTarget(t){this.holder.classList.toggle(K.CSS.dropTarget,t)}get pluginsContent(){return this.toolRenderedElement}call(t,e){if(W(this.toolInstance[t])){t==="appendCallback"&&U("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[t].call(this.toolInstance,e)}catch(o){U(`Error during '${t}' call: ${o.message}`,"error")}}}async mergeWith(t){await this.toolInstance.merge(t)}async save(){const t=await this.toolInstance.save(this.pluginsContent),e=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([s,r])=>{if(W(r.save))try{e[s]=r.save()}catch(a){U(`Tune ${r.constructor.name} save method throws an Error %o`,"warn",a)}});const o=window.performance.now();let n;return Promise.resolve(t).then(s=>(n=window.performance.now(),{id:this.id,tool:this.name,data:s,tunes:e,time:n-o})).catch(s=>{U(`Saving process for ${this.name} tool failed due to the ${s}`,"log","red")})}async validate(t){let e=!0;return this.toolInstance.validate instanceof Function&&(e=await this.toolInstance.validate(t)),e}getTunes(){const t=document.createElement("div"),e=[],o=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[],n=[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(s=>s.render());return[o,n].flat().forEach(s=>{m.isElement(s)?t.appendChild(s):Array.isArray(s)?e.push(...s):e.push(s)}),[e,t]}updateCurrentInput(){this.currentInput=m.isNativeInput(document.activeElement)||!I.anchorNode?document.activeElement:I.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),W(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const t=this.tool.toolbox;if(t.length===1)return Promise.resolve(this.tool.toolbox[0]);const e=await this.data;return t.find(o=>Object.entries(o.data).some(([n,s])=>e[n]&&Kn(e[n],s)))}async exportDataAsString(){const t=await this.data;return ni(t,this.tool.conversionConfig)}compose(){const t=m.make("div",K.CSS.wrapper),e=m.make("div",K.CSS.content),o=this.toolInstance.render();t.dataset.id=this.id,this.toolRenderedElement=o,e.appendChild(this.toolRenderedElement);let n=e;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(s=>{if(W(s.wrap))try{n=s.wrap(n)}catch(r){U(`Tune ${s.constructor.name} wrap method throws an Error %o`,"warn",r)}}),t.appendChild(n),t}composeTunes(t){Array.from(this.tunes.values()).forEach(e=>{(e.isInternal?this.defaultTunesInstances:this.tunesInstances).set(e.name,e.create(t[e.name],this.blockAPI))}),Object.entries(t).forEach(([e,o])=>{this.tunesInstances.has(e)||(this.unavailableTunesData[e]=o)})}addInputEvents(){this.inputs.forEach(t=>{t.addEventListener("focus",this.handleFocus),m.isNativeInput(t)&&t.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(t=>{t.removeEventListener("focus",this.handleFocus),m.isNativeInput(t)&&t.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var t;this.redactorDomChangedCallback=e=>{const{mutations:o}=e;o.some(n=>oi(n,this.toolRenderedElement))&&this.didMutated(o)},(t=this.editorEventBus)==null||t.on(ke,this.redactorDomChangedCallback)}unwatchBlockMutations(){var t;(t=this.editorEventBus)==null||t.off(ke,this.redactorDomChangedCallback)}detectToolRootChange(t){t.forEach(e=>{if(Array.from(e.removedNodes).includes(this.toolRenderedElement)){const o=e.addedNodes[e.addedNodes.length-1];this.toolRenderedElement=o}})}dropInputsCache(){this.cachedInputs=[]}}class si extends H{constructor(){super(...arguments),this.insert=(t=this.config.defaultBlock,e={},o={},n,s,r,a)=>{const l=this.Editor.BlockManager.insert({id:a,tool:t,data:e,index:n,needToFocus:s,replace:r});return new Et(l)},this.composeBlockData=async t=>{const e=this.Editor.Tools.blockTools.get(t);return new K({tool:e,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(t,e)=>{const{BlockManager:o}=this.Editor,n=o.getBlockById(t);if(n===void 0)throw new Error(`Block with id "${t}" not found`);const s=await o.update(n,e);return new Et(s)},this.convert=(t,e,o)=>{var n,s;const{BlockManager:r,Tools:a}=this.Editor,l=r.getBlockById(t);if(!l)throw new Error(`Block with id "${t}" not found`);const c=a.blockTools.get(l.name),d=a.blockTools.get(e);if(!d)throw new Error(`Block Tool with type "${e}" not found`);const h=((n=c==null?void 0:c.conversionConfig)==null?void 0:n.export)!==void 0,p=((s=d.conversionConfig)==null?void 0:s.import)!==void 0;if(h&&p)r.convert(l,e,o);else{const g=[h?!1:Rt(l.name),p?!1:Rt(e)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${l.name}" to "${e}" is not possible. ${g} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(t,e=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(e);const o=t.map(({id:n,type:s,data:r})=>this.Editor.BlockManager.composeBlock({id:n,tool:s||this.config.defaultBlock,data:r}));return this.Editor.BlockManager.insertMany(o,e),o.map(n=>new Et(n))}}get methods(){return{clear:()=>this.clear(),render:t=>this.render(t),renderFromHTML:t=>this.renderFromHTML(t),delete:t=>this.delete(t),swap:(t,e)=>this.swap(t,e),move:(t,e)=>this.move(t,e),getBlockByIndex:t=>this.getBlockByIndex(t),getById:t=>this.getById(t),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:t=>this.getBlockIndex(t),getBlocksCount:()=>this.getBlocksCount(),stretchBlock:(t,e=!0)=>this.stretchBlock(t,e),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(t){const e=this.Editor.BlockManager.getBlockById(t);if(!e){ht("There is no block with id `"+t+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(e)}getBlockByIndex(t){const e=this.Editor.BlockManager.getBlockByIndex(t);if(e===void 0){ht("There is no block at index `"+t+"`","warn");return}return new Et(e)}getById(t){const e=this.Editor.BlockManager.getBlockById(t);return e===void 0?(ht("There is no block with id `"+t+"`","warn"),null):new Et(e)}swap(t,e){U("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(t,e)}move(t,e){this.Editor.BlockManager.move(t,e)}delete(t=this.Editor.BlockManager.currentBlockIndex){try{const e=this.Editor.BlockManager.getBlockByIndex(t);this.Editor.BlockManager.removeBlock(e)}catch(e){ht(e,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(t){if(t===void 0||t.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(t.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(t){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(t,!0)}stretchBlock(t,e=!0){ve(!0,"blocks.stretchBlock()","BlockAPI");const o=this.Editor.BlockManager.getBlockByIndex(t);o&&(o.stretched=e)}insertNewBlock(){U("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(t){if(typeof t!="number")throw new Error("Index should be a number");if(t<0)throw new Error("Index should be greater than or equal to 0");if(t===null)throw new Error("Index should be greater than or equal to 0")}}class ri extends H{constructor(){super(...arguments),this.setToFirstBlock=(t=this.Editor.Caret.positions.DEFAULT,e=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,t,e),!0):!1,this.setToLastBlock=(t=this.Editor.Caret.positions.DEFAULT,e=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,t,e),!0):!1,this.setToPreviousBlock=(t=this.Editor.Caret.positions.DEFAULT,e=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,t,e),!0):!1,this.setToNextBlock=(t=this.Editor.Caret.positions.DEFAULT,e=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,t,e),!0):!1,this.setToBlock=(t,e=this.Editor.Caret.positions.DEFAULT,o=0)=>this.Editor.BlockManager.blocks[t]?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.blocks[t],e,o),!0):!1,this.focus=(t=!1)=>t?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}class ai extends H{get methods(){return{emit:(t,e)=>this.emit(t,e),off:(t,e)=>this.off(t,e),on:(t,e)=>this.on(t,e)}}on(t,e){this.eventsDispatcher.on(t,e)}emit(t,e){this.eventsDispatcher.emit(t,e)}off(t,e){this.eventsDispatcher.off(t,e)}}class Be extends H{static getNamespace(t){return t.isTune()?`blockTunes.${t.name}`:`tools.${t.name}`}get methods(){return{t:()=>{ht("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(t){return Object.assign(this.methods,{t:e=>nt.t(Be.getNamespace(t),e)})}}class li extends H{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(t){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(t)})}}class ci extends H{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}}class di extends H{get methods(){return{on:(t,e,o,n)=>this.on(t,e,o,n),off:(t,e,o,n)=>this.off(t,e,o,n),offById:t=>this.offById(t)}}on(t,e,o,n){return this.listeners.on(t,e,o,n)}off(t,e,o,n){this.listeners.off(t,e,o,n)}offById(t){this.listeners.offById(t)}}var we={},hi={get exports(){return we},set exports(i){we=i}};(function(i,t){(function(e,o){i.exports=o()})(window,function(){return function(e){var o={};function n(s){if(o[s])return o[s].exports;var r=o[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=o,n.d=function(s,r,a){n.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:a})},n.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},n.t=function(s,r){if(1&r&&(s=n(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var l in s)n.d(a,l,(function(c){return s[c]}).bind(null,l));return a},n.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return n.d(r,"a",r),r},n.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},n.p="/",n(n.s=0)}([function(e,o,n){n(1),e.exports=function(){var s=n(6),r="cdx-notify--bounce-in",a=null;return{show:function(l){if(l.message){(function(){if(a)return!0;a=s.getWrapper(),document.body.appendChild(a)})();var c=null,d=l.time||8e3;switch(l.type){case"confirm":c=s.confirm(l);break;case"prompt":c=s.prompt(l);break;default:c=s.alert(l),window.setTimeout(function(){c.remove()},d)}a.appendChild(c),c.classList.add(r)}}}}()},function(e,o,n){var s=n(2);typeof s=="string"&&(s=[[e.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(s,r),s.locals&&(e.exports=s.locals)},function(e,o,n){(e.exports=n(3)(!1)).push([e.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(e,o){e.exports=function(n){var s=[];return s.toString=function(){return this.map(function(r){var a=function(l,c){var d=l[1]||"",h=l[3];if(!h)return d;if(c&&typeof btoa=="function"){var p=(f=h,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(f))))+" */"),g=h.sources.map(function(v){return"/*# sourceURL="+h.sourceRoot+v+" */"});return[d].concat(g).concat([p]).join(`
`)}var f;return[d].join(`
`)}(r,n);return r[2]?"@media "+r[2]+"{"+a+"}":a}).join("")},s.i=function(r,a){typeof r=="string"&&(r=[[null,r,""]]);for(var l={},c=0;c<this.length;c++){var d=this[c][0];typeof d=="number"&&(l[d]=!0)}for(c=0;c<r.length;c++){var h=r[c];typeof h[0]=="number"&&l[h[0]]||(a&&!h[2]?h[2]=a:a&&(h[2]="("+h[2]+") and ("+a+")"),s.push(h))}},s}},function(e,o,n){var s,r,a={},l=(s=function(){return window&&document&&document.all&&!window.atob},function(){return r===void 0&&(r=s.apply(this,arguments)),r}),c=function(x){var y={};return function(T){if(typeof T=="function")return T();if(y[T]===void 0){var M=(function(D){return document.querySelector(D)}).call(this,T);if(window.HTMLIFrameElement&&M instanceof window.HTMLIFrameElement)try{M=M.contentDocument.head}catch{M=null}y[T]=M}return y[T]}}(),d=null,h=0,p=[],g=n(5);function f(x,y){for(var T=0;T<x.length;T++){var M=x[T],D=a[M.id];if(D){D.refs++;for(var N=0;N<D.parts.length;N++)D.parts[N](M.parts[N]);for(;N<M.parts.length;N++)D.parts.push(B(M.parts[N],y))}else{var V=[];for(N=0;N<M.parts.length;N++)V.push(B(M.parts[N],y));a[M.id]={id:M.id,refs:1,parts:V}}}}function v(x,y){for(var T=[],M={},D=0;D<x.length;D++){var N=x[D],V=y.base?N[0]+y.base:N[0],k={css:N[1],media:N[2],sourceMap:N[3]};M[V]?M[V].parts.push(k):T.push(M[V]={id:V,parts:[k]})}return T}function u(x,y){var T=c(x.insertInto);if(!T)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var M=p[p.length-1];if(x.insertAt==="top")M?M.nextSibling?T.insertBefore(y,M.nextSibling):T.appendChild(y):T.insertBefore(y,T.firstChild),p.push(y);else if(x.insertAt==="bottom")T.appendChild(y);else{if(typeof x.insertAt!="object"||!x.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var D=c(x.insertInto+" "+x.insertAt.before);T.insertBefore(y,D)}}function w(x){if(x.parentNode===null)return!1;x.parentNode.removeChild(x);var y=p.indexOf(x);y>=0&&p.splice(y,1)}function b(x){var y=document.createElement("style");return x.attrs.type===void 0&&(x.attrs.type="text/css"),L(y,x.attrs),u(x,y),y}function L(x,y){Object.keys(y).forEach(function(T){x.setAttribute(T,y[T])})}function B(x,y){var T,M,D,N;if(y.transform&&x.css){if(!(N=y.transform(x.css)))return function(){};x.css=N}if(y.singleton){var V=h++;T=d||(d=b(y)),M=A.bind(null,T,V,!1),D=A.bind(null,T,V,!0)}else x.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(T=function(k){var C=document.createElement("link");return k.attrs.type===void 0&&(k.attrs.type="text/css"),k.attrs.rel="stylesheet",L(C,k.attrs),u(k,C),C}(y),M=(function(k,C,_){var O=_.css,j=_.sourceMap,P=C.convertToAbsoluteUrls===void 0&&j;(C.convertToAbsoluteUrls||P)&&(O=g(O)),j&&(O+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(j))))+" */");var Y=new Blob([O],{type:"text/css"}),$=k.href;k.href=URL.createObjectURL(Y),$&&URL.revokeObjectURL($)}).bind(null,T,y),D=function(){w(T),T.href&&URL.revokeObjectURL(T.href)}):(T=b(y),M=(function(k,C){var _=C.css,O=C.media;if(O&&k.setAttribute("media",O),k.styleSheet)k.styleSheet.cssText=_;else{for(;k.firstChild;)k.removeChild(k.firstChild);k.appendChild(document.createTextNode(_))}}).bind(null,T),D=function(){w(T)});return M(x),function(k){if(k){if(k.css===x.css&&k.media===x.media&&k.sourceMap===x.sourceMap)return;M(x=k)}else D()}}e.exports=function(x,y){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(y=y||{}).attrs=typeof y.attrs=="object"?y.attrs:{},y.singleton||typeof y.singleton=="boolean"||(y.singleton=l()),y.insertInto||(y.insertInto="head"),y.insertAt||(y.insertAt="bottom");var T=v(x,y);return f(T,y),function(M){for(var D=[],N=0;N<T.length;N++){var V=T[N];(k=a[V.id]).refs--,D.push(k)}for(M&&f(v(M,y),y),N=0;N<D.length;N++){var k;if((k=D[N]).refs===0){for(var C=0;C<k.parts.length;C++)k.parts[C]();delete a[k.id]}}}};var E,S=(E=[],function(x,y){return E[x]=y,E.filter(Boolean).join(`
`)});function A(x,y,T,M){var D=T?"":M.css;if(x.styleSheet)x.styleSheet.cssText=S(y,D);else{var N=document.createTextNode(D),V=x.childNodes;V[y]&&x.removeChild(V[y]),V.length?x.insertBefore(N,V[y]):x.appendChild(N)}}},function(e,o){e.exports=function(n){var s=typeof window<"u"&&window.location;if(!s)throw new Error("fixUrls requires window.location");if(!n||typeof n!="string")return n;var r=s.protocol+"//"+s.host,a=r+s.pathname.replace(/\/[^\/]*$/,"/");return n.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(l,c){var d,h=c.trim().replace(/^"(.*)"$/,function(p,g){return g}).replace(/^'(.*)'$/,function(p,g){return g});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(h)?l:(d=h.indexOf("//")===0?h:h.indexOf("/")===0?r+h:a+h.replace(/^\.\//,""),"url("+JSON.stringify(d)+")")})}},function(e,o,n){var s,r,a,l,c,d,h,p,g;e.exports=(s="cdx-notifies",r="cdx-notify",a="cdx-notify__cross",l="cdx-notify__button--confirm",c="cdx-notify__button--cancel",d="cdx-notify__input",h="cdx-notify__button",p="cdx-notify__btns-wrapper",{alert:g=function(f){var v=document.createElement("DIV"),u=document.createElement("DIV"),w=f.message,b=f.style;return v.classList.add(r),b&&v.classList.add(r+"--"+b),v.innerHTML=w,u.classList.add(a),u.addEventListener("click",v.remove.bind(v)),v.appendChild(u),v},confirm:function(f){var v=g(f),u=document.createElement("div"),w=document.createElement("button"),b=document.createElement("button"),L=v.querySelector("."+a),B=f.cancelHandler,E=f.okHandler;return u.classList.add(p),w.innerHTML=f.okText||"Confirm",b.innerHTML=f.cancelText||"Cancel",w.classList.add(h),b.classList.add(h),w.classList.add(l),b.classList.add(c),B&&typeof B=="function"&&(b.addEventListener("click",B),L.addEventListener("click",B)),E&&typeof E=="function"&&w.addEventListener("click",E),w.addEventListener("click",v.remove.bind(v)),b.addEventListener("click",v.remove.bind(v)),u.appendChild(w),u.appendChild(b),v.appendChild(u),v},prompt:function(f){var v=g(f),u=document.createElement("div"),w=document.createElement("button"),b=document.createElement("input"),L=v.querySelector("."+a),B=f.cancelHandler,E=f.okHandler;return u.classList.add(p),w.innerHTML=f.okText||"Ok",w.classList.add(h),w.classList.add(l),b.classList.add(d),f.placeholder&&b.setAttribute("placeholder",f.placeholder),f.default&&(b.value=f.default),f.inputType&&(b.type=f.inputType),B&&typeof B=="function"&&L.addEventListener("click",B),E&&typeof E=="function"&&w.addEventListener("click",function(){E(b.value)}),w.addEventListener("click",v.remove.bind(v)),u.appendChild(b),u.appendChild(w),v.appendChild(u),v},getWrapper:function(){var f=document.createElement("DIV");return f.classList.add(s),f}})}])})})(hi);const ui=Se(we);class pi{show(t){ui.show(t)}}class fi extends H{constructor({config:t,eventsDispatcher:e}){super({config:t,eventsDispatcher:e}),this.notifier=new pi}get methods(){return{show:t=>this.show(t)}}show(t){return this.notifier.show(t)}}class gi extends H{get methods(){const t=()=>this.isEnabled;return{toggle:e=>this.toggle(e),get isEnabled(){return t()}}}toggle(t){return this.Editor.ReadOnly.toggle(t)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}}var ye={},mi={get exports(){return ye},set exports(i){ye=i}};(function(i,t){(function(e,o){i.exports=o()})(Fn,function(){function e(h){var p=h.tags,g=Object.keys(p),f=g.map(function(v){return typeof p[v]}).every(function(v){return v==="object"||v==="boolean"||v==="function"});if(!f)throw new Error("The configuration was invalid");this.config=h}var o=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function n(h){return o.indexOf(h.nodeName)!==-1}var s=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function r(h){return s.indexOf(h.nodeName)!==-1}e.prototype.clean=function(h){const p=document.implementation.createHTMLDocument(),g=p.createElement("div");return g.innerHTML=h,this._sanitize(p,g),g.innerHTML},e.prototype._sanitize=function(h,p){var g=a(h,p),f=g.firstChild();if(f)do{if(f.nodeType===Node.TEXT_NODE)if(f.data.trim()===""&&(f.previousElementSibling&&n(f.previousElementSibling)||f.nextElementSibling&&n(f.nextElementSibling))){p.removeChild(f),this._sanitize(h,p);break}else continue;if(f.nodeType===Node.COMMENT_NODE){p.removeChild(f),this._sanitize(h,p);break}var v=r(f),u;v&&(u=Array.prototype.some.call(f.childNodes,n));var w=!!p.parentNode,b=n(p)&&n(f)&&w,L=f.nodeName.toLowerCase(),B=l(this.config,L,f),E=v&&u;if(E||c(f,B)||!this.config.keepNestedBlockElements&&b){if(!(f.nodeName==="SCRIPT"||f.nodeName==="STYLE"))for(;f.childNodes.length>0;)p.insertBefore(f.childNodes[0],f);p.removeChild(f),this._sanitize(h,p);break}for(var S=0;S<f.attributes.length;S+=1){var A=f.attributes[S];d(A,B,f)&&(f.removeAttribute(A.name),S=S-1)}this._sanitize(h,f)}while(f=g.nextSibling())};function a(h,p){return h.createTreeWalker(p,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function l(h,p,g){return typeof h.tags[p]=="function"?h.tags[p](g):h.tags[p]}function c(h,p){return typeof p>"u"?!0:typeof p=="boolean"?!p:!1}function d(h,p,g){var f=h.name.toLowerCase();return p===!0?!1:typeof p[f]=="function"?!p[f](h.value,g):typeof p[f]>"u"||p[f]===!1?!0:typeof p[f]=="string"?p[f]!==h.value:!1}return e})})(mi);const bi=ye;function Ho(i,t){return i.map(e=>{const o=W(t)?t(e.tool):t;return lt(o)||(e.data=Le(e.data,o)),e})}function mt(i,t={}){const e={tags:t};return new bi(e).clean(i)}function Le(i,t){return Array.isArray(i)?vi(i,t):J(i)?ki(i,t):xt(i)?wi(i,t):i}function vi(i,t){return i.map(e=>Le(e,t))}function ki(i,t){const e={};for(const o in i){if(!Object.prototype.hasOwnProperty.call(i,o))continue;const n=i[o],s=yi(t[o])?t[o]:t;e[o]=Le(n,s)}return e}function wi(i,t){return J(t)?mt(i,t):t===!1?mt(i,{}):i}function yi(i){return J(i)||Un(i)||W(i)}class xi extends H{get methods(){return{clean:(t,e)=>this.clean(t,e)}}clean(t,e){return mt(t,e)}}class Ci extends H{get methods(){return{save:()=>this.save()}}save(){const t="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(ht(t,"warn"),Promise.reject(new Error(t))):this.Editor.Saver.save()}}class Ei extends H{get methods(){return{findParentTag:(t,e)=>this.findParentTag(t,e),expandToTag:t=>this.expandToTag(t)}}findParentTag(t,e){return new I().findParentTag(t,e)}expandToTag(t){new I().expandToTag(t)}}class Si extends H{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}class Ti extends H{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:t=>this.toggleBlockSettings(t),toggleToolbox:t=>this.toggleToolbox(t)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(t){if(this.Editor.BlockManager.currentBlockIndex===-1){ht("Could't toggle the Toolbar because there is no block selected ","warn");return}t??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(t){if(this.Editor.BlockManager.currentBlockIndex===-1){ht("Could't toggle the Toolbox because there is no block selected ","warn");return}t??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}}var xe={},Bi={get exports(){return xe},set exports(i){xe=i}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(i,t){(function(e,o){i.exports=o()})(window,function(){return function(e){var o={};function n(s){if(o[s])return o[s].exports;var r=o[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=o,n.d=function(s,r,a){n.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:a})},n.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},n.t=function(s,r){if(1&r&&(s=n(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var l in s)n.d(a,l,(function(c){return s[c]}).bind(null,l));return a},n.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return n.d(r,"a",r),r},n.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},n.p="",n(n.s=0)}([function(e,o,n){e.exports=n(1)},function(e,o,n){n.r(o),n.d(o,"default",function(){return s});class s{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(a,l,c){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const d=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},c);if(d.hidingDelay&&(this.hidingDelay=d.hidingDelay),this.nodes.content.innerHTML="",typeof l=="string")this.nodes.content.appendChild(document.createTextNode(l));else{if(!(l instanceof Node))throw Error("[CodeX Tooltip] Wrong type of ¬´content¬ª passed. It should be an instance of Node or String. But "+typeof l+" given.");this.nodes.content.appendChild(l)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),d.placement){case"top":this.placeTop(a,d);break;case"left":this.placeLeft(a,d);break;case"right":this.placeRight(a,d);break;case"bottom":default:this.placeBottom(a,d)}d&&d.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},d.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(a=!1){if(this.hidingDelay&&!a)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(a,l,c){a.addEventListener("mouseenter",()=>{this.show(a,l,c)}),a.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const a="codex-tooltips-style";if(document.getElementById(a))return;const l=n(2),c=this.make("style",null,{textContent:l.toString(),id:a});this.prepend(document.head,c)}placeBottom(a,l){const c=a.getBoundingClientRect(),d=c.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,h=c.bottom+window.pageYOffset+this.offsetTop+l.marginTop;this.applyPlacement("bottom",d,h)}placeTop(a,l){const c=a.getBoundingClientRect(),d=c.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,h=c.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",d,h)}placeLeft(a,l){const c=a.getBoundingClientRect(),d=c.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-l.marginLeft,h=c.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",d,h)}placeRight(a,l){const c=a.getBoundingClientRect(),d=c.right+this.offsetRight+l.marginRight,h=c.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",d,h)}applyPlacement(a,l,c){this.nodes.wrapper.classList.add(this.CSS.placement[a]),this.nodes.wrapper.style.left=l+"px",this.nodes.wrapper.style.top=c+"px"}make(a,l=null,c={}){const d=document.createElement(a);Array.isArray(l)?d.classList.add(...l):l&&d.classList.add(l);for(const h in c)c.hasOwnProperty(h)&&(d[h]=c[h]);return d}append(a,l){Array.isArray(l)?l.forEach(c=>a.appendChild(c)):a.appendChild(l)}prepend(a,l){Array.isArray(l)?(l=l.reverse()).forEach(c=>a.prepend(c)):a.prepend(l)}}},function(e,o){e.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})(Bi);const Li=Se(xe);let pt=null;function Ie(){pt||(pt=new Li)}function Ii(i,t,e){Ie(),pt==null||pt.show(i,t,e)}function Ce(i=!1){Ie(),pt==null||pt.hide(i)}function Wt(i,t,e){Ie(),pt==null||pt.onHover(i,t,e)}function Mi(){pt==null||pt.destroy(),pt=null}class Ai extends H{constructor({config:t,eventsDispatcher:e}){super({config:t,eventsDispatcher:e})}get methods(){return{show:(t,e,o)=>this.show(t,e,o),hide:()=>this.hide(),onHover:(t,e,o)=>this.onHover(t,e,o)}}show(t,e,o){Ii(t,e,o)}hide(){Ce()}onHover(t,e,o){Wt(t,e,o)}}class _i extends H{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}function zo(i,t){const e={};return Object.entries(i).forEach(([o,n])=>{if(J(n)){const s=t?`${t}.${o}`:o;Object.values(n).every(r=>xt(r))?e[o]=s:e[o]=zo(n,s);return}e[o]=n}),e}const ut=zo(Oo);function Oi(i,t){const e={};return Object.keys(i).forEach(o=>{const n=t[o];n!==void 0?e[n]=i[o]:e[o]=i[o]}),e}const Ri='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',jo='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',Ni='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',Di='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',Pi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',Fi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',Qe='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',Hi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',zi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',ji='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',Ui='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',$i='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>';class Z{constructor(t){this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{this.nodes.root.classList.remove(Z.CSS.noFocus)},this.removeSpecialHoverBehavior=()=>{this.nodes.root.classList.remove(Z.CSS.noHover)},this.onErrorAnimationEnd=()=>{this.nodes.icon.classList.remove(Z.CSS.wobbleAnimation),this.nodes.icon.removeEventListener("animationend",this.onErrorAnimationEnd)},this.params=t,this.nodes.root=this.make(t)}get isDisabled(){return this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get closeOnActivate(){return this.params.closeOnActivate}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root.classList.contains(Z.CSS.focused)}static get CSS(){return{container:"ce-popover-item",title:"ce-popover-item__title",secondaryTitle:"ce-popover-item__secondary-title",icon:"ce-popover-item__icon",active:"ce-popover-item--active",disabled:"ce-popover-item--disabled",focused:"ce-popover-item--focused",hidden:"ce-popover-item--hidden",confirmationState:"ce-popover-item--confirmation",noHover:"ce-popover-item--no-hover",noFocus:"ce-popover-item--no-focus",wobbleAnimation:"wobble"}}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(t){this.nodes.root.classList.toggle(Z.CSS.active,t)}toggleHidden(t){this.nodes.root.classList.toggle(Z.CSS.hidden,t)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(t){const e=m.make("div",Z.CSS.container);return t.name&&(e.dataset.itemName=t.name),this.nodes.icon=m.make("div",Z.CSS.icon,{innerHTML:t.icon||Pi}),e.appendChild(this.nodes.icon),e.appendChild(m.make("div",Z.CSS.title,{innerHTML:t.title||""})),t.secondaryLabel&&e.appendChild(m.make("div",Z.CSS.secondaryTitle,{textContent:t.secondaryLabel})),t.isActive&&e.classList.add(Z.CSS.active),t.isDisabled&&e.classList.add(Z.CSS.disabled),e}enableConfirmationMode(t){const e={...this.params,...t,confirmation:t.confirmation},o=this.make(e);this.nodes.root.innerHTML=o.innerHTML,this.nodes.root.classList.add(Z.CSS.confirmationState),this.confirmationState=t,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){const t=this.make(this.params);this.nodes.root.innerHTML=t.innerHTML,this.nodes.root.classList.remove(Z.CSS.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){this.nodes.root.classList.add(Z.CSS.noHover),this.nodes.root.classList.add(Z.CSS.noFocus),this.nodes.root.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),this.nodes.root.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(t){if(t.confirmation===void 0)try{t.onActivate(t),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(t.confirmation)}animateError(){this.nodes.icon.classList.contains(Z.CSS.wobbleAnimation)||(this.nodes.icon.classList.add(Z.CSS.wobbleAnimation),this.nodes.icon.addEventListener("animationend",this.onErrorAnimationEnd))}}const Ft=class{constructor(i,t){this.cursor=-1,this.items=[],this.items=i||[],this.focusedCssClass=t}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(i){i<this.items.length&&i>=-1&&(this.dropCursor(),this.cursor=i,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(i){this.items=i}next(){this.cursor=this.leafNodesAndReturnIndex(Ft.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(Ft.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(i){if(this.items.length===0)return this.cursor;let t=this.cursor;return t===-1?t=i===Ft.directions.RIGHT?-1:0:this.items[t].classList.remove(this.focusedCssClass),i===Ft.directions.RIGHT?t=(t+1)%this.items.length:t=(this.items.length+t-1)%this.items.length,m.canSetCaret(this.items[t])&&oe(()=>I.setCursor(this.items[t]),50)(),this.items[t].classList.add(this.focusedCssClass),t}};let At=Ft;At.directions={RIGHT:"right",LEFT:"left"};class bt{constructor(t){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=e=>{if(this.isEventReadyForHandling(e))switch(bt.usedKeys.includes(e.keyCode)&&e.preventDefault(),e.keyCode){case R.TAB:this.handleTabPress(e);break;case R.LEFT:case R.UP:this.flipLeft();break;case R.RIGHT:case R.DOWN:this.flipRight();break;case R.ENTER:this.handleEnterPress(e);break}},this.iterator=new At(t.items,t.focusedItemClass),this.activateCallback=t.activateCallback,this.allowedKeys=t.allowedKeys||bt.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[R.TAB,R.LEFT,R.RIGHT,R.ENTER,R.UP,R.DOWN]}activate(t,e){this.activated=!0,t&&this.iterator.setItems(t),e!==void 0&&this.iterator.setCursor(e),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(t){this.flipCallbacks.push(t)}removeOnFlip(t){this.flipCallbacks=this.flipCallbacks.filter(e=>e!==t)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(t){return this.activated&&this.allowedKeys.includes(t.keyCode)}handleTabPress(t){switch(t.shiftKey?At.directions.LEFT:At.directions.RIGHT){case At.directions.RIGHT:this.flipRight();break;case At.directions.LEFT:this.flipLeft();break}}handleEnterPress(t){this.activated&&(this.iterator.currentItem&&(t.stopPropagation(),t.preventDefault(),this.iterator.currentItem.click()),W(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(t=>t())}}class jt{static get CSS(){return{wrapper:"cdx-search-field",icon:"cdx-search-field__icon",input:"cdx-search-field__input"}}constructor({items:t,onSearch:e,placeholder:o}){this.listeners=new Te,this.items=t,this.onSearch=e,this.render(o)}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.onSearch("",this.foundItems)}destroy(){this.listeners.removeAll()}render(t){this.wrapper=m.make("div",jt.CSS.wrapper);const e=m.make("div",jt.CSS.icon,{innerHTML:ji});this.input=m.make("input",jt.CSS.input,{placeholder:t,tabIndex:-1}),this.wrapper.appendChild(e),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.onSearch(this.searchQuery,this.foundItems)})}get foundItems(){return this.items.filter(t=>this.checkItem(t))}checkItem(t){var e;const o=((e=t.title)==null?void 0:e.toLowerCase())||"",n=this.searchQuery.toLowerCase();return o.includes(n)}}const Ht=class{lock(){Ye?this.lockHard():document.body.classList.add(Ht.CSS.scrollLocked)}unlock(){Ye?this.unlockHard():document.body.classList.remove(Ht.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(Ht.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(Ht.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};let Uo=Ht;Uo.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};var qi=Object.defineProperty,Wi=Object.getOwnPropertyDescriptor,Vi=(i,t,e,o)=>{for(var n=o>1?void 0:o?Wi(t,e):t,s=i.length-1,r;s>=0;s--)(r=i[s])&&(n=(o?r(t,e,n):r(n))||n);return o&&n&&qi(t,e,n),n},Vt=(i=>(i.Close="close",i))(Vt||{});const Q=class extends se{constructor(i){super(),this.scopeElement=document.body,this.listeners=new Te,this.scrollLocker=new Uo,this.nodes={wrapper:null,popover:null,nothingFoundMessage:null,customContent:null,items:null,overlay:null},this.messages={nothingFound:"Nothing found",search:"Search"},this.onFlip=()=>{this.items.find(t=>t.isFocused).onFocus()},this.items=i.items.map(t=>new Z(t)),i.scopeElement!==void 0&&(this.scopeElement=i.scopeElement),i.messages&&(this.messages={...this.messages,...i.messages}),i.customContentFlippableItems&&(this.customContentFlippableItems=i.customContentFlippableItems),this.make(),i.customContent&&this.addCustomContent(i.customContent),i.searchable&&this.addSearch(),this.initializeFlipper()}static get CSS(){return{popover:"ce-popover",popoverOpenTop:"ce-popover--open-top",popoverOpened:"ce-popover--opened",search:"ce-popover__search",nothingFoundMessage:"ce-popover__nothing-found-message",nothingFoundMessageDisplayed:"ce-popover__nothing-found-message--displayed",customContent:"ce-popover__custom-content",customContentHidden:"ce-popover__custom-content--hidden",items:"ce-popover__items",overlay:"ce-popover__overlay",overlayHidden:"ce-popover__overlay--hidden"}}getElement(){return this.nodes.wrapper}hasFocus(){return this.flipper.hasFocus()}show(){this.shouldOpenBottom||(this.nodes.popover.style.setProperty("--popover-height",this.height+"px"),this.nodes.popover.classList.add(Q.CSS.popoverOpenTop)),this.nodes.overlay.classList.remove(Q.CSS.overlayHidden),this.nodes.popover.classList.add(Q.CSS.popoverOpened),this.flipper.activate(this.flippableElements),this.search!==void 0&&requestAnimationFrame(()=>{var i;(i=this.search)==null||i.focus()}),St()&&this.scrollLocker.lock()}hide(){this.nodes.popover.classList.remove(Q.CSS.popoverOpened),this.nodes.popover.classList.remove(Q.CSS.popoverOpenTop),this.nodes.overlay.classList.add(Q.CSS.overlayHidden),this.flipper.deactivate(),this.items.forEach(i=>i.reset()),this.search!==void 0&&this.search.clear(),St()&&this.scrollLocker.unlock(),this.emit("close")}destroy(){this.flipper.deactivate(),this.listeners.removeAll(),St()&&this.scrollLocker.unlock()}make(){this.nodes.popover=m.make("div",[Q.CSS.popover]),this.nodes.nothingFoundMessage=m.make("div",[Q.CSS.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popover.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=m.make("div",[Q.CSS.items]),this.items.forEach(i=>{this.nodes.items.appendChild(i.getElement())}),this.nodes.popover.appendChild(this.nodes.items),this.listeners.on(this.nodes.popover,"click",i=>{const t=this.getTargetItem(i);t!==void 0&&this.handleItemClick(t)}),this.nodes.wrapper=m.make("div"),this.nodes.overlay=m.make("div",[Q.CSS.overlay,Q.CSS.overlayHidden]),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.nodes.wrapper.appendChild(this.nodes.overlay),this.nodes.wrapper.appendChild(this.nodes.popover)}addSearch(){this.search=new jt({items:this.items,placeholder:this.messages.search,onSearch:(t,e)=>{this.items.forEach(n=>{const s=!e.includes(n);n.toggleHidden(s)}),this.toggleNothingFoundMessage(e.length===0),this.toggleCustomContent(t!=="");const o=t===""?this.flippableElements:e.map(n=>n.getElement());this.flipper.isActivated&&(this.flipper.deactivate(),this.flipper.activate(o))}});const i=this.search.getElement();i.classList.add(Q.CSS.search),this.nodes.popover.insertBefore(i,this.nodes.popover.firstChild)}addCustomContent(i){this.nodes.customContent=i,this.nodes.customContent.classList.add(Q.CSS.customContent),this.nodes.popover.insertBefore(i,this.nodes.popover.firstChild)}getTargetItem(i){return this.items.find(t=>i.composedPath().includes(t.getElement()))}handleItemClick(i){i.isDisabled||(this.items.filter(t=>t!==i).forEach(t=>t.reset()),i.handleClick(),this.toggleItemActivenessIfNeeded(i),i.closeOnActivate&&this.hide())}initializeFlipper(){this.flipper=new bt({items:this.flippableElements,focusedItemClass:Z.CSS.focused,allowedKeys:[R.TAB,R.UP,R.DOWN,R.ENTER]}),this.flipper.onFlip(this.onFlip)}get flippableElements(){const i=this.items.map(t=>t.getElement());return(this.customContentFlippableItems||[]).concat(i)}get height(){let i=0;if(this.nodes.popover===null)return i;const t=this.nodes.popover.cloneNode(!0);return t.style.visibility="hidden",t.style.position="absolute",t.style.top="-1000px",t.classList.add(Q.CSS.popoverOpened),document.body.appendChild(t),i=t.offsetHeight,t.remove(),i}get shouldOpenBottom(){const i=this.nodes.popover.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),e=this.height,o=i.top+e,n=i.top-e,s=Math.min(window.innerHeight,t.bottom);return n<t.top||o<=s}toggleNothingFoundMessage(i){this.nodes.nothingFoundMessage.classList.toggle(Q.CSS.nothingFoundMessageDisplayed,i)}toggleCustomContent(i){var t;(t=this.nodes.customContent)==null||t.classList.toggle(Q.CSS.customContentHidden,i)}toggleItemActivenessIfNeeded(i){if(i.toggle===!0&&i.toggleActive(),typeof i.toggle=="string"){const t=this.items.filter(e=>e.toggle===i.toggle);if(t.length===1){i.toggleActive();return}t.forEach(e=>{e.toggleActive(e===i)})}}};let Me=Q;Vi([Pt],Me.prototype,"height",1);class Xi extends H{constructor(){super(...arguments),this.opened=!1,this.selection=new I,this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var t;return(t=this.popover)==null?void 0:t.flipper}make(){this.nodes.wrapper=m.make("div",[this.CSS.settings])}destroy(){this.removeAllNodes()}open(t=this.Editor.BlockManager.currentBlock){this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(t),this.Editor.BlockSelection.clearCache();const[e,o]=t.getTunes();this.eventsDispatcher.emit(this.events.opened),this.popover=new Me({searchable:!0,items:e.map(n=>this.resolveTuneAliases(n)),customContent:o,customContentFlippableItems:this.getControls(o),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:nt.ui(ut.ui.popover,"Nothing found"),search:nt.ui(ut.ui.popover,"Filter")}}),this.popover.on(Vt.Close,this.onPopoverClose),this.nodes.wrapper.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}close(){this.opened&&(this.opened=!1,I.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(Vt.Close,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))}getControls(t){const{StylesAPI:e}=this.Editor,o=t.querySelectorAll(`.${e.classes.settingsButton}, ${m.allInputsSelector}`);return Array.from(o)}resolveTuneAliases(t){const e=Oi(t,{label:"title"});return t.confirmation&&(e.confirmation=this.resolveTuneAliases(t.confirmation)),e}}let Yi=class at extends H{constructor(){super(...arguments),this.opened=!1,this.tools=[],this.flipper=null,this.togglingCallback=null}static get CSS(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolSecondaryLabel:"ce-conversion-tool__secondary-label",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}make(){this.nodes.wrapper=m.make("div",[at.CSS.conversionToolbarWrapper,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.tools=m.make("div",at.CSS.conversionToolbarTools);const t=m.make("div",at.CSS.conversionToolbarLabel,{textContent:nt.ui(ut.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),m.append(this.nodes.wrapper,t),m.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}toggle(t){this.opened?this.close():this.open(),W(t)&&(this.togglingCallback=t)}open(){this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add(at.CSS.conversionToolbarShowed),window.requestAnimationFrame(()=>{this.flipper.activate(this.tools.map(t=>t.button).filter(t=>!t.classList.contains(at.CSS.conversionToolHidden))),this.flipper.focusFirst(),W(this.togglingCallback)&&this.togglingCallback(!0)})}close(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove(at.CSS.conversionToolbarShowed),W(this.togglingCallback)&&this.togglingCallback(!1)}hasTools(){return this.tools.length===1?this.tools[0].name!==this.config.defaultBlock:!0}async replaceWithBlock(t,e){const{BlockManager:o,BlockSelection:n,InlineToolbar:s,Caret:r}=this.Editor;o.convert(this.Editor.BlockManager.currentBlock,t,e),n.clearSelection(),this.close(),s.close(),window.requestAnimationFrame(()=>{r.setToBlock(this.Editor.BlockManager.currentBlock,r.positions.END)})}addTools(){const t=this.Editor.Tools.blockTools;Array.from(t.entries()).forEach(([e,o])=>{var n;const s=o.conversionConfig;!s||!s.import||(n=o.toolbox)==null||n.forEach(r=>this.addToolIfValid(e,r))})}addToolIfValid(t,e){lt(e)||!e.icon||this.addTool(t,e)}addTool(t,e){var o;const n=m.make("div",[at.CSS.conversionTool]),s=m.make("div",[at.CSS.conversionToolIcon]);n.dataset.tool=t,s.innerHTML=e.icon,m.append(n,s),m.append(n,m.text(nt.t(ut.toolNames,e.title||Rt(t))));const r=(o=this.Editor.Tools.blockTools.get(t))==null?void 0:o.shortcut;if(r){const a=m.make("span",at.CSS.conversionToolSecondaryLabel,{innerText:ie(r)});m.append(n,a)}m.append(this.nodes.tools,n),this.tools.push({name:t,button:n,toolboxItem:e}),this.listeners.on(n,"click",async()=>{await this.replaceWithBlock(t,e.data)})}async filterTools(){const{currentBlock:t}=this.Editor.BlockManager,e=await t.getActiveToolboxEntry();function o(n,s){return n.icon===s.icon&&n.title===s.title}this.tools.forEach(n=>{let s=!1;if(e){const r=o(e,n.toolboxItem);s=n.button.dataset.tool===t.name&&r}n.button.hidden=s,n.button.classList.toggle(at.CSS.conversionToolHidden,s)})}enableFlipper(){this.flipper=new bt({focusedItemClass:at.CSS.conversionToolFocused})}};var Ee={},Zi={get exports(){return Ee},set exports(i){Ee=i}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(i,t){(function(e,o){i.exports=o()})(window,function(){return function(e){var o={};function n(s){if(o[s])return o[s].exports;var r=o[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=o,n.d=function(s,r,a){n.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:a})},n.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},n.t=function(s,r){if(1&r&&(s=n(s)),8&r||4&r&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&r&&typeof s!="string")for(var l in s)n.d(a,l,(function(c){return s[c]}).bind(null,l));return a},n.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return n.d(r,"a",r),r},n.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},n.p="",n(n.s=0)}([function(e,o,n){function s(l,c){for(var d=0;d<c.length;d++){var h=c[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}function r(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}n.r(o);var a=function(){function l(c){var d=this;(function(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")})(this,l),this.commands={},this.keys={},this.name=c.name,this.parseShortcutName(c.name),this.element=c.on,this.callback=c.callback,this.executeShortcut=function(h){d.execute(h)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return r(l,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),r(l,[{key:"parseShortcutName",value:function(c){c=c.split("+");for(var d=0;d<c.length;d++){c[d]=c[d].toUpperCase();var h=!1;for(var p in l.supportedCommands)if(l.supportedCommands[p].includes(c[d])){h=this.commands[p]=!0;break}h||(this.keys[c[d]]=!0)}for(var g in l.supportedCommands)this.commands[g]||(this.commands[g]=!1)}},{key:"execute",value:function(c){var d,h={CMD:c.ctrlKey||c.metaKey,SHIFT:c.shiftKey,ALT:c.altKey},p=!0;for(d in this.commands)this.commands[d]!==h[d]&&(p=!1);var g,f=!0;for(g in this.keys)f=f&&c.keyCode===l.keyCodes[g];p&&f&&this.callback(c)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),l}();o.default=a}]).default})})(Zi);const Qi=Se(Ee);class Ki{constructor(){this.registeredShortcuts=new Map}add(t){if(this.findShortcut(t.on,t.name))throw Error(`Shortcut ${t.name} is already registered for ${t.on}. Please remove it before add a new handler.`);const e=new Qi({name:t.name,on:t.on,callback:t.handler}),o=this.registeredShortcuts.get(t.on)||[];this.registeredShortcuts.set(t.on,[...o,e])}remove(t,e){const o=this.findShortcut(t,e);if(!o)return;o.remove();const n=this.registeredShortcuts.get(t);this.registeredShortcuts.set(t,n.filter(s=>s!==o))}findShortcut(t,e){return(this.registeredShortcuts.get(t)||[]).find(({name:o})=>o===e)}}const Nt=new Ki;var Ji=Object.defineProperty,Gi=Object.getOwnPropertyDescriptor,$o=(i,t,e,o)=>{for(var n=o>1?void 0:o?Gi(t,e):t,s=i.length-1,r;s>=0;s--)(r=i[s])&&(n=(o?r(t,e,n):r(n))||n);return o&&n&&Ji(t,e,n),n},Gt=(i=>(i.Opened="toolbox-opened",i.Closed="toolbox-closed",i.BlockAdded="toolbox-block-added",i))(Gt||{});const qo=class extends se{constructor({api:i,tools:t,i18nLabels:e}){super(),this.opened=!1,this.nodes={toolbox:null},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=i,this.tools=t,this.i18nLabels=e}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}make(){return this.popover=new Me({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(Vt.Close,this.onPopoverClose),this.enableShortcuts(),this.nodes.toolbox=this.popover.getElement(),this.nodes.toolbox.classList.add(qo.CSS.toolbox),this.nodes.toolbox}hasFocus(){var i;return(i=this.popover)==null?void 0:i.hasFocus()}destroy(){var i;super.destroy(),this.nodes&&this.nodes.toolbox&&(this.nodes.toolbox.remove(),this.nodes.toolbox=null),this.removeAllShortcuts(),(i=this.popover)==null||i.off(Vt.Close,this.onPopoverClose)}toolButtonActivated(i,t){this.insertNewBlock(i,t)}open(){var i;this.isEmpty||((i=this.popover)==null||i.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var i;(i=this.popover)==null||i.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}get toolsToBeDisplayed(){const i=[];return this.tools.forEach(t=>{t.toolbox&&i.push(t)}),i}get toolboxItemsToBeDisplayed(){const i=(t,e)=>({icon:t.icon,title:nt.t(ut.toolNames,t.title||Rt(e.name)),name:e.name,onActivate:()=>{this.toolButtonActivated(e.name,t.data)},secondaryLabel:e.shortcut?ie(e.shortcut):""});return this.toolsToBeDisplayed.reduce((t,e)=>(Array.isArray(e.toolbox)?e.toolbox.forEach(o=>{t.push(i(o,e))}):e.toolbox!==void 0&&t.push(i(e.toolbox,e)),t),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(i=>{const t=i.shortcut;t&&this.enableShortcutForTool(i.name,t)})}enableShortcutForTool(i,t){Nt.add({name:t,on:this.api.ui.nodes.redactor,handler:e=>{e.preventDefault();const o=this.api.blocks.getCurrentBlockIndex(),n=this.api.blocks.getBlockByIndex(o);if(n)try{this.api.blocks.convert(n.id,i),window.requestAnimationFrame(()=>{this.api.caret.setToBlock(o,"end")});return}catch{}this.insertNewBlock(i)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(i=>{const t=i.shortcut;t&&Nt.remove(this.api.ui.nodes.redactor,t)})}async insertNewBlock(i,t){const e=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(e);if(!o)return;const n=o.isEmpty?e:e+1;let s;if(t){const a=await this.api.blocks.composeBlockData(i);s=Object.assign(a,t)}const r=this.api.blocks.insert(i,s,void 0,n,void 0,o.isEmpty);r.call(gt.APPEND_CALLBACK),this.api.caret.setToBlock(n),this.emit("toolbox-block-added",{block:r}),this.api.toolbar.close()}};let Ae=qo;$o([Pt],Ae.prototype,"toolsToBeDisplayed",1);$o([Pt],Ae.prototype,"toolboxItemsToBeDisplayed",1);const Wo="block hovered";class ts extends H{constructor({config:t,eventsDispatcher:e}){super({config:t,eventsDispatcher:e}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var t;return{opened:(t=this.toolboxInstance)==null?void 0:t.opened,close:()=>{var e;(e=this.toolboxInstance)==null||e.close()},open:()=>{if(this.toolboxInstance===null){U("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){U("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var e;return(e=this.toolboxInstance)==null?void 0:e.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(t){t?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(t=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){U("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!t)return;this.hoveredBlock=t;const e=t.holder,{isMobile:o}=this.Editor.UI,n=t.pluginsContent,s=window.getComputedStyle(n),r=parseInt(s.paddingTop,10),a=e.offsetHeight;let l;o?l=e.offsetTop+a:l=e.offsetTop+r,this.nodes.wrapper.style.top=`${Math.floor(l)}px`,this.Editor.BlockManager.blocks.length===1&&t.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var t,e;this.Editor.ReadOnly.isEnabled||((t=this.nodes.wrapper)==null||t.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(e=this.toolboxInstance)==null||e.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(t=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),t?this.blockActions.show():this.blockActions.hide()}make(){this.nodes.wrapper=m.make("div",this.CSS.toolbar),["content","actions"].forEach(n=>{this.nodes[n]=m.make("div",this.CSS[n])}),m.append(this.nodes.wrapper,this.nodes.content),m.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=m.make("div",this.CSS.plusButton,{innerHTML:zi}),m.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{Ce(!0),this.plusButtonClicked()},!1);const t=m.make("div");t.appendChild(document.createTextNode(nt.ui(ut.ui.toolbar.toolbox,"Add"))),t.appendChild(m.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),Wt(this.nodes.plusButton,t,{hidingDelay:400}),this.nodes.settingsToggler=m.make("span",this.CSS.settingsToggler,{innerHTML:Hi}),m.append(this.nodes.actions,this.nodes.settingsToggler);const e=m.make("div"),o=m.text(nt.ui(ut.ui.blockTunes.toggler,"Click to tune"));e.appendChild(o),e.appendChild(m.make("div",this.CSS.plusButtonShortcut,{textContent:ie("CMD + /")})),Wt(this.nodes.settingsToggler,e,{hidingDelay:400}),m.append(this.nodes.actions,this.makeToolbox()),m.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),m.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new Ae({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:nt.ui(ut.ui.popover,"Filter"),nothingFound:nt.ui(ut.ui.popover,"Nothing found")}}),this.toolboxInstance.on(Gt.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(Gt.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(Gt.BlockAdded,({block:t})=>{const{BlockManager:e,Caret:o}=this.Editor,n=e.getBlockById(t.id);n.inputs.length===0&&(n===e.lastBlock?(e.insertAtEnd(),o.setToBlock(e.lastBlock)):o.setToBlock(e.nextBlock))}),this.toolboxInstance.make()}plusButtonClicked(){var t;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(t=this.toolboxInstance)==null||t.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",t=>{var e;t.stopPropagation(),this.settingsTogglerClicked(),(e=this.toolboxInstance)!=null&&e.opened&&this.toolboxInstance.close(),Ce(!0)},!0),St()||this.eventsDispatcher.on(Wo,t=>{var e;this.Editor.BlockSettings.opened||(e=this.toolboxInstance)!=null&&e.opened||this.moveAndOpen(t.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}}var re=(i=>(i[i.Block=0]="Block",i[i.Inline=1]="Inline",i[i.Tune=2]="Tune",i))(re||{}),te=(i=>(i.Shortcut="shortcut",i.Toolbox="toolbox",i.EnabledInlineTools="inlineToolbar",i.EnabledBlockTunes="tunes",i.Config="config",i))(te||{}),Vo=(i=>(i.Shortcut="shortcut",i.SanitizeConfig="sanitize",i))(Vo||{}),_t=(i=>(i.IsEnabledLineBreaks="enableLineBreaks",i.Toolbox="toolbox",i.ConversionConfig="conversionConfig",i.IsReadOnlySupported="isReadOnlySupported",i.PasteConfig="pasteConfig",i))(_t||{}),_e=(i=>(i.IsInline="isInline",i.Title="title",i))(_e||{}),Xo=(i=>(i.IsTune="isTune",i))(Xo||{});class Oe{constructor({name:t,constructable:e,config:o,api:n,isDefault:s,isInternal:r=!1,defaultPlaceholder:a}){this.api=n,this.name=t,this.constructable=e,this.config=o,this.isDefault=s,this.isInternal=r,this.defaultPlaceholder=a}get settings(){const t=this.config.config||{};return this.isDefault&&!("placeholder"in t)&&this.defaultPlaceholder&&(t.placeholder=this.defaultPlaceholder),t}reset(){if(W(this.constructable.reset))return this.constructable.reset()}prepare(){if(W(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const t=this.constructable.shortcut;return this.config.shortcut||t}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===1}isBlock(){return this.type===0}isTune(){return this.type===2}}class es extends H{constructor({config:t,eventsDispatcher:e}){super({config:t,eventsDispatcher:e}),this.CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerArrow:"ce-inline-toolbar__dropdown-arrow",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},this.opened=!1,this.toolbarVerticalMargin=St()?20:6,this.buttonsList=null,this.width=0,this.flipper=null}toggleReadOnly(t){t?(this.destroy(),this.Editor.ConversionToolbar.destroy()):window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}async tryToShow(t=!1,e=!0){t&&this.close(),this.allowedToShow()&&(await this.addToolsFiltered(e),this.move(),this.open(e),this.Editor.Toolbar.close())}close(){this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach(([t,e])=>{const o=this.getToolShortcut(t);o&&Nt.remove(this.Editor.UI.nodes.redactor,o),W(e.clear)&&e.clear()}),this.reset(),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}containsNode(t){return this.nodes.wrapper===void 0?!1:this.nodes.wrapper.contains(t)}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}make(){this.nodes.wrapper=m.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.togglerAndButtonsWrapper=m.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=m.make("div",this.CSS.buttonsWrapper),this.nodes.actions=m.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",t=>{t.target.closest(`.${this.CSS.actionsWrapper}`)||t.preventDefault()}),m.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),m.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),m.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),window.requestAnimationFrame(()=>{this.recalculateWidth()}),this.enableFlipper()}open(){if(this.opened)return;this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(`.${this.CSS.inlineToolButton}`),this.opened=!0;let t=Array.from(this.buttonsList);t.unshift(this.nodes.conversionToggler),t=t.filter(e=>!e.hidden),this.flipper.activate(t)}move(){const t=I.rect,e=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),o={x:t.x-e.x,y:t.y+t.height-e.top+this.toolbarVerticalMargin};o.x+this.width+e.x>this.Editor.UI.contentRect.right&&(o.x=this.Editor.UI.contentRect.right-this.width-e.x),this.nodes.wrapper.style.left=Math.floor(o.x)+"px",this.nodes.wrapper.style.top=Math.floor(o.y)+"px"}reset(){this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarLeftOriented,this.CSS.inlineToolbarRightOriented),this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const t=["IMG","INPUT"],e=I.get(),o=I.text;if(!e||!e.anchorNode||e.isCollapsed||o.length<1)return!1;const n=m.isElement(e.anchorNode)?e.anchorNode:e.anchorNode.parentElement;if(e&&t.includes(n.tagName)||n.closest('[contenteditable="true"]')===null)return!1;const s=this.Editor.BlockManager.getBlock(e.anchorNode);return s?s.tool.inlineTools.size!==0:!1}recalculateWidth(){this.width=this.nodes.wrapper.offsetWidth}addConversionToggler(){this.nodes.conversionToggler=m.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=m.make("div",this.CSS.conversionTogglerContent);const t=m.make("div",this.CSS.conversionTogglerArrow,{innerHTML:jo});this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(t),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",()=>{this.Editor.ConversionToolbar.toggle(e=>{!e&&this.opened?this.flipper.activate():this.opened&&this.flipper.deactivate()})}),St()===!1&&Wt(this.nodes.conversionToggler,nt.ui(ut.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}async setConversionTogglerContent(){const{BlockManager:t}=this.Editor,{currentBlock:e}=t,o=e.name,n=e.tool.conversionConfig,s=n&&n.export;this.nodes.conversionToggler.hidden=!s,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!s);const r=await e.getActiveToolboxEntry()||{};this.nodes.conversionTogglerContent.innerHTML=r.icon||r.title||Rt(o)}prepareConversionToolbar(){const t=this.Editor.ConversionToolbar.make();m.append(this.nodes.wrapper,t)}async addToolsFiltered(t=!0){const e=I.get(),o=this.Editor.BlockManager.getBlock(e.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,Array.from(o.tool.inlineTools.values()).forEach(n=>{this.addTool(n)}),t&&this.Editor.ConversionToolbar.hasTools()?await this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0,this.recalculateWidth()}addTool(t){const e=t.create(),o=e.render();if(!o){U("Render method must return an instance of Node","warn",t.name);return}if(o.dataset.tool=t.name,this.nodes.buttons.appendChild(o),this.toolsInstances.set(t.name,e),W(e.renderActions)){const a=e.renderActions();this.nodes.actions.appendChild(a)}this.listeners.on(o,"click",a=>{this.toolClicked(e),a.preventDefault()});const n=this.getToolShortcut(t.name);if(n)try{this.enableShortcuts(e,n)}catch{}const s=m.make("div"),r=nt.t(ut.toolNames,t.title||Rt(t.name));s.appendChild(m.text(r)),n&&s.appendChild(m.make("div",this.CSS.inlineToolbarShortcut,{textContent:ie(n)})),St()===!1&&Wt(o,s,{placement:"top",hidingDelay:100}),e.checkState(I.get())}getToolShortcut(t){const{Tools:e}=this.Editor,o=e.inlineTools.get(t),n=e.internal.inlineTools;return Array.from(n.keys()).includes(t)?this.inlineTools[t][Vo.Shortcut]:o.shortcut}enableShortcuts(t,e){Nt.add({name:e,handler:o=>{const{currentBlock:n}=this.Editor.BlockManager;n&&n.tool.enabledInlineTools&&(o.preventDefault(),this.toolClicked(t))},on:this.Editor.UI.nodes.redactor})}toolClicked(t){const e=I.range;t.surround(e),this.checkToolsState(),t.renderActions!==void 0&&this.flipper.deactivate()}checkToolsState(){this.toolsInstances.forEach(t=>{t.checkState(I.get())})}get inlineTools(){const t={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([e,o])=>{t[e]=o.create()}),t}enableFlipper(){this.flipper=new bt({focusedItemClass:this.CSS.focusedButton,allowedKeys:[R.ENTER,R.TAB]})}}class os extends H{keydown(t){switch(this.beforeKeydownProcessing(t),t.keyCode){case R.BACKSPACE:this.backspace(t);break;case R.DELETE:this.delete(t);break;case R.ENTER:this.enter(t);break;case R.DOWN:case R.RIGHT:this.arrowRightAndDown(t);break;case R.UP:case R.LEFT:this.arrowLeftAndUp(t);break;case R.TAB:this.tabPressed(t);break;case R.SLASH:t.ctrlKey||t.metaKey?this.commandSlashPressed():this.slashPressed();break}}beforeKeydownProcessing(t){this.needToolbarClosing(t)&&Mo(t.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||this.Editor.BlockSelection.clearSelection(t))}keyup(t){t.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(t){const e=this.Editor.BlockManager.getBlockByChildNode(t.target);e.dropTarget=!0}dragLeave(t){const e=this.Editor.BlockManager.getBlockByChildNode(t.target);e.dropTarget=!1}handleCommandC(t){const{BlockSelection:e}=this.Editor;e.anyBlockSelected&&e.copySelectedBlocks(t)}handleCommandX(t){const{BlockSelection:e,BlockManager:o,Caret:n}=this.Editor;e.anyBlockSelected&&e.copySelectedBlocks(t).then(()=>{const s=o.removeSelectedBlocks(),r=o.insertDefaultBlockAtIndex(s,!0);n.setToBlock(r,n.positions.START),e.clearSelection(t)})}tabPressed(t){const{InlineToolbar:e,ConversionToolbar:o,Caret:n}=this.Editor;o.opened||e.opened||(t.shiftKey?n.navigatePrevious(!0):n.navigateNext(!0))&&t.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(){this.Editor.BlockManager.currentBlock.isEmpty&&this.activateToolbox()}enter(t){const{BlockManager:e,UI:o}=this.Editor;if(e.currentBlock.tool.isLineBreaksEnabled||o.someToolbarOpened&&o.someFlipperButtonFocused||t.shiftKey)return;let n=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):this.Editor.Caret.isAtEnd?n=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):n=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(n),this.Editor.Toolbar.moveAndOpen(n),t.preventDefault()}backspace(t){const{BlockManager:e,Caret:o}=this.Editor,{currentBlock:n,previousBlock:s}=e;if(!(!I.isCollapsed||!o.isAtStart)){if(t.preventDefault(),this.Editor.Toolbar.close(),n.currentInput!==n.firstInput){o.navigatePrevious();return}if(s!==null){if(s.isEmpty){e.removeBlock(s);return}if(n.isEmpty){e.removeBlock(n);const r=e.currentBlock;o.setToBlock(r,o.positions.END);return}Ze(n,s)?this.mergeBlocks(s,n):o.setToBlock(s,o.positions.END)}}}delete(t){const{BlockManager:e,Caret:o}=this.Editor,{currentBlock:n,nextBlock:s}=e;if(!(!I.isCollapsed||!o.isAtEnd)){if(t.preventDefault(),this.Editor.Toolbar.close(),n.currentInput!==n.lastInput){o.navigateNext();return}if(s!==null){if(s.isEmpty){e.removeBlock(s);return}if(n.isEmpty){e.removeBlock(n),o.setToBlock(s,o.positions.START);return}Ze(n,s)?this.mergeBlocks(n,s):o.setToBlock(s,o.positions.START)}}}mergeBlocks(t,e){const{BlockManager:o,Caret:n,Toolbar:s}=this.Editor;n.createShadow(t.pluginsContent),o.mergeBlocks(t,e).then(()=>{window.requestAnimationFrame(()=>{n.restoreCaret(t.pluginsContent),t.pluginsContent.normalize(),s.close()})})}arrowRightAndDown(t){const e=bt.usedKeys.includes(t.keyCode)&&(!t.shiftKey||t.keyCode===R.TAB);if(this.Editor.UI.someToolbarOpened&&e)return;this.Editor.Toolbar.close();const o=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;if(t.shiftKey&&t.keyCode===R.DOWN&&o){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}if(t.keyCode===R.DOWN||t.keyCode===R.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious()){t.preventDefault();return}oe(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(t)}arrowLeftAndUp(t){if(this.Editor.UI.someToolbarOpened){if(bt.usedKeys.includes(t.keyCode)&&(!t.shiftKey||t.keyCode===R.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const e=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;if(t.shiftKey&&t.keyCode===R.UP&&e){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}if(t.keyCode===R.UP||t.keyCode===R.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext()){t.preventDefault();return}oe(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(t)}needToolbarClosing(t){const e=t.keyCode===R.ENTER&&this.Editor.Toolbar.toolbox.opened,o=t.keyCode===R.ENTER&&this.Editor.BlockSettings.opened,n=t.keyCode===R.ENTER&&this.Editor.InlineToolbar.opened,s=t.keyCode===R.ENTER&&this.Editor.ConversionToolbar.opened,r=t.keyCode===R.TAB;return!(t.shiftKey||r||e||o||n||s)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}class de{constructor(t){this.blocks=[],this.workingArea=t}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return Ao(this.workingArea.children)}static set(t,e,o){return isNaN(Number(e))?(Reflect.set(t,e,o),!0):(t.insert(+e,o),!0)}static get(t,e){return isNaN(Number(e))?Reflect.get(t,e):t.get(+e)}push(t){this.blocks.push(t),this.insertToDOM(t)}swap(t,e){const o=this.blocks[e];m.swap(this.blocks[t].holder,o.holder),this.blocks[e]=this.blocks[t],this.blocks[t]=o}move(t,e){const o=this.blocks.splice(e,1)[0],n=t-1,s=Math.max(0,n),r=this.blocks[s];t>0?this.insertToDOM(o,"afterend",r):this.insertToDOM(o,"beforebegin",r),this.blocks.splice(t,0,o);const a=this.composeBlockEvent("move",{fromIndex:e,toIndex:t});o.call(gt.MOVED,a)}insert(t,e,o=!1){if(!this.length){this.push(e);return}t>this.length&&(t=this.length),o&&(this.blocks[t].holder.remove(),this.blocks[t].call(gt.REMOVED));const n=o?1:0;if(this.blocks.splice(t,n,e),t>0){const s=this.blocks[t-1];this.insertToDOM(e,"afterend",s)}else{const s=this.blocks[t+1];s?this.insertToDOM(e,"beforebegin",s):this.insertToDOM(e)}}replace(t,e){if(this.blocks[t]===void 0)throw Error("Incorrect index");this.blocks[t].holder.replaceWith(e.holder),this.blocks[t]=e}insertMany(t,e){const o=new DocumentFragment;for(const n of t)o.appendChild(n.holder);if(this.length>0){if(e>0){const n=Math.min(e-1,this.length-1);this.blocks[n].holder.after(o)}else e===0&&this.workingArea.prepend(o);this.blocks.splice(e,0,...t)}else this.blocks.push(...t),this.workingArea.appendChild(o);t.forEach(n=>n.call(gt.RENDERED))}remove(t){isNaN(t)&&(t=this.length-1),this.blocks[t].holder.remove(),this.blocks[t].call(gt.REMOVED),this.blocks.splice(t,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(t=>t.call(gt.REMOVED)),this.blocks.length=0}insertAfter(t,e){const o=this.blocks.indexOf(t);this.insert(o+1,e)}get(t){return this.blocks[t]}indexOf(t){return this.blocks.indexOf(t)}insertToDOM(t,e,o){e?o.holder.insertAdjacentElement(e,t.holder):this.workingArea.appendChild(t.holder),t.call(gt.RENDERED)}composeBlockEvent(t,e){return new CustomEvent(t,{detail:e})}}const Ke="block-removed",Je="block-added",ns="block-moved",Ge="block-changed";class is{constructor(){this.completed=Promise.resolve()}add(t){return new Promise((e,o)=>{this.completed=this.completed.then(t).then(e).catch(o)})}}class ss extends H{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(t){this._currentBlockIndex=t}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(t){this.currentBlockIndex=this.getBlockIndex(t)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(t=>!!t.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(t=>!!t.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(t=>t.isEmpty)}prepare(){const t=new de(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(t,{set:de.set,get:de.get}),this.listeners.on(document,"copy",e=>this.Editor.BlockEvents.handleCommandC(e))}toggleReadOnly(t){t?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:t,data:e={},id:o=void 0,tunes:n={}}){const s=this.Editor.ReadOnly.isEnabled,r=this.Editor.Tools.blockTools.get(t),a=new K({id:o,data:e,tool:r,api:this.Editor.API,readOnly:s,tunesData:n},this.eventsDispatcher);return s||window.requestIdleCallback(()=>{this.bindBlockEvents(a)},{timeout:2e3}),a}insert({id:t=void 0,tool:e=this.config.defaultBlock,data:o={},index:n,needToFocus:s=!0,replace:r=!1,tunes:a={}}={}){let l=n;l===void 0&&(l=this.currentBlockIndex+(r?0:1));const c=this.composeBlock({id:t,tool:e,data:o,tunes:a});return r&&this.blockDidMutated(Ke,this.getBlockByIndex(l),{index:l}),this._blocks.insert(l,c,r),this.blockDidMutated(Je,c,{index:l}),s?this.currentBlockIndex=l:l<=this.currentBlockIndex&&this.currentBlockIndex++,c}insertMany(t,e=0){this._blocks.insertMany(t,e)}async update(t,e){const o=await t.data,n=this.composeBlock({id:t.id,tool:t.name,data:Object.assign({},o,e),tunes:t.tunes}),s=this.getBlockIndex(t);return this._blocks.replace(s,n),this.blockDidMutated(Ge,n,{index:s}),n}replace(t,e,o){const n=this.getBlockIndex(t);this.insert({tool:e,data:o,index:n,replace:!0})}paste(t,e,o=!1){const n=this.insert({tool:t,replace:o});try{window.requestIdleCallback(()=>{n.call(gt.ON_PASTE,e)})}catch(s){U(`${t}: onPaste callback call is failed`,"error",s)}return n}insertDefaultBlockAtIndex(t,e=!1){const o=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[t]=o,this.blockDidMutated(Je,o,{index:t}),e?this.currentBlockIndex=t:t<=this.currentBlockIndex&&this.currentBlockIndex++,o}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(t,e){const o=await e.data;lt(o)||await t.mergeWith(o),this.removeBlock(e),this.currentBlockIndex=this._blocks.indexOf(t)}removeBlock(t,e=!0){return new Promise(o=>{const n=this._blocks.indexOf(t);if(!this.validateIndex(n))throw new Error("Can't find a Block to remove");t.destroy(),this._blocks.remove(n),this.blockDidMutated(Ke,t,{index:n}),this.currentBlockIndex>=n&&this.currentBlockIndex--,this.blocks.length?n===0&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,e&&this.insert()),o()})}removeSelectedBlocks(){let t;for(let e=this.blocks.length-1;e>=0;e--)this.blocks[e].selected&&(this.removeBlock(this.blocks[e]),t=e);return t}removeAllBlocks(){for(let t=this.blocks.length-1;t>=0;t--)this._blocks.remove(t);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}split(){const t=this.Editor.Caret.extractFragmentFromCaretPosition(),e=m.make("div");e.appendChild(t);const o={text:m.isEmpty(e)?"":e.innerHTML};return this.insert({data:o})}getBlockByIndex(t){return t===-1&&(t=this._blocks.length-1),this._blocks[t]}getBlockIndex(t){return this._blocks.indexOf(t)}getBlockById(t){return this._blocks.array.find(e=>e.id===t)}getBlock(t){m.isElement(t)||(t=t.parentNode);const e=this._blocks.nodes,o=t.closest(`.${K.CSS.wrapper}`),n=e.indexOf(o);if(n>=0)return this._blocks[n]}setCurrentBlockByChildNode(t){m.isElement(t)||(t=t.parentNode);const e=t.closest(`.${K.CSS.wrapper}`);if(!e)return;const o=e.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(o!=null&&o.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(e),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(t){if(!t||!(t instanceof Node))return;m.isElement(t)||(t=t.parentNode);const e=t.closest(`.${K.CSS.wrapper}`);return this.blocks.find(o=>o.holder===e)}swap(t,e){this._blocks.swap(t,e),this.currentBlockIndex=e}move(t,e=this.currentBlockIndex){if(isNaN(t)||isNaN(e)){U("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(t)||!this.validateIndex(e)){U("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(t,e),this.currentBlockIndex=t,this.blockDidMutated(ns,this.currentBlock,{fromIndex:e,toIndex:t})}async convert(t,e,o){if(!await t.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const n=this.Editor.Tools.blockTools.get(e);if(!n)throw new Error(`Could not convert Block. Tool ¬´${e}¬ª not found.`);const s=await t.exportDataAsString(),r=mt(s,n.sanitizeConfig);let a=ii(r,n.conversionConfig);o&&(a=Object.assign(a,o)),this.replace(t,n.name,a)}dropPointer(){this.currentBlockIndex=-1}async clear(t=!1){const e=new is;this.blocks.forEach(o=>{e.add(async()=>{await this.removeBlock(o,!1)})}),await e.completed,this.dropPointer(),t&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(t=>t.destroy()))}bindBlockEvents(t){const{BlockEvents:e}=this.Editor;this.readOnlyMutableListeners.on(t.holder,"keydown",o=>{e.keydown(o)}),this.readOnlyMutableListeners.on(t.holder,"keyup",o=>{e.keyup(o)}),this.readOnlyMutableListeners.on(t.holder,"dragover",o=>{e.dragOver(o)}),this.readOnlyMutableListeners.on(t.holder,"dragleave",o=>{e.dragLeave(o)}),t.on("didMutated",o=>this.blockDidMutated(Ge,o,{index:this.getBlockIndex(o)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",t=>this.Editor.BlockEvents.handleCommandX(t)),this.blocks.forEach(t=>{this.bindBlockEvents(t)})}validateIndex(t){return!(t<0||t>=this._blocks.length)}blockDidMutated(t,e,o){const n=new CustomEvent(t,{detail:{target:new Et(e),...o}});return this.eventsDispatcher.emit(Do,{event:n}),e}}class rs extends H{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:t}=this.Editor;return t.blocks.every(e=>e.selected===!0)}set allBlocksSelected(t){const{BlockManager:e}=this.Editor;e.blocks.forEach(o=>{o.selected=t}),this.clearCache()}get anyBlockSelected(){const{BlockManager:t}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=t.blocks.some(e=>e.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(t=>t.selected)}prepare(){this.selection=new I,Nt.add({name:"CMD+A",handler:t=>{const{BlockManager:e,ReadOnly:o}=this.Editor;if(o.isEnabled){t.preventDefault(),this.selectAllBlocks();return}e.currentBlock&&this.handleCommandA(t)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){I.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(t){const{BlockManager:e}=this.Editor;let o;isNaN(t)?o=e.currentBlock:o=e.getBlockByIndex(t),o.selected=!1,this.clearCache()}clearSelection(t,e=!1){const{BlockManager:o,Caret:n,RectangleSelection:s}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const r=t&&t instanceof KeyboardEvent,a=r&&Mo(t.keyCode);if(this.anyBlockSelected&&r&&a&&!I.isSelectionExists){const l=o.removeSelectedBlocks();o.insertDefaultBlockAtIndex(l,!0),n.setToBlock(o.currentBlock),oe(()=>{const c=t.key;n.insertContentAtCaretPosition(c.length>1?"":c)},20)()}if(this.Editor.CrossBlockSelection.clear(t),!this.anyBlockSelected||s.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}e&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(t){t.preventDefault();const e=m.make("div");this.selectedBlocks.forEach(s=>{const r=mt(s.holder.innerHTML,this.sanitizerConfig),a=m.make("p");a.innerHTML=r,e.appendChild(a)});const o=Array.from(e.childNodes).map(s=>s.textContent).join(`

`),n=e.innerHTML;return t.clipboardData.setData("text/plain",o),t.clipboardData.setData("text/html",n),Promise.all(this.selectedBlocks.map(s=>s.save())).then(s=>{try{t.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(s))}catch{}})}selectBlockByIndex(t){const{BlockManager:e}=this.Editor,o=e.getBlockByIndex(t);o!==void 0&&this.selectBlock(o)}selectBlock(t){this.selection.save(),I.get().removeAllRanges(),t.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(t){t.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){Nt.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(t){if(this.Editor.RectangleSelection.clearSelection(),m.isNativeInput(t.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const e=this.Editor.BlockManager.getBlock(t.target),o=e.inputs;if(o.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(o.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(t.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(t.preventDefault(),this.selectBlock(e),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),I.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}class ne extends H{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}get isAtStart(){const{currentBlock:t}=this.Editor.BlockManager;if(!t.focusable)return!0;const e=I.get(),o=m.getDeepestNode(t.currentInput);let n=e.focusNode;if(m.isNativeInput(o))return o.selectionEnd===0;if(!e.anchorNode)return!1;let s=n.textContent.search(/\S/);s===-1&&(s=0);let r=e.focusOffset;return n.nodeType!==Node.TEXT_NODE&&n.childNodes.length&&(n.childNodes[r]?(n=n.childNodes[r],r=0):(n=n.childNodes[r-1],r=n.textContent.length)),(m.isLineBreakTag(o)||m.isEmpty(o))&&this.getHigherLevelSiblings(n,"left").every(a=>{const l=m.isLineBreakTag(a),c=a.children.length===1&&m.isLineBreakTag(a.children[0]),d=l||c;return m.isEmpty(a)&&!d})&&r===s?!0:o===null||n===o&&r<=s}get isAtEnd(){const{currentBlock:t}=this.Editor.BlockManager;if(!t.focusable)return!0;const e=I.get();let o=e.focusNode;const n=m.getDeepestNode(t.currentInput,!0);if(m.isNativeInput(n))return n.selectionEnd===n.value.length;if(!e.focusNode)return!1;let s=e.focusOffset;if(o.nodeType!==Node.TEXT_NODE&&o.childNodes.length&&(o.childNodes[s-1]?(o=o.childNodes[s-1],s=o.textContent.length):(o=o.childNodes[0],s=0)),m.isLineBreakTag(n)||m.isEmpty(n)){const a=this.getHigherLevelSiblings(o,"right");if(a.every((l,c)=>c===a.length-1&&m.isLineBreakTag(l)||m.isEmpty(l)&&!m.isLineBreakTag(l))&&s===o.textContent.length)return!0}const r=n.textContent.replace(/\s+$/,"");return o===n&&s>=r.length}setToBlock(t,e=this.positions.DEFAULT,o=0){var n;const{BlockManager:s,BlockSelection:r}=this.Editor;if(r.clearSelection(),!t.focusable){(n=window.getSelection())==null||n.removeAllRanges(),r.selectBlock(t),s.currentBlock=t;return}let a;switch(e){case this.positions.START:a=t.firstInput;break;case this.positions.END:a=t.lastInput;break;default:a=t.currentInput}if(!a)return;const l=m.getDeepestNode(a,e===this.positions.END),c=m.getContentLength(l);switch(!0){case e===this.positions.START:o=0;break;case e===this.positions.END:case o>c:o=c;break}this.set(l,o),s.setCurrentBlockByChildNode(t.holder),s.currentBlock.currentInput=a}setToInput(t,e=this.positions.DEFAULT,o=0){const{currentBlock:n}=this.Editor.BlockManager,s=m.getDeepestNode(t);switch(e){case this.positions.START:this.set(s,0);break;case this.positions.END:this.set(s,m.getContentLength(s));break;default:o&&this.set(s,o)}n.currentInput=t}set(t,e=0){const{top:o,bottom:n}=I.setCursor(t,e),{innerHeight:s}=window;o<0?window.scrollBy(0,o-30):n>s&&window.scrollBy(0,n-s+30)}setToTheLastBlock(){const t=this.Editor.BlockManager.lastBlock;if(t)if(t.tool.isDefault&&t.isEmpty)this.setToBlock(t);else{const e=this.Editor.BlockManager.insertAtEnd();this.setToBlock(e)}}extractFragmentFromCaretPosition(){const t=I.get();if(t.rangeCount){const e=t.getRangeAt(0),o=this.Editor.BlockManager.currentBlock.currentInput;if(e.deleteContents(),o)if(m.isNativeInput(o)){const n=o,s=document.createDocumentFragment(),r=n.value.substring(0,n.selectionStart),a=n.value.substring(n.selectionStart);return s.textContent=a,n.value=r,s}else{const n=e.cloneRange();return n.selectNodeContents(o),n.setStart(e.endContainer,e.endOffset),n.extractContents()}}}navigateNext(t=!1){const{BlockManager:e}=this.Editor,{currentBlock:o,nextBlock:n}=e,{nextInput:s}=o,r=this.isAtEnd;let a=n;const l=t||r;if(s&&l)return this.setToInput(s,this.positions.START),!0;if(a===null){if(o.tool.isDefault||!l)return!1;a=e.insertAtEnd()}return l?(this.setToBlock(a,this.positions.START),!0):!1}navigatePrevious(t=!1){const{currentBlock:e,previousBlock:o}=this.Editor.BlockManager;if(!e)return!1;const{previousInput:n}=e,s=t||this.isAtStart;return n&&s?(this.setToInput(n,this.positions.END),!0):o!==null&&s?(this.setToBlock(o,this.positions.END),!0):!1}createShadow(t){const e=document.createElement("span");e.classList.add(ne.CSS.shadowCaret),t.insertAdjacentElement("beforeend",e)}restoreCaret(t){const e=t.querySelector(`.${ne.CSS.shadowCaret}`);if(!e)return;new I().expandToTag(e);const o=document.createRange();o.selectNode(e),o.extractContents()}insertContentAtCaretPosition(t){const e=document.createDocumentFragment(),o=document.createElement("div"),n=I.get(),s=I.range;o.innerHTML=t,Array.from(o.childNodes).forEach(c=>e.appendChild(c)),e.childNodes.length===0&&e.appendChild(new Text);const r=e.lastChild;s.deleteContents(),s.insertNode(e);const a=document.createRange(),l=r.nodeType===Node.TEXT_NODE?r:r.firstChild;l!==null&&l.textContent!==null&&a.setStart(l,l.textContent.length),n.removeAllRanges(),n.addRange(a)}getHigherLevelSiblings(t,e){let o=t;const n=[];for(;o.parentNode&&o.parentNode.contentEditable!=="true";)o=o.parentNode;const s=e==="left"?"previousSibling":"nextSibling";for(;o[s];)o=o[s],n.push(o);return n}}class as extends H{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=t=>{const{BlockManager:e,BlockSelection:o}=this.Editor;if(t.relatedTarget===null&&t.target===null)return;const n=e.getBlockByChildNode(t.relatedTarget)||this.lastSelectedBlock,s=e.getBlockByChildNode(t.target);if(!(!n||!s)&&s!==n){if(n===this.firstSelectedBlock){I.get().removeAllRanges(),n.selected=!0,s.selected=!0,o.clearCache();return}if(s===this.firstSelectedBlock){n.selected=!1,s.selected=!1,o.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(n,s),this.lastSelectedBlock=s}}}async prepare(){this.listeners.on(document,"mousedown",t=>{this.enableCrossBlockSelection(t)})}watchSelection(t){if(t.button!==zn.LEFT)return;const{BlockManager:e}=this.Editor;this.firstSelectedBlock=e.getBlock(t.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}toggleBlockSelectedState(t=!0){const{BlockManager:e,BlockSelection:o}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=e.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,o.clearCache(),I.get().removeAllRanges());const n=e.blocks.indexOf(this.lastSelectedBlock)+(t?1:-1),s=e.blocks[n];s&&(this.lastSelectedBlock.selected!==s.selected?(s.selected=!0,o.clearCache()):(this.lastSelectedBlock.selected=!1,o.clearCache()),this.lastSelectedBlock=s,this.Editor.InlineToolbar.close(),s.holder.scrollIntoView({block:"nearest"}))}clear(t){const{BlockManager:e,BlockSelection:o,Caret:n}=this.Editor,s=e.blocks.indexOf(this.firstSelectedBlock),r=e.blocks.indexOf(this.lastSelectedBlock);if(o.anyBlockSelected&&s>-1&&r>-1&&t&&t instanceof KeyboardEvent)switch(t.keyCode){case R.DOWN:case R.RIGHT:n.setToBlock(e.blocks[Math.max(s,r)],n.positions.END);break;case R.UP:case R.LEFT:n.setToBlock(e.blocks[Math.min(s,r)],n.positions.START);break;default:n.setToBlock(e.blocks[Math.max(s,r)],n.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(t){const{UI:e}=this.Editor;I.isCollapsed||this.Editor.BlockSelection.clearSelection(t),e.nodes.redactor.contains(t.target)?this.watchSelection(t):this.Editor.BlockSelection.clearSelection(t)}toggleBlocksSelectedState(t,e){const{BlockManager:o,BlockSelection:n}=this.Editor,s=o.blocks.indexOf(t),r=o.blocks.indexOf(e),a=t.selected!==e.selected;for(let l=Math.min(s,r);l<=Math.max(s,r);l++){const c=o.blocks[l];c!==this.firstSelectedBlock&&c!==(a?t:e)&&(o.blocks[l].selected=!o.blocks[l].selected,n.clearCache())}}}class ls extends H{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(t){t?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:t}=this.Editor;this.readOnlyMutableListeners.on(t.nodes.holder,"drop",async e=>{await this.processDrop(e)},!0),this.readOnlyMutableListeners.on(t.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(t.nodes.holder,"dragover",e=>{this.processDragOver(e)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(t){const{BlockManager:e,Caret:o,Paste:n}=this.Editor;t.preventDefault(),e.blocks.forEach(r=>{r.dropTarget=!1}),I.isAtEditor&&!I.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const s=e.setCurrentBlockByChildNode(t.target);if(s)this.Editor.Caret.setToBlock(s,o.positions.END);else{const r=e.setCurrentBlockByChildNode(e.lastBlock.holder);this.Editor.Caret.setToBlock(r,o.positions.END)}await n.processDataTransfer(t.dataTransfer,!0)}processDragStart(){I.isAtEditor&&!I.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(t){t.preventDefault()}}class cs extends H{constructor({config:t,eventsDispatcher:e}){super({config:t,eventsDispatcher:e}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=400,this.mutationObserver=new MutationObserver(o=>{this.redactorChanged(o)}),this.eventsDispatcher.on(Do,o=>{this.particularBlockChanged(o.event)}),this.eventsDispatcher.on(Po,()=>{this.disable()}),this.eventsDispatcher.on(Fo,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(t){this.disabled||!W(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${t.detail.target.id}:event:${t.type}`,t),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let e;this.batchingOnChangeQueue.size===1?e=this.batchingOnChangeQueue.values().next().value:e=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,e),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(t){this.eventsDispatcher.emit(ke,{mutations:t})}}const Yo=class extends H{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=i=>{try{const t=i.create({},{},!1);if(i.pasteConfig===!1){this.exceptionList.push(i.name);return}if(!W(t.onPaste))return;this.getTagsConfig(i),this.getFilesConfig(i),this.getPatternsConfig(i)}catch(t){U(`Paste handling for ¬´${i.name}¬ª Tool hasn't been set up because of the error`,"warn",t)}},this.handlePasteEvent=async i=>{const{BlockManager:t,Toolbar:e}=this.Editor,o=t.setCurrentBlockByChildNode(i.target);!o||this.isNativeBehaviour(i.target)&&!i.clipboardData.types.includes("Files")||o&&this.exceptionList.includes(o.name)||(i.preventDefault(),this.processDataTransfer(i.clipboardData),e.close())}}async prepare(){this.processTools()}toggleReadOnly(i){i?this.unsetCallback():this.setCallback()}async processDataTransfer(i,t=!1){const{Tools:e}=this.Editor,o=i.types;if((o.includes?o.includes("Files"):o.contains("Files"))&&!lt(this.toolsFiles)){await this.processFiles(i.files);return}const n=i.getData(this.MIME_TYPE),s=i.getData("text/plain");let r=i.getData("text/html");if(n)try{this.insertEditorJSData(JSON.parse(n));return}catch{}t&&s.trim()&&r.trim()&&(r="<p>"+(r.trim()?r:s)+"</p>");const a=Object.keys(this.toolsTags).reduce((d,h)=>(d[h.toLowerCase()]=this.toolsTags[h].sanitizationConfig??{},d),{}),l=Object.assign({},a,e.getAllInlineToolsSanitizeConfig(),{br:{}}),c=mt(r,l);!c.trim()||c.trim()===s||!m.isHTMLString(c)?await this.processText(s):await this.processText(c,!0)}async processText(i,t=!1){const{Caret:e,BlockManager:o}=this.Editor,n=t?this.processHTML(i):this.processPlain(i);if(!n.length)return;if(n.length===1){n[0].isBlock?this.processSingleBlock(n.pop()):this.processInlinePaste(n.pop());return}const s=o.currentBlock&&o.currentBlock.tool.isDefault&&o.currentBlock.isEmpty;n.map(async(r,a)=>this.insertBlock(r,a===0&&s)),o.currentBlock&&e.setToBlock(o.currentBlock,e.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const i=this.Editor.Tools.blockTools;Array.from(i.values()).forEach(this.processTool)}collectTagNames(i){return xt(i)?[i]:J(i)?Object.keys(i):[]}getTagsConfig(i){if(i.pasteConfig===!1)return;const t=i.pasteConfig.tags||[],e=[];t.forEach(o=>{const n=this.collectTagNames(o);e.push(...n),n.forEach(s=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,s)){U(`Paste handler for ¬´${i.name}¬ª Tool on ¬´${s}¬ª tag is skipped because it is already used by ¬´${this.toolsTags[s].tool.name}¬ª Tool.`,"warn");return}const r=J(o)?o[s]:null;this.toolsTags[s.toUpperCase()]={tool:i,sanitizationConfig:r}})}),this.tagsByTool[i.name]=e.map(o=>o.toUpperCase())}getFilesConfig(i){if(i.pasteConfig===!1)return;const{files:t={}}=i.pasteConfig;let{extensions:e,mimeTypes:o}=t;!e&&!o||(e&&!Array.isArray(e)&&(U(`¬´extensions¬ª property of the onDrop config for ¬´${i.name}¬ª Tool should be an array`),e=[]),o&&!Array.isArray(o)&&(U(`¬´mimeTypes¬ª property of the onDrop config for ¬´${i.name}¬ª Tool should be an array`),o=[]),o&&(o=o.filter(n=>Wn(n)?!0:(U(`MIME type value ¬´${n}¬ª for the ¬´${i.name}¬ª Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[i.name]={extensions:e||[],mimeTypes:o||[]})}getPatternsConfig(i){i.pasteConfig===!1||!i.pasteConfig.patterns||lt(i.pasteConfig.patterns)||Object.entries(i.pasteConfig.patterns).forEach(([t,e])=>{e instanceof RegExp||U(`Pattern ${e} for ¬´${i.name}¬ª Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:t,pattern:e,tool:i})})}isNativeBehaviour(i){return m.isNativeInput(i)}async processFiles(i){const{BlockManager:t}=this.Editor;let e;e=await Promise.all(Array.from(i).map(n=>this.processFile(n))),e=e.filter(n=>!!n);const o=t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty;e.forEach((n,s)=>{t.paste(n.type,n.event,s===0&&o)})}async processFile(i){const t=qn(i),e=Object.entries(this.toolsFiles).find(([n,{mimeTypes:s,extensions:r}])=>{const[a,l]=i.type.split("/"),c=r.find(h=>h.toLowerCase()===t.toLowerCase()),d=s.find(h=>{const[p,g]=h.split("/");return p===a&&(g===l||g==="*")});return!!c||!!d});if(!e)return;const[o]=e;return{event:this.composePasteEvent("file",{file:i}),type:o}}processHTML(i){const{Tools:t}=this.Editor,e=m.make("DIV");return e.innerHTML=i,this.getNodes(e).map(o=>{let n,s=t.defaultTool,r=!1;switch(o.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:n=m.make("div"),n.appendChild(o);break;case Node.ELEMENT_NODE:n=o,r=!0,this.toolsTags[n.tagName]&&(s=this.toolsTags[n.tagName].tool);break}const{tags:a}=s.pasteConfig||{tags:[]},l=a.reduce((h,p)=>(this.collectTagNames(p).forEach(g=>{const f=J(p)?p[g]:null;h[g.toLowerCase()]=f||{}}),h),{}),c=Object.assign({},l,s.baseSanitizeConfig);if(n.tagName.toLowerCase()==="table"){const h=mt(n.outerHTML,c);n=m.make("div",void 0,{innerHTML:h}).firstChild}else n.innerHTML=mt(n.innerHTML,c);const d=this.composePasteEvent("tag",{data:n});return{content:n,isBlock:r,tool:s.name,event:d}}).filter(o=>{const n=m.isEmpty(o.content),s=m.isSingleTag(o.content);return!n||s})}processPlain(i){const{defaultBlock:t}=this.config;if(!i)return[];const e=t;return i.split(/\r?\n/).filter(o=>o.trim()).map(o=>{const n=m.make("div");n.textContent=o;const s=this.composePasteEvent("tag",{data:n});return{content:n,tool:e,isBlock:!1,event:s}})}async processSingleBlock(i){const{Caret:t,BlockManager:e}=this.Editor,{currentBlock:o}=e;if(!o||i.tool!==o.name||!m.containsOnlyInlineElements(i.content.innerHTML)){this.insertBlock(i,(o==null?void 0:o.tool.isDefault)&&o.isEmpty);return}t.insertContentAtCaretPosition(i.content.innerHTML)}async processInlinePaste(i){const{BlockManager:t,Caret:e}=this.Editor,{content:o}=i;if(t.currentBlock&&t.currentBlock.tool.isDefault&&o.textContent.length<Yo.PATTERN_PROCESSING_MAX_LENGTH){const n=await this.processPattern(o.textContent);if(n){const s=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty,r=t.paste(n.tool,n.event,s);e.setToBlock(r,e.positions.END);return}}if(t.currentBlock&&t.currentBlock.currentInput){const n=t.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,mt(o.innerHTML,n))}else this.insertBlock(i)}async processPattern(i){const t=this.toolsPatterns.find(e=>{const o=e.pattern.exec(i);return o?i===o.shift():!1});return t?{event:this.composePasteEvent("pattern",{key:t.key,data:i}),tool:t.tool.name}:void 0}insertBlock(i,t=!1){const{BlockManager:e,Caret:o}=this.Editor,{currentBlock:n}=e;let s;if(t&&n&&n.isEmpty){s=e.paste(i.tool,i.event,!0),o.setToBlock(s,o.positions.END);return}s=e.paste(i.tool,i.event),o.setToBlock(s,o.positions.END)}insertEditorJSData(i){const{BlockManager:t,Caret:e,Tools:o}=this.Editor;Ho(i,n=>o.blockTools.get(n).sanitizeConfig).forEach(({tool:n,data:s},r)=>{let a=!1;r===0&&(a=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty);const l=t.insert({tool:n,data:s,replace:a});e.setToBlock(l,e.positions.END)})}processElementNode(i,t,e){const o=Object.keys(this.toolsTags),n=i,{tool:s}=this.toolsTags[n.tagName]||{},r=this.tagsByTool[s==null?void 0:s.name]||[],a=o.includes(n.tagName),l=m.blockElements.includes(n.tagName.toLowerCase()),c=Array.from(n.children).some(({tagName:h})=>o.includes(h)&&!r.includes(h)),d=Array.from(n.children).some(({tagName:h})=>m.blockElements.includes(h.toLowerCase()));if(!l&&!a&&!c)return e.appendChild(n),[...t,e];if(a&&!c||l&&!d&&!c)return[...t,e,n]}getNodes(i){const t=Array.from(i.childNodes);let e;const o=(n,s)=>{if(m.isEmpty(s)&&!m.isSingleTag(s))return n;const r=n[n.length-1];let a=new DocumentFragment;switch(r&&m.isFragment(r)&&(a=n.pop()),s.nodeType){case Node.ELEMENT_NODE:if(e=this.processElementNode(s,n,a),e)return e;break;case Node.TEXT_NODE:return a.appendChild(s),[...n,a];default:return[...n,a]}return[...n,...Array.from(s.childNodes).reduce(o,[])]};return t.reduce(o,[])}composePasteEvent(i,t){return new CustomEvent(i,{detail:t})}};let Zo=Yo;Zo.PATTERN_PROCESSING_MAX_LENGTH=450;class ds extends H{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:t}=this.Editor,{blockTools:e}=t,o=[];Array.from(e.entries()).forEach(([n,s])=>{s.isReadOnlySupported||o.push(n)}),this.toolsDontSupportReadOnly=o,this.config.readOnly&&o.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly)}async toggle(t=!this.readOnlyEnabled){t&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const e=this.readOnlyEnabled;this.readOnlyEnabled=t;for(const n in this.Editor)this.Editor[n].toggleReadOnly&&this.Editor[n].toggleReadOnly(t);if(e===t)return this.readOnlyEnabled;const o=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(o.blocks),this.readOnlyEnabled}throwCriticalError(){throw new Ro(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}}class Ut extends H{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(t,e){const o=document.elementFromPoint(t-window.pageXOffset,e-window.pageYOffset);o.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const n=[`.${K.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],s=o.closest("."+this.Editor.UI.CSS.editorWrapper),r=n.some(a=>!!o.closest(a));!s||r||(this.mousedown=!0,this.startX=t,this.startY=e)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:t}=this.genHTML();this.listeners.on(t,"mousedown",e=>{this.processMouseDown(e)},!1),this.listeners.on(document.body,"mousemove",me(e=>{this.processMouseMove(e)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",me(e=>{this.processScroll(e)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(t){t.button===this.MAIN_MOUSE_BUTTON&&(t.target.closest(m.allInputsSelector)!==null||this.startSelection(t.pageX,t.pageY))}processMouseMove(t){this.changingRectangle(t),this.scrollByZones(t.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(t){this.changingRectangle(t)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(t){if(this.inScrollZone=null,t<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-t<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:t}=this.Editor,e=t.nodes.holder.querySelector("."+t.CSS.editorWrapper),o=m.make("div",Ut.CSS.overlay,{}),n=m.make("div",Ut.CSS.overlayContainer,{}),s=m.make("div",Ut.CSS.rect,{});return n.appendChild(s),o.appendChild(n),e.appendChild(o),this.overlayRectangle=s,{container:e,overlay:o}}scrollVertical(t){if(!(this.inScrollZone&&this.mousedown))return;const e=window.pageYOffset;window.scrollBy(0,t),this.mouseY+=window.pageYOffset-e,setTimeout(()=>{this.scrollVertical(t)},0)}changingRectangle(t){if(!this.mousedown)return;t.pageY!==void 0&&(this.mouseX=t.pageX,this.mouseY=t.pageY);const{rightPos:e,leftPos:o,index:n}=this.genInfoForMouseSelection(),s=this.startX>e&&this.mouseX>e,r=this.startX<o&&this.mouseX<o;this.rectCrossesBlocks=!(s||r),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),n!==void 0&&(this.trySelectNextBlock(n),this.inverseSelection(),I.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const t=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!t)for(const e of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(e);if(!this.rectCrossesBlocks&&t)for(const e of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(e)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const t=document.body.offsetWidth/2,e=this.mouseY-window.pageYOffset,o=document.elementFromPoint(t,e),n=this.Editor.BlockManager.getBlockByChildNode(o);let s;n!==void 0&&(s=this.Editor.BlockManager.blocks.findIndex(d=>d.holder===n.holder));const r=this.Editor.BlockManager.lastBlock.holder.querySelector("."+K.CSS.content),a=Number.parseInt(window.getComputedStyle(r).width,10)/2,l=t-a,c=t+a;return{index:s,leftPos:l,rightPos:c}}addBlockInSelection(t){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(t),this.stackOfSelected.push(t)}trySelectNextBlock(t){const e=this.stackOfSelected[this.stackOfSelected.length-1]===t,o=this.stackOfSelected.length,n=1,s=-1,r=0;if(e)return;const a=this.stackOfSelected[o-1]-this.stackOfSelected[o-2]>0;let l=r;o>1&&(l=a?n:s);const c=t>this.stackOfSelected[o-1]&&l===n,d=t<this.stackOfSelected[o-1]&&l===s,h=!(c||d||l===r);if(!h&&(t>this.stackOfSelected[o-1]||this.stackOfSelected[o-1]===void 0)){let f=this.stackOfSelected[o-1]+1||t;for(f;f<=t;f++)this.addBlockInSelection(f);return}if(!h&&t<this.stackOfSelected[o-1]){for(let f=this.stackOfSelected[o-1]-1;f>=t;f--)this.addBlockInSelection(f);return}if(!h)return;let p=o-1,g;for(t>this.stackOfSelected[o-1]?g=()=>t>this.stackOfSelected[p]:g=()=>t<this.stackOfSelected[p];g();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[p]),this.stackOfSelected.pop(),p--}}class hs extends H{async render(t){return new Promise(e=>{const{Tools:o,BlockManager:n}=this.Editor;if(t.length===0)n.insert();else{const s=t.map(({type:r,data:a,tunes:l,id:c})=>{o.available.has(r)===!1&&(ht(`Tool ¬´${r}¬ª is not found. Check 'tools' property at the Editor.js config.`,"warn"),a=this.composeStubDataForTool(r,a,c),r=o.stubTool);let d;try{d=n.composeBlock({id:c,tool:r,data:a,tunes:l})}catch(h){U(`Block ¬´${r}¬ª skipped because of plugins error`,"error",{data:a,error:h}),a=this.composeStubDataForTool(r,a,c),r=o.stubTool,d=n.composeBlock({id:c,tool:r,data:a,tunes:l})}return d});n.insertMany(s)}window.requestIdleCallback(()=>{e()},{timeout:2e3})})}composeStubDataForTool(t,e,o){const{Tools:n}=this.Editor;let s=t;if(n.unavailable.has(t)){const r=n.unavailable.get(t).toolbox;r!==void 0&&r[0].title!==void 0&&(s=r[0].title)}return{savedData:{id:o,type:t,data:e},title:s}}}class us extends H{async save(){const{BlockManager:t,Tools:e}=this.Editor,o=t.blocks,n=[];try{o.forEach(a=>{n.push(this.getSavedData(a))});const s=await Promise.all(n),r=await Ho(s,a=>e.blockTools.get(a).sanitizeConfig);return this.makeOutput(r)}catch(s){ht("Saving failed due to the Error %o","error",s)}}async getSavedData(t){const e=await t.save(),o=e&&await t.validate(e.data);return{...e,isValid:o}}makeOutput(t){const e=[];return t.forEach(({id:o,tool:n,data:s,tunes:r,isValid:a})=>{if(!a){U(`Block ¬´${n}¬ª skipped because saved data is invalid`);return}if(n===this.Editor.Tools.stubTool){e.push(s);return}const l={id:o,type:n,data:s,...!lt(r)&&{tunes:r}};e.push(l)}),{time:+new Date,blocks:e,version:"2.29.0"}}}(function(){try{if(typeof document<"u"){var i=document.createElement("style");i.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-paragraph[data-placeholder]:empty:before{content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before{opacity:1}.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before,.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus:before{opacity:0}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(i)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const ps='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class Re{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:t,config:e,api:o,readOnly:n}){this.api=o,this.readOnly=n,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=e.placeholder?e.placeholder:Re.DEFAULT_PLACEHOLDER,this._data={},this._element=null,this._preserveBlank=e.preserveBlank!==void 0?e.preserveBlank:!1,this.data=t}onKeyUp(t){if(t.code!=="Backspace"&&t.code!=="Delete")return;const{textContent:e}=this._element;e===""&&(this._element.innerHTML="")}drawView(){const t=document.createElement("DIV");return t.classList.add(this._CSS.wrapper,this._CSS.block),t.contentEditable=!1,t.dataset.placeholder=this.api.i18n.t(this._placeholder),this._data.text&&(t.innerHTML=this._data.text),this.readOnly||(t.contentEditable=!0,t.addEventListener("keyup",this.onKeyUp)),t}render(){return this._element=this.drawView(),this._element}merge(t){const e={text:this.data.text+t.text};this.data=e}validate(t){return!(t.text.trim()===""&&!this._preserveBlank)}save(t){return{text:t.innerHTML}}onPaste(t){const e={text:t.detail.data.innerHTML};this.data=e}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}get data(){if(this._element!==null){const t=this._element.innerHTML;this._data.text=t}return this._data}set data(t){this._data=t||{},this._element!==null&&this.hydrate()}hydrate(){window.requestAnimationFrame(()=>{this._element.innerHTML=this._data.text||""})}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:ps,title:"Text"}}}class Ne{constructor(){this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}static get sanitize(){return{b:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Ri,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const t=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,t),t}get shortcut(){return"CMD+B"}}Ne.isInline=!0;Ne.title="Bold";class De{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Fi,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const t=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,t),t}get shortcut(){return"CMD+I"}}De.isInline=!0;De.title="Italic";class Pe{constructor({api:t}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=t.toolbar,this.inlineToolbar=t.inlineToolbar,this.notifier=t.notifier,this.i18n=t.i18n,this.selection=new I}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Qe,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",t=>{t.keyCode===this.ENTER_KEY&&this.enterPressed(t)}),this.nodes.input}surround(t){if(t){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const e=this.selection.findParentTag("A");if(e){this.selection.expandToTag(e),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const t=this.selection.findParentTag("A");if(t){this.nodes.button.innerHTML=Ui,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const e=t.getAttribute("href");this.nodes.input.value=e!=="null"?e:"",this.selection.save()}else this.nodes.button.innerHTML=Qe,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!t}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(t=!1){this.nodes.input.classList.add(this.CSS.inputShowed),t&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(t=!0){if(this.selection.isFakeBackgroundEnabled){const e=new I;e.save(),this.selection.restore(),this.selection.removeFakeBackground(),e.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",t&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(t){let e=this.nodes.input.value||"";if(!e.trim()){this.selection.restore(),this.unlink(),t.preventDefault(),this.closeActions();return}if(!this.validateURL(e)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),U("Incorrect Link pasted","warn",e);return}e=this.prepareLink(e),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(e),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(t){return!/\s/.test(t)}prepareLink(t){return t=t.trim(),t=this.addProtocol(t),t}addProtocol(t){if(/^(\w+):(\/\/)?/.test(t))return t;const e=/^\/[^/\s]/.test(t),o=t.substring(0,1)==="#",n=/^\/\/[^/\s]/.test(t);return!e&&!o&&!n&&(t="http://"+t),t}insertLink(t){const e=this.selection.findParentTag("A");e&&this.selection.expandToTag(e),document.execCommand(this.commandLink,!1,t)}unlink(){document.execCommand(this.commandUnlink)}}Pe.isInline=!0;Pe.title="Link";class Qo{constructor({data:t,api:e}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=e,this.title=t.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=t.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const t=m.make("div",this.CSS.wrapper),e=$i,o=m.make("div",this.CSS.info),n=m.make("div",this.CSS.title,{textContent:this.title}),s=m.make("div",this.CSS.subtitle,{textContent:this.subtitle});return t.innerHTML=e,o.appendChild(n),o.appendChild(s),t.appendChild(o),t}}Qo.isReadOnlySupported=!0;class fs extends Oe{constructor(){super(...arguments),this.type=re.Inline}get title(){return this.constructable[_e.Title]}create(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}}class gs extends Oe{constructor(){super(...arguments),this.type=re.Tune}create(t,e){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings,block:e,data:t})}}class G extends Map{get blockTools(){const t=Array.from(this.entries()).filter(([,e])=>e.isBlock());return new G(t)}get inlineTools(){const t=Array.from(this.entries()).filter(([,e])=>e.isInline());return new G(t)}get blockTunes(){const t=Array.from(this.entries()).filter(([,e])=>e.isTune());return new G(t)}get internalTools(){const t=Array.from(this.entries()).filter(([,e])=>e.isInternal);return new G(t)}get externalTools(){const t=Array.from(this.entries()).filter(([,e])=>!e.isInternal);return new G(t)}}var ms=Object.defineProperty,bs=Object.getOwnPropertyDescriptor,Ko=(i,t,e,o)=>{for(var n=o>1?void 0:o?bs(t,e):t,s=i.length-1,r;s>=0;s--)(r=i[s])&&(n=(o?r(t,e,n):r(n))||n);return o&&n&&ms(t,e,n),n};class Fe extends Oe{constructor(){super(...arguments),this.type=re.Block,this.inlineTools=new G,this.tunes=new G}create(t,e,o){return new this.constructable({data:t,block:e,readOnly:o,api:this.api.getMethodsForTool(this),config:this.settings})}get isReadOnlySupported(){return this.constructable[_t.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[_t.IsEnabledLineBreaks]}get toolbox(){const t=this.constructable[_t.Toolbox],e=this.config[te.Toolbox];if(!lt(t)&&e!==!1)return e?Array.isArray(t)?Array.isArray(e)?e.map((o,n)=>{const s=t[n];return s?{...s,...o}:o}):[e]:Array.isArray(e)?e:[{...t,...e}]:Array.isArray(t)?t:[t]}get conversionConfig(){return this.constructable[_t.ConversionConfig]}get enabledInlineTools(){return this.config[te.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[te.EnabledBlockTunes]}get pasteConfig(){return this.constructable[_t.PasteConfig]??{}}get sanitizeConfig(){const t=super.sanitizeConfig,e=this.baseSanitizeConfig;if(lt(t))return e;const o={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];J(s)?o[n]=Object.assign({},e,s):o[n]=s}return o}get baseSanitizeConfig(){const t={};return Array.from(this.inlineTools.values()).forEach(e=>Object.assign(t,e.sanitizeConfig)),Array.from(this.tunes.values()).forEach(e=>Object.assign(t,e.sanitizeConfig)),t}}Ko([Pt],Fe.prototype,"sanitizeConfig",1);Ko([Pt],Fe.prototype,"baseSanitizeConfig",1);class vs{constructor(t,e,o){this.api=o,this.config=t,this.editorConfig=e}get(t){const{class:e,isInternal:o=!1,...n}=this.config[t],s=this.getConstructor(e);return new s({name:t,constructable:e,config:n,api:this.api,isDefault:t===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:o})}getConstructor(t){switch(!0){case t[_e.IsInline]:return fs;case t[Xo.IsTune]:return gs;default:return Fe}}}class Jo{constructor({api:t}){this.CSS={animation:"wobble"},this.api=t}render(){return{icon:jo,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const t=this.api.blocks.getCurrentBlockIndex(),e=this.api.blocks.getBlockByIndex(t+1);if(!e)throw new Error("Unable to move Block down since it is already the last");const o=e.holder,n=o.getBoundingClientRect();let s=Math.abs(window.innerHeight-o.offsetHeight);n.top<window.innerHeight&&(s=window.scrollY+o.offsetHeight),window.scrollTo(0,s),this.api.blocks.move(t+1),this.api.toolbar.toggleBlockSettings(!0)}}Jo.isTune=!0;class Go{constructor({api:t}){this.api=t}render(){return{icon:Di,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}Go.isTune=!0;class tn{constructor({api:t}){this.CSS={animation:"wobble"},this.api=t}render(){return{icon:Ni,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const t=this.api.blocks.getCurrentBlockIndex(),e=this.api.blocks.getBlockByIndex(t),o=this.api.blocks.getBlockByIndex(t-1);if(t===0||!e||!o)throw new Error("Unable to move Block up since it is already the first");const n=e.holder,s=o.holder,r=n.getBoundingClientRect(),a=s.getBoundingClientRect();let l;a.top>0?l=Math.abs(r.top)-Math.abs(a.top):l=Math.abs(r.top)+a.height,window.scrollBy(0,-1*l),this.api.blocks.move(t-1),this.api.toolbar.toggleBlockSettings(!0)}}tn.isTune=!0;var ks=Object.defineProperty,ws=Object.getOwnPropertyDescriptor,ys=(i,t,e,o)=>{for(var n=o>1?void 0:o?ws(t,e):t,s=i.length-1,r;s>=0;s--)(r=i[s])&&(n=(o?r(t,e,n):r(n))||n);return o&&n&&ks(t,e,n),n};class en extends H{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new G,this.toolsUnavailable=new G}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=be({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const t=this.prepareConfig();this.factory=new vs(t,this.config,this.Editor.API);const e=this.getListOfPrepareFunctions(t);if(e.length===0)return Promise.resolve();await $n(e,o=>{this.toolPrepareMethodSuccess(o)},o=>{this.toolPrepareMethodFallback(o)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const t={};return Array.from(this.inlineTools.values()).forEach(e=>{Object.assign(t,e.sanitizeConfig)}),t}destroy(){Object.values(this.available).forEach(async t=>{W(t.reset)&&await t.reset()})}get internalTools(){return{bold:{class:Ne,isInternal:!0},italic:{class:De,isInternal:!0},link:{class:Pe,isInternal:!0},paragraph:{class:Re,inlineToolbar:!0,isInternal:!0},stub:{class:Qo,isInternal:!0},moveUp:{class:tn,isInternal:!0},delete:{class:Go,isInternal:!0},moveDown:{class:Jo,isInternal:!0}}}toolPrepareMethodSuccess(t){const e=this.factory.get(t.toolName);if(e.isInline()){const o=["render","surround","checkState"].filter(n=>!e.create()[n]);if(o.length){U(`Incorrect Inline Tool: ${e.name}. Some of required methods is not implemented %o`,"warn",o),this.toolsUnavailable.set(e.name,e);return}}this.toolsAvailable.set(e.name,e)}toolPrepareMethodFallback(t){this.toolsUnavailable.set(t.toolName,this.factory.get(t.toolName))}getListOfPrepareFunctions(t){const e=[];return Object.entries(t).forEach(([o,n])=>{e.push({function:W(n.class.prepare)?n.class.prepare:()=>{},data:{toolName:o,config:n.config}})}),e}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(t=>{this.assignInlineToolsToBlockTool(t),this.assignBlockTunesToBlockTool(t)})}assignInlineToolsToBlockTool(t){if(this.config.inlineToolbar!==!1){if(t.enabledInlineTools===!0){t.inlineTools=new G(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(e=>[e,this.inlineTools.get(e)]):Array.from(this.inlineTools.entries()));return}Array.isArray(t.enabledInlineTools)&&(t.inlineTools=new G(t.enabledInlineTools.map(e=>[e,this.inlineTools.get(e)])))}}assignBlockTunesToBlockTool(t){if(t.enabledBlockTunes!==!1){if(Array.isArray(t.enabledBlockTunes)){const e=new G(t.enabledBlockTunes.map(o=>[o,this.blockTunes.get(o)]));t.tunes=new G([...e,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const e=new G(this.config.tunes.map(o=>[o,this.blockTunes.get(o)]));t.tunes=new G([...e,...this.blockTunes.internalTools]);return}t.tunes=this.blockTunes.internalTools}}validateTools(){for(const t in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,t)){if(t in this.internalTools)return;const e=this.config.tools[t];if(!W(e)&&!W(e.class))throw Error(`Tool ¬´${t}¬ª must be a constructor function or an object with function in the ¬´class¬ª property`)}}prepareConfig(){const t={};for(const e in this.config.tools)J(this.config.tools[e])?t[e]=this.config.tools[e]:t[e]={class:this.config.tools[e]};return t}}ys([Pt],en.prototype,"getAllInlineToolsSanitizeConfig",1);const xs=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;border-radius:0;line-height:normal}.ce-inline-tool svg{width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:190px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px #c9c9cc7a;border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important}.ce-conversion-tool--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-conversion-tool__secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-conversion-tool__secondary-label{display:none}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;line-height:32px}.ce-settings__button svg{width:20px;height:20px}@media (max-width: 650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover: hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{background:rgba(34,186,255,.08)!important}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button--disabled{cursor:not-allowed!important}.ce-settings__button--disabled{opacity:.3}.ce-settings__button--selected{color:#388ae5}@media (min-width: 651px){.codex-editor--narrow .ce-settings .ce-popover{right:0;left:auto;left:initial}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button svg{width:20px;height:20px}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0px;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #e8e8eb;--color-shadow: rgba(13,20,33,.13);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #eff2f5;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:0;top:calc(100% + var(--offset-from-target));background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}.ce-popover--open-top{top:calc(-1 * (var(--offset-from-target) + var(--popover-height)))}@media (max-width: 650px){.ce-popover{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}.ce-popover .ce-popover__search{display:none}}.ce-popover__search,.ce-popover__custom-content:not(:empty){margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width: 651px){.ce-popover__custom-content:not(:empty){padding:0}}.ce-popover__custom-content--hidden{display:none}.ce-popover-item{--border-radius: 6px;--icon-size: 20px;--icon-size-mobile: 28px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px;color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{border-radius:5px;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px var(--color-border-icon);box-shadow:0 0 0 1px var(--color-border-icon);background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:var(--icon-size-mobile);height:var(--icon-size-mobile)}}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--active .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--disabled .ce-popover-item__icon{-webkit-box-shadow:0 0 0 1px var(--color-border-icon-disabled);box-shadow:0 0 0 1px var(--color-border-icon-disabled)}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--focused:not(.ce-popover-item--no-focus){-webkit-box-shadow:inset 0 0 0px 1px var(--color-shadow-item-focus);box-shadow:inset 0 0 0 1px var(--color-shadow-item-focus)}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}.ce-popover-item:hover .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__icon{color:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}.ce-popover-item--confirmation .ce-popover-item__icon,.ce-popover-item--active .ce-popover-item__icon,.ce-popover-item--focused .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}
`;class Cs extends H{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=void 0,this.resizeDebouncer=Xe(()=>{this.windowResize()},200)}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache)return this.contentRectCache;const t=this.nodes.wrapper.querySelector(`.${K.CSS.content}`);return t?(this.contentRectCache=t.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.checkIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(t){t?this.disableModuleBindings():window.requestIdleCallback(()=>{this.enableModuleBindings()},{timeout:2e3})}checkEmptiness(){const{BlockManager:t}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,t.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:t,BlockSettings:e,InlineToolbar:o,ConversionToolbar:n}=this.Editor;return e.opened||o.opened||n.opened||t.toolbox.opened}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([t,e])=>e.flipper instanceof bt).some(([t,e])=>e.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML=""}closeAllToolbars(){const{Toolbar:t,BlockSettings:e,InlineToolbar:o,ConversionToolbar:n}=this.Editor;e.close(),o.close(),n.close(),t.toolbox.close()}checkIsMobile(){this.isMobile=window.innerWidth<_o}make(){this.nodes.holder=m.getHolder(this.config.holder),this.nodes.wrapper=m.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=m.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}loadStyles(){const t="editor-js-styles";if(m.get(t))return;const e=m.make("style",null,{id:t,textContent:xs.toString()});this.config.style&&!lt(this.config.style)&&this.config.style.nonce&&e.setAttribute("nonce",this.config.style.nonce),m.prepend(document.head,e)}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",e=>{this.redactorClicked(e)},!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",e=>{this.documentTouched(e)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",e=>{this.documentTouched(e)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(document,"keydown",e=>{this.documentKeydown(e)},!0),this.readOnlyMutableListeners.on(document,"mousedown",e=>{this.documentClicked(e)},!0);const t=Xe(()=>{this.selectionChanged()},180);this.readOnlyMutableListeners.on(document,"selectionchange",t,!0),this.readOnlyMutableListeners.on(window,"resize",()=>{this.resizeDebouncer()},{passive:!0}),this.watchBlockHoveredEvents()}watchBlockHoveredEvents(){let t;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",me(e=>{const o=e.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||o&&t!==o&&(t=o,this.eventsDispatcher.emit(Wo,{block:this.Editor.BlockManager.getBlockByChildNode(o)}))},20),{passive:!0})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.checkIsMobile()}documentKeydown(t){switch(t.keyCode){case R.ENTER:this.enterPressed(t);break;case R.BACKSPACE:case R.DELETE:this.backspacePressed(t);break;case R.ESC:this.escapePressed(t);break;default:this.defaultBehaviour(t);break}}defaultBehaviour(t){const{currentBlock:e}=this.Editor.BlockManager,o=t.target.closest(`.${this.CSS.editorWrapper}`),n=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;if(e!==void 0&&o===null){this.Editor.BlockEvents.keydown(t);return}o||e&&n||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close())}backspacePressed(t){const{BlockManager:e,BlockSelection:o,Caret:n}=this.Editor;if(o.anyBlockSelected&&!I.isSelectionExists){const s=e.removeSelectedBlocks(),r=e.insertDefaultBlockAtIndex(s,!0);n.setToBlock(r,n.positions.START),o.clearSelection(t),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}}escapePressed(t){this.Editor.BlockSelection.clearSelection(t),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(t){const{BlockManager:e,BlockSelection:o}=this.Editor,n=e.currentBlockIndex>=0;if(o.anyBlockSelected&&!I.isSelectionExists){o.clearSelection(t),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation();return}if(!this.someToolbarOpened&&n&&t.target.tagName==="BODY"){const s=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(s),this.Editor.Toolbar.moveAndOpen(s)}this.Editor.BlockSelection.clearSelection(t)}documentClicked(t){var e,o;if(!t.isTrusted)return;const n=t.target;this.nodes.holder.contains(n)||I.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close());const s=(e=this.Editor.BlockSettings.nodes.wrapper)==null?void 0:e.contains(n),r=(o=this.Editor.Toolbar.nodes.settingsToggler)==null?void 0:o.contains(n),a=s||r;if(this.Editor.BlockSettings.opened&&!a){this.Editor.BlockSettings.close();const l=this.Editor.BlockManager.getBlockByChildNode(n);this.Editor.Toolbar.moveAndOpen(l)}this.Editor.BlockSelection.clearSelection(t)}documentTouched(t){let e=t.target;if(e===this.nodes.redactor){const o=t instanceof MouseEvent?t.clientX:t.touches[0].clientX,n=t instanceof MouseEvent?t.clientY:t.touches[0].clientY;e=document.elementFromPoint(o,n)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(e)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}redactorClicked(t){if(!I.isCollapsed)return;const e=t.target,o=t.metaKey||t.ctrlKey;if(m.isAnchor(e)&&o){t.stopImmediatePropagation(),t.stopPropagation();const n=e.getAttribute("href"),s=Xn(n);Zn(s);return}this.processBottomZoneClick(t)}processBottomZoneClick(t){const e=this.Editor.BlockManager.getBlockByIndex(-1),o=m.offset(e.holder).bottom,n=t.pageY,{BlockSelection:s}=this.Editor;if(t.target instanceof Element&&t.target.isEqualNode(this.nodes.redactor)&&!s.anyBlockSelected&&o<n){t.stopImmediatePropagation(),t.stopPropagation();const{BlockManager:r,Caret:a,Toolbar:l}=this.Editor;(!r.lastBlock.tool.isDefault||!r.lastBlock.isEmpty)&&r.insertAtEnd(),a.setToTheLastBlock(),l.moveAndOpen(r.lastBlock)}}selectionChanged(){const{CrossBlockSelection:t,BlockSelection:e}=this.Editor,o=I.anchorElement;if(t.isCrossBlockSelectionStarted&&e.anyBlockSelected&&I.get().removeAllRanges(),!o){I.range||this.Editor.InlineToolbar.close();return}const n=o.closest(`.${K.CSS.content}`)===null;if(n&&(this.Editor.InlineToolbar.containsNode(o)||this.Editor.InlineToolbar.close(),o.dataset.inlineToolbar!=="true"))return;this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(o);const s=n!==!0;this.Editor.InlineToolbar.tryToShow(!0,s)}}const Es={BlocksAPI:si,CaretAPI:ri,EventsAPI:ai,I18nAPI:Be,API:li,InlineToolbarAPI:ci,ListenersAPI:di,NotifierAPI:fi,ReadOnlyAPI:gi,SanitizerAPI:xi,SaverAPI:Ci,SelectionAPI:Ei,StylesAPI:Si,ToolbarAPI:Ti,TooltipAPI:Ai,UiAPI:_i,BlockSettings:Xi,ConversionToolbar:Yi,Toolbar:ts,InlineToolbar:es,BlockEvents:os,BlockManager:ss,BlockSelection:rs,Caret:ne,CrossBlockSelection:as,DragNDrop:ls,ModificationsObserver:cs,Paste:Zo,ReadOnly:ds,RectangleSelection:Ut,Renderer:hs,Saver:us,Tools:en,UI:Cs};class Ss{constructor(t){this.moduleInstances={},this.eventsDispatcher=new se;let e,o;this.isReady=new Promise((n,s)=>{e=n,o=s}),Promise.resolve().then(async()=>{this.configuration=t,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:n,Caret:s,UI:r,ModificationsObserver:a}=this.moduleInstances;r.checkEmptiness(),a.enable(),this.configuration.autofocus&&s.setToBlock(n.blocks[0],s.positions.START),e()}).catch(n=>{U(`Editor.js is not ready because of ${n}`,"error"),o(n)})}set configuration(t){var e,o;J(t)?this.config={...t}:this.config={holder:t},ve(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=Io.VERBOSE),jn(this.config.logLevel),ve(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const n={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,(lt(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[n]}),this.config.readOnly=this.config.readOnly||!1,(e=this.config.i18n)!=null&&e.messages&&nt.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((o=this.config.i18n)==null?void 0:o.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:t,holder:e}=this.config;if(t&&e)throw Error("¬´holderId¬ª and ¬´holder¬ª param can't assign at the same time.");if(xt(e)&&!m.get(e))throw Error(`element with ID ¬´${e}¬ª is missing. Pass correct holder's ID.`);if(e&&J(e)&&!m.isElement(e))throw Error("¬´holder¬ª value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((t,e)=>t.then(async()=>{try{await this.moduleInstances[e].prepare()}catch(o){if(o instanceof Ro)throw new Error(o.message);U(`Module ${e} was skipped because of %o`,"warn",o)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(Es).forEach(([t,e])=>{try{this.moduleInstances[t]=new e({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(o){U("[constructModules]",`Module ${t} skipped because`,"error",o)}})}configureModules(){for(const t in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,t)&&(this.moduleInstances[t].state=this.getModulesDiff(t))}getModulesDiff(t){const e={};for(const o in this.moduleInstances)o!==t&&(e[o]=this.moduleInstances[o]);return e}}/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class Ts{static get version(){return"2.29.0"}constructor(t){let e=()=>{};J(t)&&W(t.onReady)&&(e=t.onReady);const o=new Ss(t);this.isReady=o.isReady.then(()=>{this.exportAPI(o),e()})}exportAPI(t){const e=["configuration"],o=()=>{Object.values(t.moduleInstances).forEach(n=>{W(n.destroy)&&n.destroy(),n.listeners.removeAll()}),Mi(),t=null;for(const n in this)Object.prototype.hasOwnProperty.call(this,n)&&delete this[n];Object.setPrototypeOf(this,null)};e.forEach(n=>{this[n]=t[n]}),this.destroy=o,Object.setPrototypeOf(this,t.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([n,s])=>{Object.entries(s).forEach(([r,a])=>{this[a]=t.moduleInstances.API.methods[n][r]})})}}function He(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var on={exports:{}};(function(i,t){(function(e,o){i.exports=o()})(self,function(){return(()=>{var e={424:(r,a,l)=>{l.r(a),l.d(a,{default:()=>g});var c=l(81),d=l.n(c),h=l(645),p=l.n(h)()(d());p.push([r.id,`.ce-block--drop-target .ce-block__content:before {
  content: "";
  position: absolute;
  top: 50%;
  left: -20px;
  margin-top: -1px;
  height: 8px;
  width: 8px;
  border: solid #a0a0a0;
  border-width: 1px 1px 0 0;
  -webkit-transform-origin: right;
  transform-origin: right;
  -webkit-transform: rotate(45deg);
  transform: rotate(45deg);
}

.ce-block--drop-target .ce-block__content:after {
  background: none;
}`,""]);const g=p},645:r=>{r.exports=function(a){var l=[];return l.toString=function(){return this.map(function(c){var d="",h=c[5]!==void 0;return c[4]&&(d+="@supports (".concat(c[4],") {")),c[2]&&(d+="@media ".concat(c[2]," {")),h&&(d+="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {")),d+=a(c),h&&(d+="}"),c[2]&&(d+="}"),c[4]&&(d+="}"),d}).join("")},l.i=function(c,d,h,p,g){typeof c=="string"&&(c=[[null,c,void 0]]);var f={};if(h)for(var v=0;v<this.length;v++){var u=this[v][0];u!=null&&(f[u]=!0)}for(var w=0;w<c.length;w++){var b=[].concat(c[w]);h&&f[b[0]]||(g!==void 0&&(b[5]===void 0||(b[1]="@layer".concat(b[5].length>0?" ".concat(b[5]):""," {").concat(b[1],"}")),b[5]=g),d&&(b[2]&&(b[1]="@media ".concat(b[2]," {").concat(b[1],"}")),b[2]=d),p&&(b[4]?(b[1]="@supports (".concat(b[4],") {").concat(b[1],"}"),b[4]=p):b[4]="".concat(p)),l.push(b))}},l}},81:r=>{r.exports=function(a){return a[1]}},406:(r,a,l)=>{var c=l(424);typeof c=="string"&&(c=[[r.id,c,""]]),l(723)(c,{hmr:!0,transform:void 0,insertInto:void 0}),c.locals&&(r.exports=c.locals)},723:(r,a,l)=>{var c,d,h={},p=(c=function(){return window&&document&&document.all&&!window.atob},function(){return d===void 0&&(d=c.apply(this,arguments)),d}),g=function(k){return document.querySelector(k)},f=function(k){var C={};return function(_){if(typeof _=="function")return _();if(C[_]===void 0){var O=g.call(this,_);if(window.HTMLIFrameElement&&O instanceof window.HTMLIFrameElement)try{O=O.contentDocument.head}catch{O=null}C[_]=O}return C[_]}}(),v=null,u=0,w=[],b=l(947);function L(k,C){for(var _=0;_<k.length;_++){var O=k[_],j=h[O.id];if(j){j.refs++;for(var P=0;P<j.parts.length;P++)j.parts[P](O.parts[P]);for(;P<O.parts.length;P++)j.parts.push(y(O.parts[P],C))}else{var Y=[];for(P=0;P<O.parts.length;P++)Y.push(y(O.parts[P],C));h[O.id]={id:O.id,refs:1,parts:Y}}}}function B(k,C){for(var _=[],O={},j=0;j<k.length;j++){var P=k[j],Y=C.base?P[0]+C.base:P[0],$={css:P[1],media:P[2],sourceMap:P[3]};O[Y]?O[Y].parts.push($):_.push(O[Y]={id:Y,parts:[$]})}return _}function E(k,C){var _=f(k.insertInto);if(!_)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var O=w[w.length-1];if(k.insertAt==="top")O?O.nextSibling?_.insertBefore(C,O.nextSibling):_.appendChild(C):_.insertBefore(C,_.firstChild),w.push(C);else if(k.insertAt==="bottom")_.appendChild(C);else{if(typeof k.insertAt!="object"||!k.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var j=f(k.insertInto+" "+k.insertAt.before);_.insertBefore(C,j)}}function S(k){if(k.parentNode===null)return!1;k.parentNode.removeChild(k);var C=w.indexOf(k);C>=0&&w.splice(C,1)}function A(k){var C=document.createElement("style");return k.attrs.type===void 0&&(k.attrs.type="text/css"),x(C,k.attrs),E(k,C),C}function x(k,C){Object.keys(C).forEach(function(_){k.setAttribute(_,C[_])})}function y(k,C){var _,O,j,P;if(C.transform&&k.css){if(!(P=C.transform(k.css)))return function(){};k.css=P}if(C.singleton){var Y=u++;_=v||(v=A(C)),O=D.bind(null,_,Y,!1),j=D.bind(null,_,Y,!0)}else k.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(_=function($){var Ct=document.createElement("link");return $.attrs.type===void 0&&($.attrs.type="text/css"),$.attrs.rel="stylesheet",x(Ct,$.attrs),E($,Ct),Ct}(C),O=V.bind(null,_,C),j=function(){S(_),_.href&&URL.revokeObjectURL(_.href)}):(_=A(C),O=N.bind(null,_),j=function(){S(_)});return O(k),function($){if($){if($.css===k.css&&$.media===k.media&&$.sourceMap===k.sourceMap)return;O(k=$)}else j()}}r.exports=function(k,C){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(C=C||{}).attrs=typeof C.attrs=="object"?C.attrs:{},C.singleton||typeof C.singleton=="boolean"||(C.singleton=p()),C.insertInto||(C.insertInto="head"),C.insertAt||(C.insertAt="bottom");var _=B(k,C);return L(_,C),function(O){for(var j=[],P=0;P<_.length;P++){var Y=_[P];($=h[Y.id]).refs--,j.push($)}for(O&&L(B(O,C),C),P=0;P<j.length;P++){var $;if(($=j[P]).refs===0){for(var Ct=0;Ct<$.parts.length;Ct++)$.parts[Ct]();delete h[$.id]}}}};var T,M=(T=[],function(k,C){return T[k]=C,T.filter(Boolean).join(`
`)});function D(k,C,_,O){var j=_?"":O.css;if(k.styleSheet)k.styleSheet.cssText=M(C,j);else{var P=document.createTextNode(j),Y=k.childNodes;Y[C]&&k.removeChild(Y[C]),Y.length?k.insertBefore(P,Y[C]):k.appendChild(P)}}function N(k,C){var _=C.css,O=C.media;if(O&&k.setAttribute("media",O),k.styleSheet)k.styleSheet.cssText=_;else{for(;k.firstChild;)k.removeChild(k.firstChild);k.appendChild(document.createTextNode(_))}}function V(k,C,_){var O=_.css,j=_.sourceMap,P=C.convertToAbsoluteUrls===void 0&&j;(C.convertToAbsoluteUrls||P)&&(O=b(O)),j&&(O+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(j))))+" */");var Y=new Blob([O],{type:"text/css"}),$=k.href;k.href=URL.createObjectURL(Y),$&&URL.revokeObjectURL($)}},947:r=>{r.exports=function(a){var l=typeof window<"u"&&window.location;if(!l)throw new Error("fixUrls requires window.location");if(!a||typeof a!="string")return a;var c=l.protocol+"//"+l.host,d=c+l.pathname.replace(/\/[^\/]*$/,"/");return a.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(h,p){var g,f=p.trim().replace(/^"(.*)"$/,function(v,u){return u}).replace(/^'(.*)'$/,function(v,u){return u});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(f)?h:(g=f.indexOf("//")===0?f:f.indexOf("/")===0?c+f:d+f.replace(/^\.\//,""),"url("+JSON.stringify(g)+")")})}}},o={};function n(r){var a=o[r];if(a!==void 0)return a.exports;var l=o[r]={id:r,exports:{}};return e[r](l,l.exports,n),l.exports}n.n=r=>{var a=r&&r.__esModule?()=>r.default:()=>r;return n.d(a,{a}),a},n.d=(r,a)=>{for(var l in a)n.o(a,l)&&!n.o(r,l)&&Object.defineProperty(r,l,{enumerable:!0,get:a[l]})},n.o=(r,a)=>Object.prototype.hasOwnProperty.call(r,a),n.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var s={};return(()=>{function r(l,c){for(var d=0;d<c.length;d++){var h=c[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}n.d(s,{default:()=>a}),n(406);var a=function(){function l(p,g){var f=p.configuration,v=p.blocks,u=p.toolbar,w=p.save;(function(b,L){if(!(b instanceof L))throw new TypeError("Cannot call a class as a function")})(this,l),this.toolbar=u,this.borderStyle=g||"1px dashed #aaa",this.api=v,this.holder=typeof f.holder=="string"?document.getElementById(f.holder):f.holder,this.readOnly=f.readOnly,this.startBlock=null,this.endBlock=null,this.save=w,this.setDragListener(),this.setDropListener()}var c,d,h;return c=l,h=[{key:"isReadOnlySupported",get:function(){return!0}}],(d=[{key:"setElementCursor",value:function(p){if(p){var g=document.createRange(),f=window.getSelection();g.setStart(p.childNodes[0],0),g.collapse(!0),f.removeAllRanges(),f.addRange(g),p.focus()}}},{key:"setDragListener",value:function(){var p=this;if(!this.readOnly){var g=this.holder.querySelector(".ce-toolbar__settings-btn");g.setAttribute("draggable","true"),g.addEventListener("dragstart",function(){p.startBlock=p.api.getCurrentBlockIndex()}),g.addEventListener("drag",function(){if(p.toolbar.close(),!p.isTheOnlyBlock()){var f=p.holder.querySelectorAll(".ce-block"),v=p.holder.querySelector(".ce-block--drop-target");p.setElementCursor(v),p.setBorderBlocks(f,v)}})}}},{key:"setBorderBlocks",value:function(p,g){var f=this;Object.values(p).forEach(function(v){var u=v.querySelector(".ce-block__content");v!==g?(u.style.removeProperty("border-top"),u.style.removeProperty("border-bottom")):Object.keys(p).find(function(w){return p[w]===g})>f.startBlock?u.style.borderBottom=f.borderStyle||borderStyle:u.style.borderTop=f.borderStyle})}},{key:"setDropListener",value:function(){var p=this;document.addEventListener("drop",function(g){var f=g.target;if(p.holder.contains(f)&&p.startBlock!==null){var v=p.getDropTarget(f);if(v){var u=v.querySelector(".ce-block__content");u.style.removeProperty("border-top"),u.style.removeProperty("border-bottom"),p.endBlock=p.getTargetPosition(v),p.moveBlocks()}}p.startBlock=null})}},{key:"getDropTarget",value:function(p){return p.classList.contains("ce-block")?p:p.closest(".ce-block")}},{key:"getTargetPosition",value:function(p){return Array.from(p.parentNode.children).indexOf(p)}},{key:"isTheOnlyBlock",value:function(){return this.api.getBlocksCount()===1}},{key:"moveBlocks",value:function(){this.isTheOnlyBlock()||this.api.move(this.endBlock,this.startBlock)}}])&&r(c.prototype,d),h&&r(c,h),Object.defineProperty(c,"prototype",{writable:!1}),l}()})(),s.default})()})})(on);var Bs=on.exports;const Ls=He(Bs);(function(){try{if(typeof document<"u"){var i=document.createElement("style");i.appendChild(document.createTextNode(".ce-header{padding:.6em 0 3px;margin:0;line-height:1.25em;outline:none}.ce-header p,.ce-header div{padding:0!important;margin:0!important}.ce-header[contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;display:none;cursor:text}.ce-header[contentEditable=true][data-placeholder]:empty:before{display:block}.ce-header[contentEditable=true][data-placeholder]:empty:focus:before{display:none}")),document.head.appendChild(i)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const Is='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17V10.2135C19 10.1287 18.9011 10.0824 18.836 10.1367L16 12.5"/></svg>',Ms='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10 19 9.5 19 12C19 13.9771 16.0684 13.9997 16.0012 16.8981C15.9999 16.9533 16.0448 17 16.1 17L19.3 17"/></svg>',As='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10.5 16.8323 10 17.6 10C18.3677 10 19.5 10.311 19.5 11.5C19.5 12.5315 18.7474 12.9022 18.548 12.9823C18.5378 12.9864 18.5395 13.0047 18.5503 13.0063C18.8115 13.0456 20 13.3065 20 14.8C20 16 19.5 17 17.8 17C17.8 17 16 17 16 16.3"/></svg>',_s='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 10L15.2834 14.8511C15.246 14.9178 15.294 15 15.3704 15C16.8489 15 18.7561 15 20.2 15M19 17C19 15.7187 19 14.8813 19 13.6"/></svg>',Os='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 15.9C16 15.9 16.3768 17 17.8 17C19.5 17 20 15.6199 20 14.7C20 12.7323 17.6745 12.0486 16.1635 12.9894C16.094 13.0327 16 12.9846 16 12.9027V10.1C16 10.0448 16.0448 10 16.1 10H19.8"/></svg>',Rs='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.5 10C16.5 10.5 16 13.3285 16 15M16 15V15C16 16.1046 16.8954 17 18 17H18.3246C19.3251 17 20.3191 16.3492 20.2522 15.3509C20.0612 12.4958 16 12.6611 16 15Z"/></svg>',Ns='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 7L9 12M9 17V12M9 12L15 12M15 7V12M15 17L15 12"/></svg>';/**
 * Header block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license MIT
 * @version 2.0.0
 */class Ds{constructor({data:t,config:e,api:o,readOnly:n}){this.api=o,this.readOnly=n,this._CSS={block:this.api.styles.block,wrapper:"ce-header"},this._settings=e,this._data=this.normalizeData(t),this._element=this.getTag()}normalizeData(t){const e={};return typeof t!="object"&&(t={}),e.text=t.text||"",e.level=parseInt(t.level)||this.defaultLevel.number,e}render(){return this._element}renderSettings(){return this.levels.map(t=>({icon:t.svg,label:this.api.i18n.t(`Heading ${t.number}`),onActivate:()=>this.setLevel(t.number),closeOnActivate:!0,isActive:this.currentLevel.number===t.number}))}setLevel(t){this.data={level:t,text:this.data.text}}merge(t){const e={text:this.data.text+t.text,level:this.data.level};this.data=e}validate(t){return t.text.trim()!==""}save(t){return{text:t.innerHTML,level:this.currentLevel.number}}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{level:!1,text:{}}}static get isReadOnlySupported(){return!0}get data(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data}set data(t){if(this._data=this.normalizeData(t),t.level!==void 0&&this._element.parentNode){const e=this.getTag();e.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(e,this._element),this._element=e}t.text!==void 0&&(this._element.innerHTML=this._data.text||"")}getTag(){const t=document.createElement(this.currentLevel.tag);return t.innerHTML=this._data.text||"",t.classList.add(this._CSS.wrapper),t.contentEditable=this.readOnly?"false":"true",t.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),t}get currentLevel(){let t=this.levels.find(e=>e.number===this._data.level);return t||(t=this.defaultLevel),t}get defaultLevel(){if(this._settings.defaultLevel){const t=this.levels.find(e=>e.number===this._settings.defaultLevel);if(t)return t;console.warn("(‡∏á'ÃÄ-'ÃÅ)‡∏á Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}get levels(){const t=[{number:1,tag:"H1",svg:Is},{number:2,tag:"H2",svg:Ms},{number:3,tag:"H3",svg:As},{number:4,tag:"H4",svg:_s},{number:5,tag:"H5",svg:Os},{number:6,tag:"H6",svg:Rs}];return this._settings.levels?t.filter(e=>this._settings.levels.includes(e.number)):t}onPaste(t){const e=t.detail.data;let o=this.defaultLevel.number;switch(e.tagName){case"H1":o=1;break;case"H2":o=2;break;case"H3":o=3;break;case"H4":o=4;break;case"H5":o=5;break;case"H6":o=6;break}this._settings.levels&&(o=this._settings.levels.reduce((n,s)=>Math.abs(s-o)<Math.abs(n-o)?s:n)),this.data={level:o,text:e.innerHTML}}static get pasteConfig(){return{tags:["H1","H2","H3","H4","H5","H6"]}}static get toolbox(){return{icon:Ns,title:"Heading"}}}var nn={exports:{}};(function(i,t){(function(e,o){i.exports=o()})(self,()=>(()=>{var e={424:(s,r,a)=>{(r=a(645)(!1)).push([s.id,`.picker_wrapper.popup {
  z-index: 99;
  width: 170px;
  margin: 0;
  box-shadow: 0 0 10px 1px #eaeaea;
  background: #ffffff;
}

.picker_arrow {
  display: none;
}

.layout_default .picker_slider, .layout_default .picker_selector {
  padding: 5px;
}

.colorPlugin.ce-inline-tool {
  width: 32px;
  border-radius: 3px;
}

.colorPlugin.ce-inline-tool--active svg {
  fill: #3c99ff;
}

#color-left-btn {
  height: 35px;
  width: 18px;
  font-weight: 600;
  display: flex;
  align-items: center;
}

#color-left-btn:hover {
  border-radius: 5px 0 0 5px;
  background: rgba(203, 203, 203, 0.49);
}

#color-text {
  padding: 0 4px;
}

#color-btn-text {
  height: 15px;
}

`,""]),s.exports=r},645:s=>{s.exports=function(r){var a=[];return a.toString=function(){return this.map(function(l){var c=function(d,h){var p,g,f,v=d[1]||"",u=d[3];if(!u)return v;if(h&&typeof btoa=="function"){var w=(p=u,g=btoa(unescape(encodeURIComponent(JSON.stringify(p)))),f="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(g),"/*# ".concat(f," */")),b=u.sources.map(function(L){return"/*# sourceURL=".concat(u.sourceRoot||"").concat(L," */")});return[v].concat(b).concat([w]).join(`
`)}return[v].join(`
`)}(l,r);return l[2]?"@media ".concat(l[2]," {").concat(c,"}"):c}).join("")},a.i=function(l,c,d){typeof l=="string"&&(l=[[null,l,""]]);var h={};if(d)for(var p=0;p<this.length;p++){var g=this[p][0];g!=null&&(h[g]=!0)}for(var f=0;f<l.length;f++){var v=[].concat(l[f]);d&&h[v[0]]||(c&&(v[2]?v[2]="".concat(c," and ").concat(v[2]):v[2]=c),a.push(v))}},a}},548:(s,r,a)=>{var l=a(379),c=a(424);typeof(c=c.__esModule?c.default:c)=="string"&&(c=[[s.id,c,""]]),l(c,{insert:"head",singleton:!1}),s.exports=c.locals||{}},379:(s,r,a)=>{var l,c=function(){var E={};return function(S){if(E[S]===void 0){var A=document.querySelector(S);if(window.HTMLIFrameElement&&A instanceof window.HTMLIFrameElement)try{A=A.contentDocument.head}catch{A=null}E[S]=A}return E[S]}}(),d=[];function h(E){for(var S=-1,A=0;A<d.length;A++)if(d[A].identifier===E){S=A;break}return S}function p(E,S){for(var A={},x=[],y=0;y<E.length;y++){var T=E[y],M=S.base?T[0]+S.base:T[0],D=A[M]||0,N="".concat(M," ").concat(D);A[M]=D+1;var V=h(N),k={css:T[1],media:T[2],sourceMap:T[3]};V!==-1?(d[V].references++,d[V].updater(k)):d.push({identifier:N,updater:B(k,S),references:1}),x.push(N)}return x}function g(E){var S=document.createElement("style"),A=E.attributes||{};if(A.nonce===void 0){var x=a.nc;x&&(A.nonce=x)}if(Object.keys(A).forEach(function(T){S.setAttribute(T,A[T])}),typeof E.insert=="function")E.insert(S);else{var y=c(E.insert||"head");if(!y)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");y.appendChild(S)}return S}var f,v=(f=[],function(E,S){return f[E]=S,f.filter(Boolean).join(`
`)});function u(E,S,A,x){var y=A?"":x.media?"@media ".concat(x.media," {").concat(x.css,"}"):x.css;if(E.styleSheet)E.styleSheet.cssText=v(S,y);else{var T=document.createTextNode(y),M=E.childNodes;M[S]&&E.removeChild(M[S]),M.length?E.insertBefore(T,M[S]):E.appendChild(T)}}function w(E,S,A){var x=A.css,y=A.media,T=A.sourceMap;if(y?E.setAttribute("media",y):E.removeAttribute("media"),T&&typeof btoa<"u"&&(x+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(T))))," */")),E.styleSheet)E.styleSheet.cssText=x;else{for(;E.firstChild;)E.removeChild(E.firstChild);E.appendChild(document.createTextNode(x))}}var b=null,L=0;function B(E,S){var A,x,y;if(S.singleton){var T=L++;A=b||(b=g(S)),x=u.bind(null,A,T,!1),y=u.bind(null,A,T,!0)}else A=g(S),x=w.bind(null,A,S),y=function(){(function(M){if(M.parentNode===null)return!1;M.parentNode.removeChild(M)})(A)};return x(E),function(M){if(M){if(M.css===E.css&&M.media===E.media&&M.sourceMap===E.sourceMap)return;x(E=M)}else y()}}s.exports=function(E,S){(S=S||{}).singleton||typeof S.singleton=="boolean"||(S.singleton=(l===void 0&&(l=!!(window&&document&&document.all&&!window.atob)),l));var A=p(E=E||[],S);return function(x){if(x=x||[],Object.prototype.toString.call(x)==="[object Array]"){for(var y=0;y<A.length;y++){var T=h(A[y]);d[T].references--}for(var M=p(x,S),D=0;D<A.length;D++){var N=h(A[D]);d[N].references===0&&(d[N].updater(),d.splice(N,1))}A=M}}}},452:s=>{s.exports={markerIcon:`<svg fill="#000000" height="34px" width="34px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 491.644 491.644" xml:space="preserve">
<g>
	<path d="M456.623,2.282c-42.758-20.283-141.107,96.84-223.473,264.224c-2.35,4.776-2.686,10.294-0.936,15.32
		c1.75,5.026,5.442,9.145,10.251,11.426L366.758,352.2c4.809,2.281,10.332,2.538,15.333,0.714c5.001-1.825,9.059-5.579,11.272-10.42
		C470.883,172.829,499.385,22.562,456.623,2.282z"/>
	<path d="M34.71,461.799l-17.257,16.708c-2.225,2.17-2.934,5.475-1.773,8.363c1.179,2.886,3.985,4.773,7.099,4.773h160.887
		c-1.364-5.043-0.921-10.445,1.391-15.306l7.919-16.692H40.036C38.036,459.646,36.129,460.419,34.71,461.799z"/>
	<path d="M264.766,448.864l-32.615-15.458c-1.046-0.502-2.161-0.744-3.257-0.744c-2.87,0-5.611,1.614-6.901,4.372l-22.001,46.384
		c-0.871,1.789-0.723,3.895,0.341,5.564c1.046,1.661,2.888,2.661,4.855,2.661h0.046l44.275-0.378
		c2.206-0.016,4.206-1.299,5.159-3.292l13.724-28.925c0.856-1.838,0.967-3.936,0.29-5.846
		C268.004,451.292,266.585,449.728,264.766,448.864z"/>
	<path d="M348.445,366.038l-112.572-51.392c-8.909-4.067-19.434-0.227-23.63,8.622c-2.551,5.378-3.58,11.353-2.975,17.275
		l5.2,50.909c0.703,6.882,4.983,12.884,11.261,15.792l60.031,27.797c6.688,3.097,14.548,2.179,20.343-2.375l45.983-36.137
		c4.931-3.875,7.487-10.041,6.743-16.269C358.086,374.032,354.151,368.642,348.445,366.038z"/>
</g>
</svg>`,textIcon:'<svg fill="#000000" viewBox="-6 0 512 512" xmlns="http://www.w3.org/2000/svg"><g stroke-width="0"></g><g stroke-linecap="round" stroke-linejoin="round"></g><g><title>text</title><path d="M365 432L328 352 172 352 135 432 64 432 227 80 272 80 436 432 365 432ZM201 288L299 288 250 183 201 288Z"></path></g></svg>'}},138:(s,r,a)=>{const l=a(442),{markerIcon:c,textIcon:d}=a(452),{getDefaultColorCache:h,handleCSSVariables:p}=a(697);a(548).toString(),s.exports=class{constructor({config:g,api:f}){this.api=f,this.config=g,this.clickedOnLeft=!1,this.pluginType=this.config.type||"text",this.parentTag=this.pluginType==="marker"?"MARK":"FONT",this.hasCustomPicker=this.config.customPicker||!1,this.color=p(h(this.config.defaultColor,this.pluginType)),this.picker=null,this.icon=null,this.button=null,this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}static get isInline(){return!0}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add("colorPlugin"),this.button.classList.add(this.iconClasses.base),this.button.appendChild(this.createLeftButton()),this.button.appendChild(this.createRightButton(this)),this.button}createLeftButton(){return this.icon||(this.icon=document.createElement("div"),this.icon.id="color-left-btn",this.icon.appendChild(this.createButtonIcon()),this.icon.addEventListener("click",()=>this.clickedOnLeft=!0)),this.icon}createButtonIcon(){const g=document.createElement("div");g.id="color-btn-text";const f=this.pluginType==="marker"?c:d;return g.innerHTML=this.config.icon||f,g}createRightButton(g){return this.picker||(this.picker=new l.ColorPlugin({onColorPicked:function(f){g.color=f},hasCustomPicker:this.hasCustomPicker,defaultColor:this.config.defaultColor,colorCollections:this.config.colorCollections,type:this.pluginType})),this.picker}surround(g){if(!g)return;const f=this.api.selection.findParentTag("SPAN");f&&this.unwrap(f);const v=this.api.selection.findParentTag(this.parentTag);v?this.unwrap(v):this.wrap(g),this.clickedOnLeft=!1}wrap(g){const f=g.extractContents(),v=document.createElement(this.parentTag);v.appendChild(f),g.insertNode(v),this.pluginType==="marker"?this.wrapMarker(v):this.wrapTextColor(v),this.api.selection.expandToTag(v)}wrapMarker(g){g.style.backgroundColor=this.color;const f=this.api.selection.findParentTag("FONT");f&&(g.style.color=f.style.color)}wrapTextColor(g){g.style.color=this.color}unwrap(g){this.api.selection.expandToTag(g);const f=window.getSelection(),v=f.getRangeAt(0),u=v.extractContents();this.clickedOnLeft?this.removeWrapper(g):this.updateWrapper(g),v.insertNode(u),f.removeAllRanges(),f.addRange(v)}updateWrapper(g){this.pluginType==="marker"?g.style.backgroundColor=this.color:g.style.color=this.color}removeWrapper(g){g.parentNode.removeChild(g)}checkState(){const g=this.api.selection.findParentTag("SPAN"),f=this.api.selection.findParentTag(this.parentTag);let v=g?this.handleLegacyWrapper(g,f):f;return this.button.classList.toggle(this.iconClasses.active,!!v),!!v}handleLegacyWrapper(g,f){return this.pluginType==="marker"?g:f&g}static get sanitize(){return{font:!0,span:!0,mark:!0}}clear(){this.picker=null,this.icon=null}}},442:(s,r,a)=>{a.r(r),a.d(r,{ColorPlugin:()=>f});class l extends HTMLElement{static get observedAttributes(){return["disabled","icon","loading","href","htmltype"]}constructor(){super(),this.attachShadow({mode:"open"}).innerHTML=`
        <style>
        :host{ 
            position:relative; 
            display:inline-flex; 
            padding: .25em .625em;
            box-sizing:border-box; 
            vertical-align: middle;
            line-height: 1.8;
            width: 5px;
            overflow:hidden; 
            align-items:center;
            justify-content: center;
            font-size: 14px; 
            color: var(--fontColor,#333);  
            border-radius: var(--borderRadius,.25em);
            background: var(--fontColor,#333); 
            transition:background .3s,box-shadow .3s,border-color .3s,color .3s;
        }
        :host([shape="circle"]){ 
            border-radius:50%; 
        }
        /*
        :host(:not([disabled]):active){
            z-index:1;
            transform:translateY(.1em);
        }
        */
        :host([disabled]),:host([loading]){
            pointer-events: none; 
            opacity:.6; 
        }
        :host([block]){ 
            display:flex; 
        }
        :host([disabled]:not([type])){ 
            background:rgba(0,0,0,.1); 
        }
        :host([disabled]) .btn,:host([loading]) .btn{ 
            cursor: not-allowed; 
            pointer-events: all; 
        }
        :host(:not([type="primary"]):not([type="danger"]):not([disabled]):hover),
        :host(:not([type="primary"]):not([type="danger"]):focus-within),
        :host([type="flat"][focus]){ 
            color:var(--themeColor,#42b983); 
            border-color: var(--themeColor,#42b983); 
        }
        :host(:not([type="primary"]):not([type="danger"])) .btn::after{ 
            background-image: radial-gradient(circle, var(--themeColor,#42b983) 10%, transparent 10.01%); 
        }
        :host([type="primary"]){ 
            color: #fff; 
            background:var(--themeBackground,var(--themeColor,#42b983));
        }
        :host([type="danger"]){ 
            color: #fff; 
            background:var(--themeBackground,var(--dangerColor,#ff7875));
        }
        :host([type="dashed"]){ 
            border-style:dashed 
        }
        :host([type="flat"]),:host([type="primary"]),:host([type="danger"]){ 
            border:0;
            padding: calc( .25em + 1px ) calc( .625em + 1px );
        }
        :host([type="flat"]) .btn::before{ 
            content:''; 
            position:absolute; 
            background:var(--themeColor,#42b983);
            pointer-events:none; 
            left:0; 
            right:0; 
            top:0; 
            bottom:0; 
            opacity:0; 
            transition:.3s;
        }
        :host([type="flat"]:not([disabled]):hover) .btn::before{ 
            opacity:.1 
        }
        :host(:not([disabled]):hover){ 
            z-index:1 
        }
        :host([type="flat"]:focus-within) .btn:before,
        :host([type="flat"][focus]) .btn:before{ 
            opacity:.2; 
        }
        :host(:focus-within){ 
            /*box-shadow: 0 0 10px rgba(0,0,0,0.1);*/ 
        }
        .btn{ 
            background:none; 
            outline:0; 
            border:0; 
            position: 
            absolute; 
            left:0; 
            top:0;
            width:100%;
            height:100%;
            padding:0;
            user-select: none;
            cursor: unset;
        }
        xy-loading{ 
            margin-right: 0.35em;  
        }
        ::-moz-focus-inner{
            border:0;
        }
        .btn::before{
            content: "";
            display: block;
            position: absolute;
            width: 100%;
            height: 100%;
            left:0;
            top:0;
            transition:.2s;
            background:#fff;
            opacity:0;
        }
        :host(:not([disabled]):active) .btn::before{ 
            opacity:.2;
        }
        .btn::after {
            content: "";
            display: block;
            position: absolute;
            width: 100%;
            height: 100%;
            left: var(--x,0); 
            top: var(--y,0);
            pointer-events: none;
            background-image: radial-gradient(circle, #fff 10%, transparent 10.01%);
            background-repeat: no-repeat;
            background-position: 50%;
            transform: translate(-50%,-50%) scale(10);
            opacity: 0;
            transition: transform .3s, opacity .8s;
        }
        .btn:not([disabled]):active::after {
            transform: translate(-50%,-50%) scale(0);
            opacity: .3;
            transition: 0s;
        }
        xy-icon{
            margin-right: 0.35em;
            transition: none;
        }
        :host(:empty) xy-icon{
            margin: auto;
        }
        :host(:empty){
            padding: .65em;
        }
        :host([type="flat"]:empty),:host([type="primary"]:empty){ 
            padding: calc( .65em + 1px );
        }
        ::slotted(xy-icon){
            transition: none;
        }
        :host([href]){
            cursor:pointer;
        }
        </style>
        <${this.href?"a":"button"} ${this.htmltype?'type="'+this.htmltype+'"':""} ${this.download&&this.href?'download="'+this.download+'"':""} ${this.href?'href="'+this.href+'" target="'+this.target+'" rel="'+this.rel+'"':""} class="btn" id="btn"></${this.href?"a":"button"}>${!this.loading&&this.icon&&this.icon!="null"?'<xy-icon id="icon" name='+this.icon+"></xy-icon>":""}<slot></slot>
        `}focus(){this.btn.focus()}get disabled(){return this.getAttribute("disabled")!==null}get toggle(){return this.getAttribute("toggle")!==null}get htmltype(){return this.getAttribute("htmltype")}get name(){return this.getAttribute("name")}get checked(){return this.getAttribute("checked")!==null}get href(){return this.getAttribute("href")}get target(){return this.getAttribute("target")||"_blank"}get rel(){return this.getAttribute("rel")}get download(){return this.getAttribute("download")}get icon(){return this.getAttribute("icon")}get loading(){return this.getAttribute("loading")!==null}set icon(u){this.setAttribute("icon",u)}set htmltype(u){this.setAttribute("htmltype",u)}set href(u){this.setAttribute("href",u)}set disabled(u){u===null||u===!1?this.removeAttribute("disabled"):this.setAttribute("disabled","")}set checked(u){u===null||u===!1?this.removeAttribute("checked"):this.setAttribute("checked","")}set loading(u){u===null||u===!1?this.removeAttribute("loading"):this.setAttribute("loading","")}connectedCallback(){this.btn=this.shadowRoot.getElementById("btn"),this.ico=this.shadowRoot.getElementById("icon"),this.load=document.createElement("xy-loading"),this.load.style.color="inherit",this.btn.addEventListener("mousedown",function(u){if(!this.disabled){const{left:w,top:b}=this.getBoundingClientRect();this.style.setProperty("--x",u.clientX-w+"px"),this.style.setProperty("--y",u.clientY-b+"px")}}),this.addEventListener("click",function(u){this.toggle&&(this.checked=!this.checked)}),this.btn.addEventListener("keydown",u=>{u.keyCode===13&&u.stopPropagation()}),this.disabled=this.disabled,this.loading=this.loading}attributeChangedCallback(u,w,b){u=="disabled"&&this.btn&&(b!==null?(this.btn.setAttribute("disabled","disabled"),this.href&&this.btn.removeAttribute("href")):(this.btn.removeAttribute("disabled"),this.href&&(this.btn.href=this.href))),u=="loading"&&this.btn&&(b!==null?(this.shadowRoot.prepend(this.load),this.btn.setAttribute("disabled","disabled")):(this.shadowRoot.removeChild(this.load),this.btn.removeAttribute("disabled"))),u=="icon"&&this.ico&&(this.ico.name=b),u=="href"&&this.btn&&(this.disabled||(this.btn.href=b)),u=="htmltype"&&this.btn&&(this.btn.type=b)}}customElements.get("xy-button")||customElements.define("xy-button",l);class c extends HTMLElement{static get observedAttributes(){return["disabled"]}constructor(){super(),this.attachShadow({mode:"open"}).innerHTML=`
        <style>
        :host {
            display:inline-flex;
        }
        ::slotted(xy-button:not(:first-of-type):not(:last-of-type)){
            border-radius:0;
        }
        ::slotted(xy-button){
            margin:0!important;
        }
        ::slotted(xy-button:not(:first-of-type)){
            margin-left:-1px!important;
        }
        ::slotted(xy-button[type]:not([type="dashed"]):not(:first-of-type)){
            margin-left:1px!important;
        }
        ::slotted(xy-button:first-of-type){
            border-top-right-radius: 0;
            border-bottom-right-radius: 0px;
        }
        ::slotted(xy-button:last-of-type){
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
        }
        </style>
        <slot></slot>
        `}get disabled(){return this.getAttribute("disabled")!==null}set disabled(u){u===null||u===!1?this.removeAttribute("disabled"):this.setAttribute("disabled","")}connectedCallback(){}attributeChangedCallback(u,w,b){}}customElements.get("xy-button-group")||customElements.define("xy-button-group",c);class d extends HTMLElement{static get observedAttributes(){return["open","title","oktext","canceltext","loading","type"]}constructor(u){super(),this.attachShadow({mode:"open"}).innerHTML=`
        <style>
        :host{
            position:absolute;
            display:flex;
            box-shadow: 2px 2px 15px rgba(0,0,0,0.15);
            box-sizing: border-box;
            transform:scale(0);
            opacity:0.5;
            border-radius: 3px;
            z-index:10;
            transition:.3s cubic-bezier(.645, .045, .355, 1);
            transform-origin:inherit;
            background:#fff;
            visibility:hidden;
        }
        .popcon-content{
            box-sizing: border-box;
            display:flex;
            width: max-content;
            padding: 0 15px;
            flex:1;
            flex-direction:column;
        }
        .popcon-title {
            line-height: 30px;
            padding: 15px 30px 0 0;
            font-weight: 700;
            font-size: 14px;
            color: #4c5161;
            user-select: none;
            cursor: default;
        }
        .popcon-body {
            flex: 1;
            padding: 5px 0 15px 0;
        }
        .popcon-footer {
            padding: 3px 0 15px 0;
            margin-top: -3px;
            text-align: right;
            white-space: nowrap;
        }
        .btn-close{
            position:absolute;
            right:10px;
            top:10px;
            border:0;
        }
        .popcon-footer xy-button {
            font-size: .8em;
            margin-left: .8em;
        }
        .popcon-type{
            display:flex;
            width:30px;
            height:30px;
            font-size:22px;
            margin: 15px -10px 0 15px;
        }
        /*
        :host(:not([type="confirm"])) .popcon-type,
        :host(:not([type="confirm"])) .popcon-footer,
        :host(:not([type])) .popcon-title,
        :host(:not([type])) .btn-close{
            display:none;
        }
        */
        :host([type="confirm"]){
            min-width:250px;
        }
        :host([type="confirm"]) .popcon-body{
            font-size:14px;
        }
        :host(:not([type])) .popcon-content,:host(:not([type])) .popcon-body{
            padding: 0;
        }
        </style>
            ${(u||this.type)==="confirm"?'<xy-icon id="popcon-type" class="popcon-type" name="question-circle" color="var(--waringColor,#faad14)"></xy-icon>':""}
            <div class="popcon-content">
                ${(u||this.type)!==null?'<div class="popcon-title" id="title">'+this.title+'</div><xy-button class="btn-close" id="btn-close" icon="close"></xy-button>':""}
                <div class="popcon-body">
                    <slot></slot>
                </div>
                ${(u||this.type)==="confirm"?'<div class="popcon-footer"><xy-button id="btn-cancel">'+this.canceltext+'</xy-button><xy-button id="btn-submit" type="primary">'+this.oktext+"</xy-button></div>":""}
            </div>
        `}get open(){return this.getAttribute("open")!==null}get stopfocus(){return this.getAttribute("stopfocus")!==null}get title(){return this.getAttribute("title")||"popcon"}get type(){return this.getAttribute("type")}get oktext(){return this.getAttribute("oktext")||"confirm"}get canceltext(){return this.getAttribute("canceltext")||"cancel"}get loading(){return this.getAttribute("loading")!==null}set title(u){this.setAttribute("title",u)}set type(u){u===null||u===!1?this.removeAttribute("type"):this.setAttribute("type",u)}set oktext(u){this.setAttribute("oktext",u)}set canceltext(u){this.setAttribute("canceltext",u)}set open(u){u===null||u===!1?(this.removeAttribute("open"),this.parentNode.removeAttribute("open")):(this.setAttribute("open",""),this.parentNode.setAttribute("open",""),this.loading&&(this.loading=!1))}set loading(u){u===null||u===!1?this.removeAttribute("loading"):this.setAttribute("loading","")}connectedCallback(){this.remove=!1,this.type&&(this.titles=this.shadowRoot.getElementById("title"),this.btnClose=this.shadowRoot.getElementById("btn-close")),this.type=="confirm"&&(this.btnCancel=this.shadowRoot.getElementById("btn-cancel"),this.btnSubmit=this.shadowRoot.getElementById("btn-submit")),this.addEventListener("transitionend",u=>{u.propertyName==="transform"&&this.open&&(this.type=="confirm"&&this.btnSubmit.focus(),this.type=="pane"&&this.btnClose.focus(),this.dispatchEvent(new CustomEvent("open")))}),this.addEventListener("transitionend",u=>{u.propertyName!=="transform"||this.open||(this.remove&&this.parentNode.removeChild(this),this.dispatchEvent(new CustomEvent("close")))}),this.addEventListener("click",u=>{u.target.closest("[autoclose]")&&(this.open=!1,window.xyActiveElement.focus())}),this.type&&this.btnClose.addEventListener("click",()=>{this.open=!1,window.xyActiveElement.focus()}),this.type=="confirm"&&(this.btnCancel.addEventListener("click",async()=>{this.dispatchEvent(new CustomEvent("cancel")),this.open=!1,window.xyActiveElement.focus()}),this.btnSubmit.addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("submit")),this.loading||(this.open=!1,window.xyActiveElement.focus())}))}attributeChangedCallback(u,w,b){u=="open"&&this.shadowRoot&&b==null&&this.stopfocus,u=="loading"&&this.shadowRoot&&(this.btnSubmit.loading=b!==null),u=="title"&&this.titles&&b!==null&&(this.titles.innerHTML=b),u=="oktext"&&this.btnSubmit&&b!==null&&(this.btnSubmit.innerHTML=b),u=="canceltext"&&this.btnCancel&&b!==null&&(this.btnCancel.innerHTML=b)}}customElements.get("xy-popcon")||customElements.define("xy-popcon",d);class h extends HTMLElement{static get observedAttributes(){return["title","oktext","canceltext","loading","type"]}constructor(){super(),this.attachShadow({mode:"open"}).innerHTML=`
        <style>
        :host {
            display:inline-block;
            position:relative;
            overflow:visible;
        }
        :host([dir="top"]) ::slotted(xy-popcon){
            bottom:100%;
            left:50%;
            transform:translate(-50%,-10px) scale(0);
            transform-origin: center bottom;
        }
        :host([dir="top"]) ::slotted(xy-popcon[open]),
        :host([dir="top"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host([dir="top"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){
            transform:translate(-50%,-10px) scale(1);
        }
        :host([dir="right"]) ::slotted(xy-popcon){
            left:100%;
            top:50%;
            transform:translate(10px,-50%) scale(0);
            transform-origin: left;
        }
        :host([dir="right"]) ::slotted(xy-popcon[open]),
        :host([dir="right"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host([dir="right"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){
            transform:translate(10px,-50%) scale(1);
        }
        :host([dir="bottom"]) ::slotted(xy-popcon){
            top:100%;
            left:50%;
            transform:translate(-50%,10px) scale(0);
            transform-origin: center top;
        }
        :host([dir="bottom"]) ::slotted(xy-popcon[open]),
        :host([dir="bottom"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host([dir="bottom"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){
            transform:translate(-50%,10px) scale(1);
        }
        :host([dir="left"]) ::slotted(xy-popcon){
            right:100%;
            top:50%;
            transform:translate(-10px,-50%) scale(0);
            transform-origin: right;
        }
        :host([dir="left"]) ::slotted(xy-popcon[open]),
        :host([dir="left"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host([dir="left"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){
            transform:translate(-10px,-50%) scale(1);
        }
        :host([dir="lefttop"]) ::slotted(xy-popcon){
            right:100%;
            top:0;
            transform:translate(-10px) scale(0);
            transform-origin: right top;
        }
        :host([dir="lefttop"]) ::slotted(xy-popcon[open]),
        :host([dir="lefttop"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host([dir="lefttop"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){
            transform:translate(-10px) scale(1);
        }
        :host([dir="leftbottom"]) ::slotted(xy-popcon){
            right:100%;
            bottom:0;
            transform:translate(-10px) scale(0);
            transform-origin: right bottom;
        }
        :host([dir="leftbottom"]) ::slotted(xy-popcon[open]),
        :host([dir="leftbottom"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host([dir="leftbottom"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){
            transform:translate(-10px) scale(1);
        }
        :host([dir="topleft"]) ::slotted(xy-popcon){
            bottom:100%;
            left:0;
            transform:translate(0,-10px) scale(0);
            transform-origin: left bottom;
        }
        :host([dir="topleft"]) ::slotted(xy-popcon[open]),
        :host([dir="topleft"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host([dir="topleft"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){
            transform:translate(0,-10px) scale(1);
        }
        :host([dir="topright"]) ::slotted(xy-popcon){
            bottom:100%;
            right:0;
            transform:translate(0,-10px) scale(0);
            transform-origin: right bottom;
        }
        :host([dir="topright"]) ::slotted(xy-popcon[open]),
        :host([dir="topright"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host([dir="topright"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){
            transform:translate(0,-10px) scale(1);
        }
        :host([dir="righttop"]) ::slotted(xy-popcon){
            left:100%;
            top:0;
            transform:translate(10px) scale(0);
            transform-origin: left top;
        }
        :host([dir="righttop"]) ::slotted(xy-popcon[open]),
        :host([dir="righttop"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host([dir="righttop"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){
            transform:translate(10px) scale(1);
        }
        :host([dir="rightbottom"]) ::slotted(xy-popcon){
            left:100%;
            bottom:0;
            transform:translate(10px) scale(0);
            transform-origin: left bottom;
        }
        :host([dir="rightbottom"]) ::slotted(xy-popcon[open]),
        :host([dir="rightbottom"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host([dir="rightbottom"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){
            transform:translate(10px) scale(1);
        }
        :host([dir="bottomleft"]) ::slotted(xy-popcon),
        :host(:not([dir])) ::slotted(xy-popcon){
            left:0;
            top:100%;
            transform:translate(0,10px) scale(0);
            transform-origin: left top;
        }
        :host(:not([dir])) ::slotted(xy-popcon[open]),
        :host(:not([dir])[trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host(:not([dir])[trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon),
        :host([dir="bottomleft"]) ::slotted(xy-popcon[open]),
        :host([dir="bottomleft"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host([dir="bottomleft"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){
            transform:translate(0,10px) scale(1);
        }
        :host([dir="bottomright"]) ::slotted(xy-popcon){
            right:0;
            top:100%;
            transform:translate(0,10px) scale(0);
            transform-origin: right top;
        }
        :host([dir="bottomright"]) ::slotted(xy-popcon[open]),
        :host([dir="bottomright"][trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host([dir="bottomright"][trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){
            transform:translate(0,10px) scale(1);
        }
        :host([trigger="contextmenu"]) ::slotted(xy-popcon){
            right:auto;
            bottom:auto;
            left:var(--x,0);
            top:var(--y,100%);
            transform-origin: left top;
            transform:translate(5px,5px) scale(0);
            transition: .15s;
        }
        :host([trigger="contextmenu"]) ::slotted(xy-popcon[open]){
            transform:translate(5px,5px) scale(1);
        }
        :host ::slotted(xy-popcon[open]),
        :host([trigger="hover"]:not([disabled]):hover) ::slotted(xy-popcon),
        :host([trigger="focus"]:not([disabled]):focus-within) ::slotted(xy-popcon){
            opacity:1;
            visibility:visible;
        }
        slot{
            border-radius: inherit;
        }
        </style>
        <slot></slot>
        `}get title(){return this.getAttribute("title")||"popcon"}get trigger(){return this.getAttribute("trigger")}get disabled(){return this.getAttribute("disabled")!==null}get type(){return this.getAttribute("type")}get accomplish(){return this.getAttribute("accomplish")!==null}get content(){return this.getAttribute("content")}get oktext(){return this.getAttribute("oktext")}get canceltext(){return this.getAttribute("canceltext")}get dir(){return this.getAttribute("dir")}get loading(){return this.getAttribute("loading")!==null}set dir(u){this.setAttribute("dir",u)}set title(u){this.setAttribute("title",u)}set type(u){this.setAttribute("type",u)}set oktext(u){this.setAttribute("oktext",u)}set canceltext(u){this.setAttribute("canceltext",u)}set loading(u){u===null||u===!1?this.removeAttribute("loading"):this.setAttribute("loading","")}set disabled(u){u===null||u===!1?this.removeAttribute("disabled"):this.setAttribute("disabled","")}show(u){if(this.popcon=this.querySelector("xy-popcon"),this.disabled)(this.popcon||this).dispatchEvent(new CustomEvent("submit"));else if(this.popcon||(this.popcon=new d(this.type),this.popcon.type=this.type,this.appendChild(this.popcon),this.popcon.title=this.title||"popover",this.popcon.innerHTML=this.content||"",this.type=="confirm"&&(this.popcon.oktext=this.oktext||"confirm",this.popcon.canceltext=this.canceltext||"cancel",this.popcon.onsubmit=()=>this.dispatchEvent(new CustomEvent("submit")),this.popcon.oncancel=()=>this.dispatchEvent(new CustomEvent("cancel")))),this.trigger==="contextmenu"){const{x:w,y:b}=this.getBoundingClientRect();this.popcon.style.setProperty("--x",u.clientX-w+"px"),this.popcon.style.setProperty("--y",u.clientY-b+"px"),this.popcon.open=!0}else(u.path||u.composedPath&&u.composedPath()).includes(this.popcon)||(window.xyActiveElement=document.activeElement,this.accomplish?this.popcon.open=!0:this.popcon.open=!this.popcon.open);return this.popcon}connectedCallback(){this.popcon=this.querySelector("xy-popcon"),this.trigger&&this.trigger!=="click"||this.addEventListener("click",this.show),this.trigger==="contextmenu"&&this.addEventListener("contextmenu",u=>{u.preventDefault(),(u.path||u.composedPath&&u.composedPath()).includes(this.popcon)||this.show(u)}),document.addEventListener("mousedown",u=>{const w=u.path||u.composedPath&&u.composedPath();(this.popcon&&!w.includes(this.popcon)&&!this.popcon.loading&&!w.includes(this.children[0])||this.trigger==="contextmenu"&&!w.includes(this.popcon)&&u.which=="1")&&(this.popcon.open=!1)})}attributeChangedCallback(u,w,b){u=="loading"&&this.popcon&&(this.popcon.loading=b!==null),u=="title"&&this.popcon&&b!==null&&(this.popcon.title=b),u=="oktext"&&this.popcon&&b!==null&&(this.popcon.oktext=b),u=="canceltext"&&this.popcon&&b!==null&&(this.popcon.canceltext=b)}}customElements.get("xy-popover")||customElements.define("xy-popover",h);var p=a(697);const g=["#ff1300","#EC7878","#9C27B0","#673AB7","#3F51B5","#0070FF","#03A9F4","#00BCD4","#4CAF50","#8BC34A","#CDDC39","#FFE500","#FFBF00","#FF9800","#795548","#9E9E9E","#5A5A5A","#FFF"];class f extends HTMLElement{static get observedAttributes(){return["disabled","dir"]}constructor(u){super();const w=this.attachShadow({mode:"open"});this.colorCollections=u.colorCollections||g,this.onColorPicked=u.onColorPicked,this.defaulColor=(0,p.handleCSSVariables)(u.defaultColor||this.colorCollections[0]),this.pluginType=u.type,this.hasCustomPicker=u.hasCustomPicker,this.customColor=(0,p.getCustomColorCache)(this.pluginType),w.innerHTML=`
        <style>
        :host{
            display:inline-block;
            width:15px;
            font-size:14px;
            border: none;
        }
        :host([block]){
            display:block;
        }
        :host([disabled]){
            pointer-events:none;
        }
        
        :host(:focus-within) xy-popover,:host(:hover) xy-popover{ 
            z-index: 2;
        }
        input[type="color"]{
            -webkit-appearance: none;
            outline: none;
            border: none;
        }
        xy-popover{
            width: 12px;
            height:35px;
            padding-right: 1px;
        }
        xy-popover:hover {
            border-radius: 0 5px 5px 0;
            background: rgba(203, 203, 203, 0.49);
        }
        .color-btn {
            border: 1px solid #cab9b9;
            margin: 18px 3px 2px 3px;
            width: 7px;
            height: 7px;
            opacity: 0.9;
            padding: 1px 0 1px 0;
            color: var(--themeColor, #42b983);
            background: var(--themeColor, #42b983);
            font-weight: bolder;
            border-radius: 2px;
        }
        .color-btn:hover {
            opacity: 1;
            z-index: auto;
        }
        xy-popover{
            display:block;
        }
        xy-popcon{
            position: fixed;
            min-width:100%;
        }
        #custom-picker {
            position: relative;
            top: -1px;
            background-color: rgb(250, 250, 250);
            border-color: rgb(255 118 21) rgb(245 80 80 / 74%) #89c1c9 #95d5b6;
            border-width: 3px;
            border-radius: 8px;
            height: 18px;
        }
        .pop-footer{
            display:flex;
            justify-content:flex-end;
            padding:0 .8em .8em;
        }
        .pop-footer xy-button{
            font-size: .8em;
            margin-left: .8em;
        }
        .color-btn::before{
            content:'';
            position:absolute;
            left:5px;
            top:5px;
            right:5px;
            bottom:5px;
            z-index:-1;
            background: linear-gradient(45deg, #ddd 25%,transparent 0,transparent 75%,#ddd 0 ), linear-gradient(45deg, #ddd 25%, transparent 0, transparent 75%, #ddd 0);
            background-position: 0 0,5px 5px;
            background-size: 10px 10px;
        }
        .color-sign {
           max-width: 220px;
           padding: 10px;
           display:grid;
           cursor: default;
           grid-template-columns: repeat(auto-fit, minmax(15px, 1fr));
           grid-gap: 10px;     
        }
        .color-sign>button {
            position: relative;
            width: 16px;
            height: 16px;
            border-radius: 6px;
            border: 1px solid #b8b9b49e;
            outline: 0;
            opacity: 0.9;
        }
        .color-sign>button:hover {
            cursor: pointer;
            opacity: 1;
        }
        .color-section {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .color-fire-btn {
            font-size: 17px;
            font-weight: bold;
            height: 28px;
            padding-top: 8px;
            padding-right: 1px;
            margin-left: 3px;
            padding-left: 3px;
            border-radius: 5px 0 0 5px;
        }
        .color-fire-btn:hover {
            font-size: 17px;
            font-weight: bold;
            background: rgba(203, 203, 203, 0.49);
            border-radius: 5px 0 0 5px;
        }
        </style>
        <section class="color-section">
            <xy-popover id="popover" ${this.dir?"dir='"+this.dir+"'":""}>
                <xy-button class="color-btn" id="color-btn" ${this.disabled?"disabled":""}>_</xy-button>
                <xy-popcon id="popcon">
                    <div class="color-sign" id="colors">
                        ${this.hasCustomPicker?'<button id="custom-picker" class="rainbow-mask"/>':""}
                        ${this.colorCollections.map(b=>'<button class="color-cube" style="background-color:'+b+'" data-color='+b+"></button>").join("")}
                    </div>
                </xy-popcon>
            </xy-popover>
        </section>`}focus(){this.colorBtn.focus()}connectedCallback(){this.popoverEle=this.shadowRoot.getElementById("popover"),this.popcon=this.shadowRoot.getElementById("popcon"),this.colorBtn=this.shadowRoot.getElementById("color-btn"),this.colors=this.shadowRoot.getElementById("colors"),this.colors.addEventListener("click",u=>{const w=u.target.closest("button");w&&w.id!=="custom-picker"&&(this.nativeclick=!0,this.value=(0,p.handleCSSVariables)(w.dataset.color),this.onColorPicked(this.value))}),this.popoverEle.addEventListener("click",()=>this.closeConverter()),this.hasCustomPicker&&this.setupCustomPicker(),this.value=this.defaultvalue}closeConverter(){if(document.getElementsByClassName(p.CONVERTER_PANEL)[0]){const u=document.getElementsByClassName(p.CONVERTER_BTN)[0];u==null||u.click()}}disconnectedCallback(){this.pickerInput&&document.body.removeChild(this.pickerInput)}setupCustomPicker(){let u=!1;this.customPicker=this.shadowRoot.getElementById("custom-picker");const w=this.customPicker;w.style.backgroundColor=this.customColor,this.customPicker.addEventListener("click",b=>{if(u)return void(u=!1);this.pickerInput&&document.body.removeChild(this.pickerInput),this.pickerInput=document.createElement("input");const L=this.pickerInput,B=this.popcon.getBoundingClientRect();L.setAttribute("type","color"),L.value=this.customColor,L.style.position="fixed",L.style.left=`${B.x+3}px`,L.style.top=`${B.y+10}px`,L.style.pointerEvents="none",L.style.zIndex="999",L.style.opacity="0",L.addEventListener("input",(0,p.throttle)(E=>{this.nativeclick=!0,this.value=(0,p.handleCSSVariables)(E.target.value),this.onColorPicked(this.value),(0,p.setCustomColorCache)(this.value,this.pluginType),w.style.backgroundColor=this.value,u=!0,w.click()},30)),document.body.appendChild(L),setTimeout(()=>{L.focus(),L.click()},0)})}get defaultvalue(){return this.defaulColor}get value(){return this.$value}get type(){return this.getAttribute("type")}get disabled(){return this.getAttribute("disabled")!==null}get dir(){return this.getAttribute("dir")}set dir(u){this.setAttribute("dir",u)}set disabled(u){u===null||u===!1?this.removeAttribute("disabled"):this.setAttribute("disabled","")}set defaultvalue(u){this.setAttribute("defaultvalue",u)}set value(u){u&&(this.$value=u,this.colorBtn.style.setProperty("--themeColor",this.nativeclick?(0,p.setDefaultColorCache)(u,this.pluginType):(0,p.getDefaultColorCache)(u,this.pluginType)),this.nativeclick?(this.nativeclick=!1,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value}}))):this.colorPane?this.colorPane.value=this.value:this.defaultvalue=this.value)}attributeChangedCallback(u,w,b){u=="disabled"&&this.colorBtn&&(b!=null?this.colorBtn.setAttribute("disabled","disabled"):this.colorBtn.removeAttribute("disabled")),u=="dir"&&this.popoverEle&&b!=null&&(this.popoverEle.dir=b)}}customElements.get("xy-color-picker")||customElements.define("xy-color-picker",f)},697:(s,r,a)=>{a.r(r),a.d(r,{CONVERTER_BTN:()=>v,CONVERTER_PANEL:()=>u,getCustomColorCache:()=>f,getDefaultColorCache:()=>p,handleCSSVariables:()=>c,setCustomColorCache:()=>g,setDefaultColorCache:()=>h,throttle:()=>d});const l="editor-js-text-color-cache";function c(w){if(function(b){return(typeof(L=b)=="string"||L instanceof String)&&b.includes("--");var L}(w)){const b=function(L){const B=/\((.*?)\)/.exec(L);if(B)return B[1]}(w);return function(L){return window.getComputedStyle(document.documentElement).getPropertyValue(L)}(b)}return w}function d(w,b){let L;return(...B)=>{L||(L=setTimeout(()=>{w(...B),L=null},b))}}function h(w,b){return sessionStorage.setItem(`${l}-${b}`,JSON.stringify(w)),w}function p(w,b){const L=sessionStorage.getItem(`${l}-${b}`);return L?JSON.parse(L):w}function g(w,b){sessionStorage.setItem(`${l}-${b}-custom`,JSON.stringify(w))}function f(w){const b=sessionStorage.getItem(`${l}-${w}-custom`);return b?JSON.parse(b):null}const v="ce-inline-toolbar__dropdown",u="ce-conversion-toolbar--showed"}},o={};function n(s){var r=o[s];if(r!==void 0)return r.exports;var a=o[s]={id:s,exports:{}};return e[s](a,a.exports,n),a.exports}return n.d=(s,r)=>{for(var a in r)n.o(r,a)&&!n.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:r[a]})},n.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r),n.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},n.nc=void 0,n(138)})())})(nn);var Ps=nn.exports;const to=He(Ps);(function(){try{if(typeof document<"u"){var i=document.createElement("style");i.appendChild(document.createTextNode(".cdx-list{margin:0;padding-left:40px;outline:none}.cdx-list__item{padding:5.5px 0 5.5px 3px;line-height:1.6em}.cdx-list--unordered{list-style:disc}.cdx-list--ordered{list-style:decimal}.cdx-list-settings{display:flex}.cdx-list-settings .cdx-settings-button{width:50%}")),document.head.appendChild(i)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const eo='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',Fs='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>';class Hs{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:eo,title:"List"}}constructor({data:t,config:e,api:o,readOnly:n}){this._elements={wrapper:null},this.api=o,this.readOnly=n,this.settings=[{name:"unordered",label:this.api.i18n.t("Unordered"),icon:eo,default:e.defaultStyle==="unordered"||!1},{name:"ordered",label:this.api.i18n.t("Ordered"),icon:Fs,default:e.defaultStyle==="ordered"||!0}],this._data={style:this.settings.find(s=>s.default===!0).name,items:[]},this.data=t}render(){return this._elements.wrapper=this.makeMainTag(this._data.style),this._data.items.length?this._data.items.forEach(t=>{this._elements.wrapper.appendChild(this._make("li",this.CSS.item,{innerHTML:t}))}):this._elements.wrapper.appendChild(this._make("li",this.CSS.item)),this.readOnly||this._elements.wrapper.addEventListener("keydown",t=>{const[e,o]=[13,8];switch(t.keyCode){case e:this.getOutofList(t);break;case o:this.backspace(t);break}},!1),this._elements.wrapper}save(){return this.data}static get conversionConfig(){return{export:t=>t.items.join(". "),import:t=>({items:[t],style:"unordered"})}}static get sanitize(){return{style:{},items:{br:!0}}}renderSettings(){return this.settings.map(t=>({...t,isActive:this._data.style===t.name,closeOnActivate:!0,onActivate:()=>this.toggleTune(t.name)}))}onPaste(t){const e=t.detail.data;this.data=this.pasteHandler(e)}static get pasteConfig(){return{tags:["OL","UL","LI"]}}makeMainTag(t){const e=t==="ordered"?this.CSS.wrapperOrdered:this.CSS.wrapperUnordered,o=t==="ordered"?"ol":"ul";return this._make(o,[this.CSS.baseBlock,this.CSS.wrapper,e],{contentEditable:!this.readOnly})}toggleTune(t){const e=this.makeMainTag(t);for(;this._elements.wrapper.hasChildNodes();)e.appendChild(this._elements.wrapper.firstChild);this._elements.wrapper.replaceWith(e),this._elements.wrapper=e,this._data.style=t}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-list",wrapperOrdered:"cdx-list--ordered",wrapperUnordered:"cdx-list--unordered",item:"cdx-list__item"}}set data(t){t||(t={}),this._data.style=t.style||this.settings.find(o=>o.default===!0).name,this._data.items=t.items||[];const e=this._elements.wrapper;e&&e.parentNode.replaceChild(this.render(),e)}get data(){this._data.items=[];const t=this._elements.wrapper.querySelectorAll(`.${this.CSS.item}`);for(let e=0;e<t.length;e++)t[e].innerHTML.replace("<br>"," ").trim()&&this._data.items.push(t[e].innerHTML);return this._data}_make(t,e=null,o={}){const n=document.createElement(t);Array.isArray(e)?n.classList.add(...e):e&&n.classList.add(e);for(const s in o)n[s]=o[s];return n}get currentItem(){let t=window.getSelection().anchorNode;return t.nodeType!==Node.ELEMENT_NODE&&(t=t.parentNode),t.closest(`.${this.CSS.item}`)}getOutofList(t){const e=this._elements.wrapper.querySelectorAll("."+this.CSS.item);if(e.length<2)return;const o=e[e.length-1],n=this.currentItem;n===o&&!o.textContent.trim().length&&(n.parentElement.removeChild(n),this.api.blocks.insert(),this.api.caret.setToBlock(this.api.blocks.getCurrentBlockIndex()),t.preventDefault(),t.stopPropagation())}backspace(t){const e=this._elements.wrapper.querySelectorAll("."+this.CSS.item),o=e[0];o&&e.length<2&&!o.innerHTML.replace("<br>"," ").trim()&&t.preventDefault()}selectItem(t){t.preventDefault();const e=window.getSelection(),o=e.anchorNode.parentNode,n=o.closest("."+this.CSS.item),s=new Range;s.selectNodeContents(n),e.removeAllRanges(),e.addRange(s)}pasteHandler(t){const{tagName:e}=t;let o;switch(e){case"OL":o="ordered";break;case"UL":case"LI":o="unordered"}const n={style:o,items:[]};if(e==="LI")n.items=[t.innerHTML];else{const s=Array.from(t.querySelectorAll("LI"));n.items=s.map(r=>r.innerHTML).filter(r=>!!r.trim())}return n}}function et(i,t,e={}){const o=document.createElement(i);Array.isArray(t)?o.classList.add(...t):t&&o.classList.add(t);for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}function oo(i){const t=i.getBoundingClientRect();return{y1:Math.floor(t.top+window.pageYOffset),x1:Math.floor(t.left+window.pageXOffset),x2:Math.floor(t.right+window.pageXOffset),y2:Math.floor(t.bottom+window.pageYOffset)}}function no(i,t){const e=oo(i),o=oo(t);return{fromTopBorder:o.y1-e.y1,fromLeftBorder:o.x1-e.x1,fromRightBorder:e.x2-o.x2,fromBottomBorder:e.y2-o.y2}}function zs(i,t){const e=i.getBoundingClientRect(),{width:o,height:n,x:s,y:r}=e,{clientX:a,clientY:l}=t;return{width:o,height:n,x:a-s,y:l-r}}function Kt(i,t){return t.parentNode.insertBefore(i,t)}function he(i,t=!0){const e=document.createRange(),o=window.getSelection();e.selectNodeContents(i),e.collapse(t),o.removeAllRanges(),o.addRange(e)}class ot{constructor({items:t}){this.items=t,this.wrapper=void 0,this.itemEls=[]}static get CSS(){return{popover:"tc-popover",popoverOpened:"tc-popover--opened",item:"tc-popover__item",itemHidden:"tc-popover__item--hidden",itemConfirmState:"tc-popover__item--confirm",itemIcon:"tc-popover__item-icon",itemLabel:"tc-popover__item-label"}}render(){return this.wrapper=et("div",ot.CSS.popover),this.items.forEach((t,e)=>{const o=et("div",ot.CSS.item),n=et("div",ot.CSS.itemIcon,{innerHTML:t.icon}),s=et("div",ot.CSS.itemLabel,{textContent:t.label});o.dataset.index=e,o.appendChild(n),o.appendChild(s),this.wrapper.appendChild(o),this.itemEls.push(o)}),this.wrapper.addEventListener("click",t=>{this.popoverClicked(t)}),this.wrapper}popoverClicked(t){const e=t.target.closest(`.${ot.CSS.item}`);if(!e)return;const o=e.dataset.index,n=this.items[o];if(n.confirmationRequired&&!this.hasConfirmationState(e)){this.setConfirmationState(e);return}n.onClick()}setConfirmationState(t){t.classList.add(ot.CSS.itemConfirmState)}clearConfirmationState(t){t.classList.remove(ot.CSS.itemConfirmState)}hasConfirmationState(t){return t.classList.contains(ot.CSS.itemConfirmState)}get opened(){return this.wrapper.classList.contains(ot.CSS.popoverOpened)}open(){this.items.forEach((t,e)=>{typeof t.hideIf=="function"&&this.itemEls[e].classList.toggle(ot.CSS.itemHidden,t.hideIf())}),this.wrapper.classList.add(ot.CSS.popoverOpened)}close(){this.wrapper.classList.remove(ot.CSS.popoverOpened),this.itemEls.forEach(t=>{this.clearConfirmationState(t)})}}const io='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',js='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 9.16666L18.2167 12.5M18.2167 12.5L14.8833 15.8333M18.2167 12.5H10.05C9.16594 12.5 8.31809 12.1488 7.69297 11.5237C7.06785 10.8986 6.71666 10.0507 6.71666 9.16666"/></svg>',Us='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.9167 14.9167L11.5833 18.25M11.5833 18.25L8.25 14.9167M11.5833 18.25L11.5833 10.0833C11.5833 9.19928 11.9345 8.35143 12.5596 7.72631C13.1848 7.10119 14.0326 6.75 14.9167 6.75"/></svg>',$s='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.13333 14.9167L12.4667 18.25M12.4667 18.25L15.8 14.9167M12.4667 18.25L12.4667 10.0833C12.4667 9.19928 12.1155 8.35143 11.4904 7.72631C10.8652 7.10119 10.0174 6.75 9.13333 6.75"/></svg>',qs='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 15.8333L18.2167 12.5M18.2167 12.5L14.8833 9.16667M18.2167 12.5L10.05 12.5C9.16595 12.5 8.31811 12.8512 7.69299 13.4763C7.06787 14.1014 6.71667 14.9493 6.71667 15.8333"/></svg>',Ws='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.41 9.66H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 9.66H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.31 14.36H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 14.36H14.59"/></svg>',so='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',Vs='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',Xs='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M14 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><path stroke="currentColor" stroke-width="2" d="M5 14H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',Ys='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>';class kt{constructor({api:t,items:e,onOpen:o,onClose:n,cssModifier:s=""}){this.api=t,this.items=e,this.onOpen=o,this.onClose=n,this.cssModifier=s,this.popover=null,this.wrapper=this.createToolbox()}static get CSS(){return{toolbox:"tc-toolbox",toolboxShowed:"tc-toolbox--showed",toggler:"tc-toolbox__toggler"}}get element(){return this.wrapper}createToolbox(){const t=et("div",[kt.CSS.toolbox,this.cssModifier?`${kt.CSS.toolbox}--${this.cssModifier}`:""]);t.dataset.mutationFree="true";const e=this.createPopover(),o=this.createToggler();return t.appendChild(o),t.appendChild(e),t}createToggler(){const t=et("div",kt.CSS.toggler,{innerHTML:Ws});return t.addEventListener("click",()=>{this.togglerClicked()}),t}createPopover(){return this.popover=new ot({items:this.items}),this.popover.render()}togglerClicked(){this.popover.opened?(this.popover.close(),this.onClose()):(this.popover.open(),this.onOpen())}show(t){const e=t();Object.entries(e).forEach(([o,n])=>{this.wrapper.style[o]=n}),this.wrapper.classList.add(kt.CSS.toolboxShowed)}hide(){this.popover.close(),this.wrapper.classList.remove(kt.CSS.toolboxShowed)}}function Zs(i,t){let e=0;return function(...o){const n=new Date().getTime();if(!(n-e<i))return e=n,t(...o)}}const Qs='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>';function Ks(i){let t,e;return{c(){t=q("span"),e=wt(i[3]),X(t,"class","condition-input svelte-1a25ld1")},m(o,n){ct(o,t,n),z(t,e)},p(o,n){n&8&&yo(e,o[3])},d(o){o&&rt(t)}}}function Js(i){let t,e,o,n,s,r,a,l,c;return{c(){t=q("span"),e=wt(i[3]),o=dt(),n=wt(or),s=q("span"),r=wt(i[0]),a=wt(nr),X(s,"class","condition-input-edit svelte-1a25ld1"),X(s,"contenteditable","true"),X(t,"class","condition-input svelte-1a25ld1")},m(d,h){ct(d,t,h),z(t,e),z(t,o),z(t,n),z(t,s),z(s,r),z(t,a),l||(c=yt(s,"input",i[5]),l=!0)},p(d,h){h&8&&yo(e,d[3]),h&1&&fn(r,d[0])},d(d){d&&rt(t),l=!1,c()}}}function ro(i){let t,e,o;return{c(){t=q("span"),X(t,"class","close-icon svelte-1a25ld1"),X(t,"role","button"),X(t,"tabindex","0")},m(n,s){ct(n,t,s),t.innerHTML=Qs,e||(o=[yt(t,"click",function(){$t(i[2])&&i[2].apply(this,arguments)}),yt(t,"keydown",function(){$t(i[2])&&i[2].apply(this,arguments)})],e=!0)},p(n,s){i=n},d(n){n&&rt(t),e=!1,Dt(o)}}}function Gs(i){let t,e,o,n,s,r;function a(h,p){return!h[4]&&h[3]!=="ELSE"?Js:Ks}let l=a(i),c=l(i),d=i[2]&&ro(i);return{c(){t=q("span"),e=q("span"),e.textContent=`${tr}`,o=dt(),c.c(),n=dt(),s=q("span"),s.textContent=`${er}`,r=dt(),d&&d.c(),X(t,"class","condition-container svelte-1a25ld1"),X(t,"data-statement",i[3]),Ue(t,"inline",i[1])},m(h,p){ct(h,t,p),z(t,e),z(t,o),c.m(t,null),z(t,n),z(t,s),z(t,r),d&&d.m(t,null)},p(h,[p]){l===(l=a(h))&&c?c.p(h,p):(c.d(1),c=l(h),c&&(c.c(),c.m(t,n))),h[2]?d?d.p(h,p):(d=ro(h),d.c(),d.m(t,null)):d&&(d.d(1),d=null),p&8&&X(t,"data-statement",h[3]),p&2&&Ue(t,"inline",h[1])},i:it,o:it,d(h){h&&rt(t),c.d(),d&&d.d()}}}const tr="[",er="]",or="(",nr=")";function ir(i,t,e){let{inline:o=!1}=t,{conditionChanged:n=d=>{}}=t,{onRemove:s=null}=t,{statement:r="IF"}=t,{condition:a=r==="IF"?"condicion == resultado":"item in items"}=t,{isEnd:l=!1}=t;const c=d=>{e(0,a=d.target.textContent),n(a)};return i.$$set=d=>{"inline"in d&&e(1,o=d.inline),"conditionChanged"in d&&e(6,n=d.conditionChanged),"onRemove"in d&&e(2,s=d.onRemove),"statement"in d&&e(3,r=d.statement),"condition"in d&&e(0,a=d.condition),"isEnd"in d&&e(4,l=d.isEnd)},[a,o,s,r,l,c,n]}class Bt extends Zt{constructor(t){super(),Yt(this,t,ir,Gs,Xt,{inline:1,conditionChanged:6,onRemove:2,statement:3,condition:0,isEnd:4})}}const ae='<?xml version="1.0" encoding="utf-8"?><svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg"><path d="M 177.425 161.982 C 187.727 161.982 194.166 150.829 189.015 141.907 C 186.625 137.766 182.205 135.215 177.425 135.215 C 167.122 135.215 160.682 146.368 165.834 155.29 C 168.225 159.432 172.643 161.982 177.425 161.982 Z M 222.036 148.599 C 222.036 166.89 211.05 182.615 195.268 189.473 L 195.268 238.435 C 205.753 232.357 217.965 228.899 230.957 228.899 L 284.491 228.899 C 304.177 228.899 320.18 212.895 320.18 193.21 L 320.18 189.473 C 304.399 182.615 293.414 166.89 293.414 148.599 C 293.414 123.951 313.378 103.987 338.025 103.987 C 362.673 103.987 382.637 123.951 382.637 148.599 C 382.637 166.89 371.652 182.615 355.87 189.473 L 355.87 193.21 C 355.87 232.636 323.917 264.588 284.491 264.588 L 230.957 264.588 C 211.273 264.588 195.268 280.593 195.268 300.278 L 195.268 304.013 C 211.05 310.872 222.036 326.598 222.036 344.889 C 222.036 369.537 202.072 389.501 177.425 389.501 C 152.776 389.501 132.813 369.537 132.813 344.889 C 132.813 326.598 143.798 310.872 159.58 304.013 L 159.58 300.278 L 159.58 189.473 C 143.798 182.615 132.813 166.89 132.813 148.599 C 132.813 123.951 152.776 103.987 177.425 103.987 C 202.072 103.987 222.036 123.951 222.036 148.599 Z M 351.409 148.599 C 351.409 138.296 340.255 131.857 331.334 137.008 C 327.194 139.399 324.642 143.818 324.642 148.599 C 324.642 158.901 335.795 165.34 344.717 160.189 C 348.858 157.799 351.409 153.379 351.409 148.599 Z M 177.425 358.272 C 187.727 358.272 194.166 347.12 189.015 338.197 C 186.625 334.056 182.205 331.506 177.425 331.506 C 167.122 331.506 160.682 342.658 165.834 351.581 C 168.225 355.721 172.643 358.272 177.425 358.272 Z" style="" transform="matrix(1, 0, 0, 1, 5.684341886080802e-14, 5.684341886080802e-14)"/></svg>',F={wrapper:"tc-wrap",wrapperReadOnly:"tc-wrap--readonly",table:"tc-table",row:"tc-row",withHeadings:"tc-table--heading",rowSelected:"tc-row--selected",cell:"tc-cell",cellSelected:"tc-cell--selected",addRow:"tc-add-row",addColumn:"tc-add-column",ifCondition:"tc-if-condition",deleteCellButton:"tc-delete-cell-button",cellContent:"cell-content"};class sr{constructor(t,e,o,n){this.readOnly=t,this.api=e,this.data=o,this.config=n,this.wrapper=null,this.table=null,this.toolboxColumn=this.createColumnToolbox(),this.toolboxRow=this.createRowToolbox(),this.createTableWrapper(),this.hoveredRow=0,this.hoveredColumn=0,this.selectedRow=0,this.selectedColumn=0,this.tunes={withHeadings:!1},this.resize(),this.fill(),this.focusedCell={row:0,column:0},this.documentClicked=s=>{const r=s.target.closest(`.${F.table}`)!==null,a=s.target.closest(`.${F.wrapper}`)===null;(r||a)&&this.hideToolboxes();const c=s.target.closest(`.${F.addRow}`),d=s.target.closest(`.${F.addColumn}`);c&&c.parentNode===this.wrapper?(this.addRow(void 0,!0),this.hideToolboxes()):d&&d.parentNode===this.wrapper&&(this.addColumn(void 0,!0),this.hideToolboxes())},this.readOnly||this.bindEvents()}getWrapper(){return this.wrapper}bindEvents(){document.addEventListener("click",this.documentClicked),this.table.addEventListener("mousemove",Zs(150,t=>this.onMouseMoveInTable(t)),{passive:!0}),this.table.onkeypress=t=>this.onKeyPressListener(t),this.table.addEventListener("keydown",t=>this.onKeyDownListener(t)),this.table.addEventListener("focusin",t=>this.focusInTableListener(t))}createColumnToolbox(){return new kt({api:this.api,cssModifier:"column",items:[{label:this.api.i18n.t("Add column to left"),icon:Us,onClick:()=>{this.addColumn(this.selectedColumn,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add column to right"),icon:$s,onClick:()=>{this.addColumn(this.selectedColumn+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete column"),icon:io,hideIf:()=>this.numberOfColumns===1,confirmationRequired:!0,onClick:()=>{this.deleteColumn(this.selectedColumn),this.hideToolboxes()}}],onOpen:()=>{this.selectColumn(this.hoveredColumn),this.hideRowToolbox()},onClose:()=>{this.unselectColumn()}})}createRowToolbox(){return new kt({api:this.api,cssModifier:"row",items:[{label:this.api.i18n.t("Add row above"),icon:qs,onClick:()=>{this.addRow(this.selectedRow,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add row below"),icon:js,onClick:()=>{this.addRow(this.selectedRow+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("IF"),icon:ae,onClick:()=>{this.addConditionToRow(this.selectedRow)}},{label:this.api.i18n.t("Delete row"),icon:io,hideIf:()=>this.numberOfRows===1,confirmationRequired:!0,onClick:()=>{this.deleteRow(this.selectedRow),this.hideToolboxes()}}],onOpen:()=>{this.selectRow(this.hoveredRow),this.hideColumnToolbox()},onClose:()=>{this.unselectRow()}})}moveCursorToNextRow(){this.focusedCell.row!==this.numberOfRows?(this.focusedCell.row+=1,this.focusCell(this.focusedCell)):(this.addRow(),this.focusedCell.row+=1,this.focusCell(this.focusedCell),this.updateToolboxesPosition(0,0))}getCell(t,e){return this.table.querySelectorAll(`.${F.row}:nth-child(${t}) .${F.cell}`)[e-1]}getRow(t){return this.table.querySelector(`.${F.row}:nth-child(${t})`)}getRowByCell(t){return t.parentElement}getRowFirstCell(t){return t.querySelector(`.${F.cell}:first-child`)}setCellContent(t,e,o){const n=this.getCell(t,e);n?n.querySelector(".cell-content").innerHTML=o:console.log("CELL NOT FOUND")}addColumn(t=-1,e=!1){let o=this.numberOfColumns;for(let n=1;n<=this.numberOfRows;n++){let s;const r=this.createCell();if(t>0&&t<=o?(s=this.getCell(n,t),Kt(r,s)):s=this.getRow(n).appendChild(r),n===1){const a=this.getCell(n,t>0?t:o+1);a&&e&&he(a)}}this.addHeadingAttrToFirstRow()}addColumnToRow(t,e=!1){const o=this.createCell();this.getRow(t+1).appendChild(o),this.addHeadingAttrToFirstRow()}addRow(t=-1,e=!1,o=!0){let n,s=et("div",F.row);this.tunes.withHeadings&&this.removeHeadingAttrFromFirstRow();let r=this.numberOfColumns;if(t>0&&t<=this.numberOfRows){let a=this.getRow(t);n=Kt(s,a)}else n=this.table.appendChild(s);if(o&&this.fillRow(n,r),this.tunes.withHeadings&&this.addHeadingAttrToFirstRow(),o){const a=this.getRowFirstCell(n);a&&e&&he(a)}return n}addConditionToRow(t,e=null){let o=this.getRow(t);const n=document.createElement("span"),s=document.createElement("span");new Bt({target:n,props:{statement:"IF",condition:e||"condicion == resultado",inline:!1,onRemove:()=>{n.remove(),s.remove(),o.classList.remove("tc-if-condition")},conditionChanged:r=>{n.setAttribute("condition",r)}}}),n.classList.add("if"),n.setAttribute("contenteditable","false"),Kt(n,o.firstElementChild),o.classList.add("tc-if-condition"),s.classList.add("endif"),new Bt({target:s,props:{inline:!0,statement:"ENDIF",isEnd:!0}}),s.setAttribute("contenteditable","false"),Kt(s,o.lastElementChild),he(o)}deleteColumn(t){for(let e=1;e<=this.numberOfRows;e++){const o=this.getCell(e,t);if(!o)return;o.remove()}}deleteRow(t){this.getRow(t).remove(),this.addHeadingAttrToFirstRow()}createTableWrapper(){if(this.wrapper=et("div",F.wrapper),this.table=et("div",F.table),this.readOnly&&this.wrapper.classList.add(F.wrapperReadOnly),this.wrapper.appendChild(this.toolboxRow.element),this.wrapper.appendChild(this.toolboxColumn.element),this.wrapper.appendChild(this.table),!this.readOnly){const t=et("div",F.addColumn,{innerHTML:so}),e=et("div",F.addRow,{innerHTML:so});this.wrapper.appendChild(t),this.wrapper.appendChild(e)}}computeInitialSize(){const t=this.data&&this.data.content,e=Array.isArray(t),o=e?t.length:!1,n=e?t.length:void 0,s=o?t[0].length:void 0,r=Number.parseInt(this.config&&this.config.rows),a=Number.parseInt(this.config&&this.config.cols),l=!isNaN(r)&&r>0?r:void 0,c=!isNaN(a)&&a>0?a:void 0;return{rows:n||l||2,cols:s||c||2}}computeInitialSizeOfRow(t){const e=this.data&&this.data.content,s=(Array.isArray(e)?e.length:!1)?e[t].length:void 0,r=Number.parseInt(this.config&&this.config.cols),a=!isNaN(r)&&r>0?r:void 0;return s||a||2}resize(){const{rows:t,cols:e}=this.computeInitialSize();let o=0;for(let n=0;n<t;n++){if(this.isConditionRow(n)){o+=1;continue}this.addRow(-1,!1,!1);const s=this.computeInitialSizeOfRow(n);for(let r=0;r<s;r++)this.addColumnToRow(n-o)}this.findAndApplyConditionsToTable()}isConditionRow(t){const e=this.data&&this.data.content;return!!["if","endif"].find(n=>e[t][0]===n)}findAndApplyConditionsToTable(){const t=this.data&&this.data.content;let e=0;t.forEach((o,n)=>{this.isConditionRow(n)||(e+=1),o[0]==="if"&&this.addConditionToRow(e+1,o[1])})}fill(){const t=this.data;let e=0;if(t&&t.content)for(let o=0;o<t.content.length;o++)if(this.isConditionRow(o))e+=1;else{const n=o-e;for(let s=0;s<t.content[o].length;s++)this.setCellContent(n+1,s+1,this.cleanHTML(t.content[o][s]))}}cleanHTML(t){return t.replaceAll(`
`,"<br>")}fillRow(t,e){for(let o=1;o<=e;o++){const n=this.createCell();t.appendChild(n)}}createCell(){const t=et("div",F.cell,{contentEditable:!this.readOnly});return this.addCellContent(t),this.addDeleteCellButton(t),t}addCellContent(t){const e=et("div",F.cellContent,{contentEditable:!this.readOnly});t.appendChild(e)}addDeleteCellButton(t){const e=et("div",F.deleteCellButton,{contentEditable:this.readOnly});t.prepend(e),e.addEventListener("click",()=>{t.style.display="none"})}get numberOfRows(){return this.table.childElementCount}get numberOfColumns(){return this.numberOfRows?this.table.querySelectorAll(`.${F.row}:first-child .${F.cell}`).length:0}get isColumnMenuShowing(){return this.selectedColumn!==0}get isRowMenuShowing(){return this.selectedRow!==0}onMouseMoveInTable(t){const{row:e,column:o}=this.getHoveredCell(t);this.hoveredColumn=o,this.hoveredRow=e,this.updateToolboxesPosition()}onKeyPressListener(t){if(t.key==="Enter"){if(t.shiftKey)return!0;const e=this.focusedCellElem;for(let o=0;o<2;o++){const n=document.createElement("br");e.querySelector(`.${F.cellContent}`).appendChild(n)}document.execCommand("selectAll",!1,null),document.getSelection().collapseToEnd()}return t.key!=="Enter"}onKeyDownListener(t){t.key==="Tab"&&t.stopPropagation()}focusInTableListener(t){const e=t.target,o=this.getRowByCell(e);this.focusedCell={row:Array.from(this.table.querySelectorAll(`.${F.row}`)).indexOf(o)+1,column:Array.from(o.querySelectorAll(`.${F.cell}`)).indexOf(e)+1}}hideToolboxes(){this.hideRowToolbox(),this.hideColumnToolbox(),this.updateToolboxesPosition()}hideRowToolbox(){this.unselectRow(),this.toolboxRow.hide()}hideColumnToolbox(){this.unselectColumn(),this.toolboxColumn.hide()}focusCell(){this.focusedCellElem.focus()}get focusedCellElem(){const{row:t,column:e}=this.focusedCell;return this.getCell(t,e)}updateToolboxesPosition(t=this.hoveredRow,e=this.hoveredColumn){this.isColumnMenuShowing||e>0&&e<=this.numberOfColumns&&this.toolboxColumn.show(()=>({left:`calc((100% - var(--cell-size)) / (${this.numberOfColumns} * 2) * (1 + (${e} - 1) * 2))`})),this.isRowMenuShowing||t>0&&t<=this.numberOfRows&&this.toolboxRow.show(()=>{const o=this.getRow(t),{fromTopBorder:n}=no(this.table,o),{height:s}=o.getBoundingClientRect();return{top:`${Math.ceil(n+s/2)}px`}})}setHeadingsSetting(t){this.tunes.withHeadings=t,t?(this.table.classList.add(F.withHeadings),this.addHeadingAttrToFirstRow()):(this.table.classList.remove(F.withHeadings),this.removeHeadingAttrFromFirstRow())}addHeadingAttrToFirstRow(){for(let t=1;t<=this.numberOfColumns;t++){let e=this.getCell(1,t);e&&e.setAttribute("heading",this.api.i18n.t("Heading"))}}removeHeadingAttrFromFirstRow(){for(let t=1;t<=this.numberOfColumns;t++){let e=this.getCell(1,t);e&&e.removeAttribute("heading")}}selectRow(t){const e=this.getRow(t);e&&(this.selectedRow=t,e.classList.add(F.rowSelected))}unselectRow(){if(this.selectedRow<=0)return;const t=this.table.querySelector(`.${F.rowSelected}`);t&&t.classList.remove(F.rowSelected),this.selectedRow=0}selectColumn(t){for(let e=1;e<=this.numberOfRows;e++){const o=this.getCell(e,t);o&&o.classList.add(F.cellSelected)}this.selectedColumn=t}unselectColumn(){if(this.selectedColumn<=0)return;let t=this.table.querySelectorAll(`.${F.cellSelected}`);Array.from(t).forEach(e=>{e.classList.remove(F.cellSelected)}),this.selectedColumn=0}getHoveredCell(t){let e=this.hoveredRow,o=this.hoveredColumn;const{width:n,height:s,x:r,y:a}=zs(this.table,t);return r>=0&&(o=this.binSearch(this.numberOfColumns,l=>this.getCell(1,l),({fromLeftBorder:l})=>r<l,({fromRightBorder:l})=>r>n-l)),a>=0&&(e=this.binSearch(this.numberOfRows,l=>this.getCell(l,1),({fromTopBorder:l})=>a<l,({fromBottomBorder:l})=>a>s-l)),{row:e||this.hoveredRow,column:o||this.hoveredColumn}}binSearch(t,e,o,n){let s=0,r=t+1,a=0,l;for(;s<r-1&&a<10;){l=Math.ceil((s+r)/2);const c=e(l),d=no(this.table,c);if(o(d))r=l;else if(n(d))s=l;else break;a++}return l}getData(){const t=[];for(let e=1;e<=this.numberOfRows;e++){const o=this.table.querySelector(`.${F.row}:nth-child(${e})`),n=Array.from(o.querySelectorAll(`.${F.cell}`));if(n.every(c=>!c.querySelector(`.${F.cellContent}`).textContent.trim()))continue;const r=o.querySelector(".if");r&&t.push(["if",r.querySelector(".condition-input-edit").textContent]);const a=c=>c.style.display==="none",l=c=>c.replaceAll("<br>",`
`);t.push(n.filter(c=>!a(c)).map(c=>l(c.querySelector(`.${F.cellContent}`).innerHTML))),r&&t.push(["endif",""])}return t}destroy(){document.removeEventListener("click",this.documentClicked)}}class rr{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor({data:t,config:e,api:o,readOnly:n}){this.api=o,this.readOnly=n,this.config=e,this.data={withHeadings:this.getConfig("withHeadings",!1,t),content:t&&t.content?t.content:[]},this.table=null}static get toolbox(){return{icon:Ys,title:"Table"}}render(){return this.table=new sr(this.readOnly,this.api,this.data,this.config),this.container=et("div",this.api.styles.block),this.container.appendChild(this.table.getWrapper()),this.table.setHeadingsSetting(this.data.withHeadings),this.container}renderSettings(){return[{label:this.api.i18n.t("With headings"),icon:Vs,isActive:this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!0,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.api.i18n.t("Without headings"),icon:Xs,isActive:!this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!1,this.table.setHeadingsSetting(this.data.withHeadings)}}]}save(){const t=this.table.getData();return{withHeadings:this.data.withHeadings,content:t}}destroy(){this.table.destroy()}getConfig(t,e=void 0,o=void 0){const n=this.data||o;return n?n[t]?n[t]:e:this.config&&this.config[t]?this.config[t]:e}static get pasteConfig(){return{tags:["TABLE","TR","TH","TD"]}}onPaste(t){const e=t.detail.data,o=e.querySelector(":scope > thead, tr:first-of-type th"),s=Array.from(e.querySelectorAll("tr")).map(r=>Array.from(r.querySelectorAll("th, td")).map(l=>l.innerHTML));this.data={withHeadings:o!==null,content:s},this.table.wrapper&&this.table.wrapper.replaceWith(this.render())}}const ar=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
  <path d="M 382.342 140.187 C 388.132 140.187 392.871 144.925 392.871 150.716 L 392.871 361.153 L 389.58 356.876 L 300.087 241.063 C 297.126 237.181 292.455 234.942 287.586 234.942 C 282.716 234.942 278.108 237.181 275.084 241.063 L 220.466 311.735 L 200.396 283.637 C 197.436 279.491 192.698 277.058 187.566 277.058 C 182.432 277.058 177.696 279.491 174.734 283.703 L 122.093 357.401 L 119.129 361.482 L 119.129 361.284 L 119.129 150.716 C 119.129 144.925 123.868 140.187 129.658 140.187 L 382.342 140.187 Z M 129.658 108.601 C 106.431 108.601 87.543 127.487 87.543 150.716 L 87.543 361.284 C 87.543 384.513 106.431 403.399 129.658 403.399 L 382.342 403.399 C 405.569 403.399 424.457 384.513 424.457 361.284 L 424.457 150.716 C 424.457 127.487 405.569 108.601 382.342 108.601 L 129.658 108.601 Z M 182.301 234.942 C 206.615 234.942 221.813 208.622 209.654 187.566 C 204.014 177.791 193.585 171.774 182.301 171.774 C 157.988 171.774 142.789 198.095 154.947 219.151 C 160.59 228.924 171.018 234.942 182.301 234.942 Z" style="" transform="matrix(1, 0, 0, 1, 7.105427357601002e-15, 0)"/>
</svg>`,lr=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg">
  <path d="M 115.79 160.328 C 115.79 139.22 132.951 122.059 154.059 122.059 L 421.941 122.059 C 443.049 122.059 460.21 139.22 460.21 160.328 L 460.21 351.672 C 460.21 372.78 443.049 389.941 421.941 389.941 L 154.059 389.941 C 132.951 389.941 115.79 372.78 115.79 351.672 L 115.79 160.328 Z M 235.38 227.298 C 243.871 227.298 251.525 230.946 256.787 236.866 C 262.049 242.785 271.138 243.264 277.057 238.002 C 282.977 232.74 283.456 223.651 278.194 217.731 C 267.729 206.011 252.422 198.597 235.44 198.597 C 203.748 198.597 178.037 224.309 178.037 256 C 178.037 287.692 203.748 313.403 235.44 313.403 C 252.422 313.403 267.729 305.989 278.194 294.269 C 283.456 288.349 282.977 279.32 277.057 273.998 C 271.138 268.677 262.109 269.215 256.787 275.134 C 251.525 281.054 243.871 284.702 235.38 284.702 C 219.534 284.702 206.678 271.846 206.678 256 C 206.678 240.154 219.534 227.298 235.38 227.298 Z M 321.485 256 C 321.485 240.154 334.341 227.298 350.187 227.298 C 358.678 227.298 366.332 230.946 371.594 236.866 C 376.856 242.785 385.945 243.264 391.864 238.002 C 397.784 232.74 398.262 223.651 393 217.731 C 382.536 206.011 367.229 198.597 350.247 198.597 C 318.555 198.597 292.843 224.309 292.843 256 C 292.843 287.692 318.555 313.403 350.247 313.403 C 367.229 313.403 382.536 305.989 393 294.269 C 398.262 288.349 397.784 279.32 391.864 273.998 C 385.945 268.677 376.916 269.215 371.594 275.134 C 366.332 281.054 358.678 284.702 350.187 284.702 C 334.341 284.702 321.485 271.846 321.485 256 Z" style="" transform="matrix(1, 0, 0, 1, 7.105427357601002e-15, 0)"/>
</svg>`,cr=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
  <path d="M 350.169 330.174 L 410.209 270.134 C 418.026 262.317 418.026 249.621 410.209 241.803 L 350.169 181.763 C 342.351 173.945 329.655 173.945 321.838 181.763 C 314.02 189.581 314.02 202.277 321.838 210.095 L 347.73 235.987 L 164.17 235.987 L 190.062 210.095 C 197.88 202.277 197.88 189.581 190.062 181.763 C 182.245 173.945 169.549 173.945 161.731 181.763 L 101.691 241.803 C 93.874 249.621 93.874 262.317 101.691 270.134 L 161.731 330.174 C 169.549 337.992 182.245 337.992 190.062 330.174 C 197.88 322.357 197.88 309.661 190.062 301.843 L 164.233 276.013 L 347.792 276.013 L 321.9 301.905 C 314.082 309.723 314.082 322.419 321.9 330.237 C 329.718 338.054 342.414 338.054 350.231 330.237 L 350.169 330.174 Z" style="" transform="matrix(1, 0, 0, 1, 7.105427357601002e-15, 0)"/>
</svg>`,dr=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
  <path d="M 117.862 403.316 C 104.244 403.316 95.733 388.574 102.542 376.781 C 105.702 371.308 111.542 367.936 117.862 367.936 C 131.479 367.936 139.99 382.678 133.182 394.471 C 130.022 399.944 124.182 403.316 117.862 403.316 Z M 170.931 367.936 C 184.548 367.936 193.059 382.678 186.251 394.471 C 183.091 399.944 177.251 403.316 170.931 403.316 C 157.313 403.316 148.802 388.574 155.611 376.781 C 158.771 371.308 164.611 367.936 170.931 367.936 Z M 170.931 155.66 C 184.548 155.66 193.059 170.402 186.251 182.195 C 183.091 187.668 177.251 191.04 170.931 191.04 C 157.313 191.04 148.802 176.298 155.611 164.505 C 158.771 159.032 164.611 155.66 170.931 155.66 Z M 170.931 297.178 C 157.313 297.178 148.802 282.436 155.611 270.643 C 158.771 265.17 164.611 261.798 170.931 261.798 C 184.548 261.798 193.059 276.54 186.251 288.333 C 183.091 293.806 177.251 297.178 170.931 297.178 Z M 277.069 367.936 C 290.687 367.936 299.198 382.678 292.389 394.471 C 289.229 399.944 283.389 403.316 277.069 403.316 C 263.452 403.316 254.941 388.574 261.749 376.781 C 264.909 371.308 270.749 367.936 277.069 367.936 Z M 277.069 191.04 C 263.452 191.04 254.941 176.298 261.749 164.505 C 264.909 159.032 270.749 155.66 277.069 155.66 C 290.687 155.66 299.198 170.402 292.389 182.195 C 289.229 187.668 283.389 191.04 277.069 191.04 Z M 277.069 261.798 C 290.687 261.798 299.198 276.54 292.389 288.333 C 289.229 293.806 283.389 297.178 277.069 297.178 C 263.452 297.178 254.941 282.436 261.749 270.643 C 264.909 265.17 270.749 261.798 277.069 261.798 Z M 224 403.316 C 210.382 403.316 201.872 388.574 208.68 376.781 C 211.84 371.308 217.68 367.936 224 367.936 C 237.618 367.936 246.128 382.678 239.32 394.471 C 236.16 399.944 230.32 403.316 224 403.316 Z M 224 155.66 C 237.618 155.66 246.128 170.402 239.32 182.195 C 236.16 187.668 230.32 191.04 224 191.04 C 210.382 191.04 201.872 176.298 208.68 164.505 C 211.84 159.032 217.68 155.66 224 155.66 Z M 224 297.178 C 210.382 297.178 201.872 282.436 208.68 270.643 C 211.84 265.17 217.68 261.798 224 261.798 C 237.618 261.798 246.128 276.54 239.32 288.333 C 236.16 293.806 230.32 297.178 224 297.178 Z M 330.138 367.936 C 343.756 367.936 352.267 382.678 345.458 394.471 C 342.298 399.944 336.458 403.316 330.138 403.316 C 316.521 403.316 308.01 388.574 314.818 376.781 C 317.978 371.308 323.818 367.936 330.138 367.936 Z M 330.138 155.66 C 343.756 155.66 352.267 170.402 345.458 182.195 C 342.298 187.668 336.458 191.04 330.138 191.04 C 316.521 191.04 308.01 176.298 314.818 164.505 C 317.978 159.032 323.818 155.66 330.138 155.66 Z M 117.862 191.04 C 104.244 191.04 95.733 176.298 102.542 164.505 C 105.702 159.032 111.542 155.66 117.862 155.66 C 131.479 155.66 139.99 170.402 133.182 182.195 C 130.022 187.668 124.182 191.04 117.862 191.04 Z M 330.138 261.798 C 343.756 261.798 352.267 276.54 345.458 288.333 C 342.298 293.806 336.458 297.178 330.138 297.178 C 316.521 297.178 308.01 282.436 314.818 270.643 C 317.978 265.17 323.818 261.798 330.138 261.798 Z M 117.862 297.178 C 104.244 297.178 95.733 282.436 102.542 270.643 C 105.702 265.17 111.542 261.798 117.862 261.798 C 131.479 261.798 139.99 276.54 133.182 288.333 C 130.022 293.806 124.182 297.178 117.862 297.178 Z M 224 314.867 C 237.618 314.867 246.128 329.609 239.32 341.402 C 236.16 346.875 230.32 350.247 224 350.247 C 210.382 350.247 201.872 335.505 208.68 323.712 C 211.84 318.239 217.68 314.867 224 314.867 Z M 330.138 350.247 C 316.521 350.247 308.01 335.505 314.818 323.712 C 317.978 318.239 323.818 314.867 330.138 314.867 C 343.756 314.867 352.267 329.609 345.458 341.402 C 342.298 346.875 336.458 350.247 330.138 350.247 Z M 117.862 314.867 C 131.479 314.867 139.99 329.609 133.182 341.402 C 130.022 346.875 124.182 350.247 117.862 350.247 C 104.244 350.247 95.733 335.505 102.542 323.712 C 105.702 318.239 111.542 314.867 117.862 314.867 Z M 330.138 244.109 C 316.521 244.109 308.01 229.367 314.818 217.574 C 317.978 212.101 323.818 208.729 330.138 208.729 C 343.756 208.729 352.267 223.471 345.458 235.264 C 342.298 240.737 336.458 244.109 330.138 244.109 Z M 117.862 208.729 C 131.479 208.729 139.99 223.471 133.182 235.264 C 130.022 240.737 124.182 244.109 117.862 244.109 C 104.244 244.109 95.733 229.367 102.542 217.574 C 105.702 212.101 111.542 208.729 117.862 208.729 Z M 224 244.109 C 210.382 244.109 201.872 229.367 208.68 217.574 C 211.84 212.101 217.68 208.729 224 208.729 C 237.618 208.729 246.128 223.471 239.32 235.264 C 236.16 240.737 230.32 244.109 224 244.109 Z" style=""/>
</svg>`,hr='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.043 8.265l3.183-3.183h-2.924L4.75 10.636v2.923l4.15-4.15v2.351l-2.158 2.159H8.9v2.137H4.7c-1.215 0-2.2-.936-2.2-2.09v-8.93c0-1.154.985-2.09 2.2-2.09h10.663l.033-.033.034.034c1.178.04 2.12.96 2.12 2.089v3.23H15.3V5.359l-2.906 2.906h-2.35zM7.951 5.082H4.75v3.201l3.201-3.2zm5.099 7.078v3.04h4.15v-3.04h-4.15zm-1.1-2.137h6.35c.635 0 1.15.489 1.15 1.092v5.13c0 .603-.515 1.092-1.15 1.092h-6.35c-.635 0-1.15-.489-1.15-1.092v-5.13c0-.603.515-1.092 1.15-1.092z"/></svg>';class ur{constructor({data:t,config:e,api:o}){this.api=o,this.blockIndex=this.api.blocks.getCurrentBlockIndex()+1,this.CSS={baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive,wrapper:"cdx-simple-image",imageHolder:"cdx-simple-image__picture",caption:"cdx-simple-image__caption"},this.nodes={wrapper:null,imageHolder:null,image:null,caption:null},this.data={url:t.url||"",caption:t.caption||"",hiddenCaption:t.withBorder!==void 0?t.hiddenCaption:!1,withBorder:t.withBorder!==void 0?t.withBorder:!1,withBackground:t.withBackground!==void 0?t.withBackground:!1,stretched:t.stretched!==void 0?t.stretched:!1},this.settings=[{name:"withBorder",icon:dr},{name:"stretched",icon:cr},{name:"withBackground",icon:hr},{name:"hiddenCaption",icon:lr}]}static get toolbox(){return{title:"Image",icon:ar}}render(){let t=this._make("div",[this.CSS.baseClass,this.CSS.wrapper]),e=this._make("input",[],{type:"file"}),o=this._make("div",this.CSS.loading),n=this._make("div",this.CSS.imageHolder),s=this._make("img"),r=this._make("div",[this.CSS.input,this.CSS.caption],{contentEditable:"true",innerHTML:this.data.caption||""});return this.nodes.imageHolder=n,this.nodes.wrapper=t,this.nodes.image=s,this.nodes.caption=r,this.nodes.loader=o,this.nodes.loadButton=e,r.dataset.placeholder="Enter a caption",s.onload=()=>{t.classList.remove(this.CSS.loading),n.appendChild(s),t.appendChild(n),t.appendChild(r),o.remove(),e!==null&&(e.remove(),e=null),this.nodes.loader=null,this._acceptTuneView()},s.onerror=a=>{console.log("Failed to load an image",a)},this.data.url?(t.appendChild(o),s.src=this.data.url):(t.appendChild(e),e.onchange=a=>{const l=a.target.files[0],c=URL.createObjectURL(l);this.data={url:c,caption:l.name},e.remove(),e=null}),t}save(t){let e=t.querySelector("img"),o=t.querySelector("."+this.CSS.input);return e?Object.assign(this.data,{url:e.src,caption:o.innerHTML}):this.data}static get sanitize(){return{url:{},withBorder:{},withBackground:{},stretched:{},caption:{br:!0}}}onPaste(t){switch(t.type){case"tag":const e=t.detail.data;this.data={url:e.src};break;case"pattern":const{data:o}=t.detail;this.data={url:o};break;case"file":const{file:n}=t.detail;this.data={url:URL.createObjectURL(n),caption:n.name};break}this.nodes.loadButton.remove(),this.nodes.loadButton=null}get data(){return this._data}set data(t){this._data=Object.assign({},this.data,t),this.nodes.image&&(this.nodes.image.src=this.data.url),this.nodes.caption&&(this.nodes.caption.innerHTML=this.data.caption)}static get pasteConfig(){return{patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png)$/i},tags:["img"],files:{mimeTypes:["image/*"]}}}renderSettings(){let t=document.createElement("div");return this.settings.forEach(e=>{let o=document.createElement("div");o.classList.add(this.CSS.settingsButton),o.innerHTML=e.icon,o.addEventListener("click",()=>{this._toggleTune(e.name),o.classList.toggle(this.CSS.settingsButtonActive)}),o.classList.toggle(this.CSS.settingsButtonActive,this.data[e.name]),t.appendChild(o)}),t}removed(){this.data.url&&this.data.url.startsWith("blob:")&&URL.revokeObjectURL(this.data.url)}_make(t,e=null,o={}){let n=document.createElement(t);Array.isArray(e)?n.classList.add(...e):e&&n.classList.add(e);for(let s in o)n[s]=o[s];return n}_toggleTune(t){this.data[t]=!this.data[t],this._acceptTuneView()}_acceptTuneView(){this.settings.forEach(t=>{this.nodes.imageHolder.classList.toggle(this.CSS.imageHolder+"--"+t.name.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`),!!this.data[t.name]),t.name==="stretched"&&this.api.blocks.stretchBlock(this.blockIndex,!!this.data.stretched)})}}class ao{constructor({api:t,config:e}){this.api=t,this.type=e.type}static get isTune(){return!0}render(){let t=document.createElement("div");const e=document.createElement("div");return e.classList.add("ce-popover-item"),e.innerHTML=`
            <div class="ce-popover-item__icon">
                ${ae}
            </div>
            <div class="ce-popover-item__title">
                ${this.type==="if"?"IF":"FOR"}
            </div>
            `,e.addEventListener("click",()=>{const o=this.api.blocks.getCurrentBlockIndex(),n=this.type==="if"?"IfCondition":"ForCondition";this.api.blocks.insert(n,{skipEndBlock:!0},{},o,!0),setTimeout(()=>{const s=this.type==="if"?"IfEndCondition":"ForEndCondition";this.api.blocks.insert(s,{},{},o+2,!0)},10)}),t.appendChild(e),t}}class pr{constructor(){this.preventDestroyFunctToFireFlag=!1}setPreventDestroyFunctToFire(t){this.preventDestroyFunctToFireFlag=t}setApi(t){this.api=t}}const st=new pr;class lo{constructor({api:t,data:e={skipEndBlock:!1,type:"",condition:""},config:o={type:"if"}}){this.api=t,st.setApi(t),this.skipEndBlock=e.skipEndBlock||e.type,this.type=o.type,this.condition=e.condition||this.getDefaultCondition()}static get toolbox(){return{icon:ae}}getDefaultCondition(){if(this.type==="if")return"condicion == resultado";if(this.type==="for")return"item in items"}render(){const t=document.createElement("div");return new Bt({target:t,props:{statement:this.type.toUpperCase(),condition:this.condition,conditionChanged:e=>{this.condition=e},onRemove:()=>{const e=this.api.blocks.getCurrentBlockIndex();this.api.blocks.delete(e)}}}),this.addEndBlock(),t}addEndBlock(){if(this.skipEndBlock)return;const t=this.api.blocks.getCurrentBlockIndex()+1,e=this.type==="if"?"IfEndCondition":"ForEndCondition";this.api.blocks.insert(e,{type:this.type==="if"?"ENDIF":"ENDFOR"},{},t,!0)}destroy(){st.preventDestroyFunctToFireFlag||setTimeout(()=>{this.deleteNextEndBlock()})}deleteNextEndBlock(){st.setPreventDestroyFunctToFire(!0);const t=this.getNextEndBlockIndex();Number.isInteger(t)&&this.api.blocks.delete(t),st.setPreventDestroyFunctToFire(!1)}getNextEndBlockIndex(){const t=this.api.blocks.getBlocksCount();for(let e=0;e<t;e++){const o=this.api.blocks.getBlockByIndex(e),n=this.type==="if"?"IfEndCondition":"ForEndCondition";if((o==null?void 0:o.name)===n)return e;this.type==="if"&&((o==null?void 0:o.name)==="ElseCondition"||(o==null?void 0:o.name)==="IfElseCondition")&&this.api.blocks.delete(e)}}save(){return{type:this.type.toUpperCase(),condition:this.condition}}}class co{static get toolbox(){return{title:"ELSE",icon:ae}}constructor({api:t,data:e={condition:""},config:o={type:"else"}}){this.api=t,this.type=o.type,this.condition=e.condition||this.getDefaultCondition()}getDefaultCondition(){return"condicion == resultado"}render(){const t=document.createElement("div");return new Bt({target:t,props:{statement:this.type.toUpperCase(),condition:this.condition,conditionChanged:e=>{this.condition=e},onRemove:()=>{const e=this.api.blocks.getCurrentBlockIndex();this.api.blocks.delete(e)}}}),t}moved(t){const{fromIndex:e,toIndex:o}=t.detail,n=this.api.blocks.getBlocksCount();let s=null;for(let a=0;a<n;a++){const l=this.api.blocks.getBlockByIndex(a);if((l==null?void 0:l.name)==="IfCondition"){s=a;break}}if(s&&s>o){setTimeout(()=>{this.api.blocks.move(e,o)},10);return}let r=null;for(let a=n-1;a>=0;a--){const l=this.api.blocks.getBlockByIndex(a);if((l==null?void 0:l.name)==="IfEndCondition"){r=a;break}}if(r&&r<o){setTimeout(()=>{this.api.blocks.move(e,o)},10);return}}destroy(){}save(){return{type:"ELSE",condition:this.condition}}}class ho{constructor({data:t,api:e,config:o}){this.api=e,this.type=t.type||o.type}render(){const t=document.createElement("div");return new Bt({target:t,props:{statement:this.type,isEnd:!0}}),t}destroy(){st.preventDestroyFunctToFireFlag||setTimeout(()=>this.deletePreviousStartBlock(),0)}deletePreviousStartBlock(){st.setPreventDestroyFunctToFire(!0);const t=this.getPreviousStartBlockIndex();Number.isInteger(t)&&this.api.blocks.delete(t),st.setPreventDestroyFunctToFire(!1)}getPreviousStartBlockIndex(){const t=this.api.blocks.getBlocksCount();for(let e=0;e<t;e++){const o=this.api.blocks.getBlockByIndex(e),n=this.type==="ENDIF"?"IfCondition":"ForCondition";if((o==null?void 0:o.name)===n)return e}}save(){return{type:"ENDIF"}}}const fr=i=>{const t=i.blocks.getBlocksCount();for(let e=0;e<t;e++){const o=i.blocks.getBlockByIndex(e);(o.name==="header"||o.name==="paragraph")&&o.holder.querySelectorAll(".condition-start").forEach(n=>{const s=n.firstElementChild.getAttribute("data-statement"),r=n.querySelector(".condition-input-edit").textContent,a=Array.from(n.classList).find(h=>h.includes("condition-id-")),{ifConditionContainer:l,endifConditionContainer:c}=sn(a,r,s.toLowerCase()),d=o.holder.querySelector(".condition-end."+a);n.replaceWith(l),d.replaceWith(c),rn(l,a)})}},sn=(i,t,e="if")=>{const o=t||e==="if"?"condicion == resultado":"item in items",n=document.createElement("span");n.classList.add("condition-start"),n.classList.add(i),new Bt({target:n,props:{statement:e==="if"?"IF":"FOR",inline:!0,condition:o,onRemove:()=>{n.parentElement.querySelectorAll(`.${i}`).forEach(a=>{a.remove()})}}}),n.setAttribute("contenteditable","false");const s=document.createElement("span");return s.classList.add("condition-end"),s.classList.add(i),new Bt({target:s,props:{statement:e==="if"?"ENDIF":"ENDFOR",inline:!0,isEnd:!0}}),s.setAttribute("contenteditable","false"),{ifConditionContainer:n,endifConditionContainer:s}},rn=(i,t)=>{const e=new MutationObserver(function(o){o.forEach(function(n){n.removedNodes.forEach(function(s){var r;if(s.classList.contains(t)){const a=(r=i.parentElement)==null?void 0:r.querySelectorAll(`.${t}`);a==null||a.forEach(l=>{l.remove()}),e.disconnect()}})})});e.observe(i.parentElement,{subtree:!1,childList:!0})};class uo{static get isInline(){return!0}constructor({config:t}){this.button=null,this.state=!1,this.type=t.type}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add("ce-inline-tool"),this.button.classList.add("add-condition-button"),this.button.classList.add("add-condition-button-"+this.type),this.button}surround(t){const e="condition-id-"+(Math.random()+1).toString(36).substring(7),o=t.extractContents(),{ifConditionContainer:n,endifConditionContainer:s}=sn(e,null,this.type);t.insertNode(n);function r(a,l){l.parentNode.insertBefore(a,l.nextSibling)}r(s,n),r(o,n),rn(n,e)}checkState(t){}}function gr(i){let t,e,o,n,s,r;return{c(){t=q("span"),e=q("span"),e.textContent=`${mr}`,o=dt(),n=q("span"),s=dt(),r=q("span"),r.textContent=`${br}`,X(e,"contenteditable","false"),X(n,"class","variable-container svelte-typ3zu"),X(r,"contenteditable","false")},m(a,l){ct(a,t,l),z(t,e),z(t,o),z(t,n),i[2](n),z(t,s),z(t,r)},p:it,i:it,o:it,d(a){a&&rt(t),i[2](null)}}}const mr="{{",br="}}";function vr(i,t,e){let{text:o=""}=t,n;Eo(()=>{n.appendChild(o)});function s(r){fe[r?"unshift":"push"](()=>{n=r,e(0,n)})}return i.$$set=r=>{"text"in r&&e(1,o=r.text)},[n,o,s]}class kr extends Zt{constructor(t){super(),Yt(this,t,vr,gr,Xt,{text:1})}}class wr{static get isInline(){return!0}constructor(){this.button=null,this.state=!1}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add("ce-inline-tool"),this.button.classList.add("add-variable-button"),this.button}surround(t){const e=t.extractContents(),o=document.createElement("span");o.classList.add("templator-variable"),new kr({target:o,props:{text:e}}),t.insertNode(o)}checkState(t){}}const yr={header:{class:Ds,inlineToolbar:!0,config:{placeholder:"Enter a header",levels:[2,3,4],defaultLevel:3}},table:{class:rr,inlineToolbar:!0,config:{rows:2,cols:3}},Color:{class:to,config:{colorCollections:["#000000","#EC7878","#9C27B0","#673AB7","#3F51B5","#0070FF","#03A9F4","#00BCD4","#4CAF50","#8BC34A","#CDDC39","#FFF"],defaultColor:"#000000",type:"text",customPicker:!0}},Marker:{class:to,config:{defaultColor:"#FFBF00",type:"marker",icon:'<svg fill="#000000" height="200px" width="200px" version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M17.6,6L6.9,16.7c-0.2,0.2-0.3,0.4-0.3,0.6L6,23.9c0,0.3,0.1,0.6,0.3,0.8C6.5,24.9,6.7,25,7,25c0,0,0.1,0,0.1,0l6.6-0.6 c0.2,0,0.5-0.1,0.6-0.3L25,13.4L17.6,6z"></path> <path d="M26.4,12l1.4-1.4c1.2-1.2,1.1-3.1-0.1-4.3l-3-3c-0.6-0.6-1.3-0.9-2.2-0.9c-0.8,0-1.6,0.3-2.2,0.9L19,4.6L26.4,12z"></path> </g> <g> <path d="M28,29H4c-0.6,0-1-0.4-1-1s0.4-1,1-1h24c0.6,0,1,0.4,1,1S28.6,29,28,29z"></path> </g> </g></svg>'}},list:{class:Hs,inlineToolbar:!0,config:{defaultStyle:"unordered"}},image:ur,If:{class:uo,config:{type:"if"}},For:{class:uo,config:{type:"for"}},IfConditionTune:{class:ao,config:{type:"if"}},ForConditionTune:{class:ao,config:{type:"for"}},IfCondition:{class:lo,config:{type:"if"},toolbox:{title:"IF"}},IfElseCondition:{class:co,config:{type:"else if"},toolbox:{title:"ELSE IF"}},ElseCondition:{class:co,config:{type:"else"},toolbox:{title:"ELSE"}},ForCondition:{class:lo,config:{type:"for"},toolbox:{title:"FOR"}},IfEndCondition:{class:ho,config:{type:"ENDIF"}},ForEndCondition:{class:ho,config:{type:"ENDFOR"}},Variable:{class:wr}},po=i=>{const t=i.blocks.getBlocksCount();let e=0;for(let o=0;o<t;o++){const n=i.blocks.getBlockByIndex(o);n.holder.classList.forEach(s=>{s.includes("indent")&&n.holder.classList.remove(s)}),n.name==="IfCondition"&&(e+=1),n.name==="ForCondition"&&(e+=1),e&&n.holder&&n.name!=="IfEndCondition"&&n.name!=="ForEndCondition"&&n.name!=="IfCondition"&&n.name!=="ForCondition"&&n.name!=="ElseCondition"&&n.name!=="IfElseCondition"&&e&&n.holder.classList.add(`indent-${e}`),(n.name==="IfEndCondition"||n.name==="IfCondition"||n.name==="ElseCondition"||n.name==="IfElseCondition")&&e>1&&n.holder.classList.add(`indent-${e-1}`),(n.name==="ForEndCondition"||n.name==="ForCondition")&&e>1&&n.holder.classList.add(`indent-${e-1}`),(n.name==="IfEndCondition"||n.name==="ForEndCondition")&&(e-=1)}},xr='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500"><path d="M65.294 197.708v41.354h56.111v114.59H65.294v41.172h160.681v-41.172h-53.378V197.708Zm52.467-50.464q0 5.83 2.095 10.84t5.921 8.471q3.826 3.644 9.2 5.648 5.374 2.004 11.933 2.004 13.481 0 21.406-7.561 7.924-7.56 7.924-19.402 0-11.841-7.924-19.401-7.925-7.561-21.406-7.561-6.559 0-11.933 2.004t-9.2 5.465q-3.826 3.644-5.921 8.654t-2.095 10.839Zm206.949 247.58h50.827v-159.77h71.049v-37.346h-71.049v-10.749q0-8.744 2.277-15.667 2.278-6.923 7.014-11.659 5.283-5.648 14.21-8.563 8.927-2.915 21.679-2.915 11.842 0 20.586 1.093 8.745 1.093 15.668 2.551l3.279-39.715q-6.194-1.093-11.933-2.004-5.738-.911-11.386-1.639-5.648-.729-11.568-1.185-5.921-.455-12.297-.455-20.222 0-36.618 5.192t-27.873 15.394q-11.477 10.202-17.671 25.141-6.194 14.938-6.194 34.431v10.749h-51.739v37.346h51.739Z"/></svg>',Cr='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500"><path d="M74.804 347.222h34.098V240.038h47.665v-25.055h-47.665v-7.21q0-5.867 1.528-10.511 1.528-4.644 4.705-7.822 3.545-3.789 9.533-5.744 5.989-1.956 14.544-1.956 7.944 0 13.811.734 5.866.733 10.51 1.711l2.2-26.643q-4.155-.734-8.005-1.345-3.85-.611-7.639-1.1-3.788-.489-7.76-.794-3.972-.306-8.25-.306-13.566 0-24.566 3.483-10.999 3.484-18.699 10.328-7.699 6.844-11.855 16.866-4.155 10.021-4.155 23.099v7.21h-34.71v25.055h34.71Zm112.682-67.341v2.566q0 14.544 4.156 26.827 4.155 12.282 12.222 21.327 7.944 9.044 19.615 14.116 11.672 5.072 26.582 5.072 14.789 0 26.399-5.072 11.611-5.072 19.555-14.116 7.944-9.045 12.099-21.327 4.156-12.283 4.156-26.827v-2.566q0-14.422-4.156-26.705-4.155-12.283-12.099-21.327-8.066-9.044-19.677-14.177-11.611-5.133-26.521-5.133t-26.46 5.133q-11.549 5.133-19.493 14.177-8.067 9.044-12.222 21.327-4.156 12.283-4.156 26.705Zm33.977 2.566v-2.566q0-8.067 1.589-15.278 1.588-7.21 5.01-12.71 3.423-5.5 8.8-8.678 5.378-3.177 12.955-3.177 7.7 0 13.077 3.177 5.378 3.178 8.8 8.678 3.3 5.5 4.889 12.71 1.588 7.211 1.588 15.278v2.566q0 8.311-1.588 15.583-1.589 7.272-4.889 12.649-3.422 5.5-8.8 8.678-5.377 3.177-12.833 3.177-7.699 0-13.138-3.177-5.438-3.178-8.861-8.678-3.422-5.377-5.01-12.649-1.589-7.272-1.589-15.583Zm215.833-69.908q-13.321 0-24.565 6.416-11.244 6.417-19.311 17.661l-.244-2.933-1.344-18.7h-31.655v132.239h33.977v-79.441q2.322-5.622 5.866-9.777 3.544-4.156 8.555-6.844 4.156-2.323 9.472-3.484 5.317-1.161 11.916-1.161 6.356 0 13.383.795 7.027.794 13.749 2.383l5.011-33.854q-4.033-1.222-10.571-2.261-6.539-1.039-14.239-1.039Z"/></svg>';function Er(i){let t,e;return{c(){t=new Co(!1),e=wo(),t.a=e},m(o,n){t.m(Cr,o,n),ct(o,e,n)},d(o){o&&(rt(e),t.d())}}}function Sr(i){let t,e;return{c(){t=new Co(!1),e=wo(),t.a=e},m(o,n){t.m(xr,o,n),ct(o,e,n)},d(o){o&&(rt(e),t.d())}}}function Tr(i){let t,e,o;function n(a,l){return a[1]==="if"?Sr:Er}let s=n(i),r=s(i);return{c(){t=q("button"),r.c(),ft(t,"position","absolute"),ft(t,"z-index","99"),ft(t,"width","40px"),ft(t,"height","40px"),ft(t,"background-color","#fff"),ft(t,"border","1px solid #E8E8EB"),ft(t,"box-shadow","0 3px 15px -3px #0d142121"),ft(t,"border-radius","6px"),ft(t,"cursor","pointer"),ft(t,"margin-top",i[2])},m(a,l){ct(a,t,l),r.m(t,null),e||(o=yt(t,"click",function(){$t(i[0])&&i[0].apply(this,arguments)}),e=!0)},p(a,[l]){i=a,s!==(s=n(i))&&(r.d(1),r=s(i),r&&(r.c(),r.m(t,null)))},i:it,o:it,d(a){a&&rt(t),r.d(),e=!1,o()}}}function Br(i,t,e){let{onButtonClicked:o=()=>{}}=t,{type:n="if"}=t;const s=n==="if"?"0px":"50px";return i.$$set=r=>{"onButtonClicked"in r&&e(0,o=r.onButtonClicked),"type"in r&&e(1,n=r.type)},[o,n,s]}class fo extends Zt{constructor(t){super(),Yt(this,t,Br,Tr,Xt,{onButtonClicked:0,type:1})}}const Lr=()=>{const i=document.createElement("iframe");return i.style.position="absolute",i.style.top="0",i.style.width="60px",i.style.height="120px",i.style.right="0",i.style.border="none",i.style.zIndex="99",i},go=(i,t,e,o)=>{i.blocks.insert(o==="if"?"IfCondition":"ForCondition",{skipEndBlock:!0},{},t,!0),i.blocks.insert(o==="if"?"IfEndCondition":"ForEndCondition",{},{},e,!0)};function Ir(i){var t=i.getBoundingClientRect(),e=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(t.bottom<0||t.top-e>=0)}const Mr=i=>{let t=0,e=0,o=null;if(i){const s=i.blocks.getBlocksCount();let r=0;for(let l=0;l<s;l++)if(i.blocks.getBlockByIndex(l).selected&&(r+=1),r>1){t=l;break}if(r>1){for(let p=t-1;p<s;p++){const g=i.blocks.getBlockByIndex(p);if(!o&&Ir(g.holder)&&(o=g.holder),!g.selected){e=p;break}}const l=Lr(),{top:c,left:d}=o.getBoundingClientRect();l.style.top=o.offsetTop+"px",l.style.left=d+"px",document.querySelector("#editorjs").appendChild(l);var n=l.contentWindow||l.contentDocument;n.document&&(n=n.document),new fo({target:l.contentDocument.body,props:{type:"if",onButtonClicked:()=>{go(i,t-1,e+1,"if"),l.remove()}}}),new fo({target:l.contentDocument.body,props:{type:"for",onButtonClicked:()=>{go(i,t-1,e+1,"for"),l.remove()}}});const h=()=>{l.remove(),document.removeEventListener("selectionchange",h)};document.addEventListener("selectionchange",h)}}};class Ar{constructor({holder:t,placeholder:e,onReady:o=()=>{},onChange:n=()=>{},tools:s={},data:r={}}={}){if(!t)throw new Error("Missing holder container");return this.init({holder:t,placeholder:e,onReady:o,onChange:n,tools:s,data:r}),this.editor}init({holder:t,placeholder:e,onReady:o=()=>{},onChange:n=()=>{},tools:s={},data:r}){this.editor=new Ts({holder:t,placeholder:e,data:r,onReady:()=>{this.editor.on("block changed",({event:a})=>{const{type:l}=a;(l==="block-moved"||l==="block-removed"||l==="block-added")&&st.api&&po(st.api)}),new Ls(this.editor),document.addEventListener("mouseup",()=>{Mr(st.api)},!1),setTimeout(()=>{po(st.api),fr(st.api)},50),o()},onChange:a=>{st.setApi(a),n()},tunes:["IfConditionTune","ForConditionTune"],tools:{...yr,...s}})}}var _r=["left","right","center","justify"],Or={delimiter:function(){return"<br/>"},header:function(i){var t=i.data;return"<h"+t.level+">"+t.text+"</h"+t.level+">"},paragraph:function(i){var t=i.data,e=t.alignment||t.align;return e!==void 0&&_r.includes(e)?'<p style="text-align:'+e+';">'+t.text+"</p>":"<p>"+t.text+"</p>"},list:function(i){var t=i.data,e=t.style==="unordered"?"ul":"ol",o=function(n,s){var r=n.map(function(a){if(!a.content&&!a.items)return"<li>"+a+"</li>";var l="";return a.items&&(l=o(a.items,s)),a.content?"<li> "+a.content+" </li>"+l:void 0});return"<"+s+">"+r.join("")+"</"+s+">"};return o(t.items,e)},image:function(i){var t=i.data,e=t.caption?t.caption:"Image";return'<img src="'+(t.file&&t.file.url?t.file.url:t.url)+'" alt="'+e+'" />'},quote:function(i){var t=i.data;return"<blockquote>"+t.text+"</blockquote> - "+t.caption},code:function(i){return"<pre><code>"+i.data.code+"</code></pre>"},embed:function(i){var t=i.data;switch(t.service){case"vimeo":return'<iframe src="'+t.embed+'" height="'+t.height+'" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>';case"youtube":return'<iframe width="'+t.width+'" height="'+t.height+'" src="'+t.embed+'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>';default:throw new Error("Only Youtube and Vime Embeds are supported right now.")}}};function ue(i){return new Error('\x1B[31m The Parser function of type "'+i+`" is not defined. 

  Define your custom parser functions as: \x1B[34mhttps://github.com/pavittarx/editorjs-html#extend-for-custom-blocks \x1B[0m`)}var an=function(i){i===void 0&&(i={});var t=Object.assign({},Or,i);return{parse:function(e){return e.blocks.map(function(o){return t[o.type]?t[o.type](o):ue(o.type)})},parseBlock:function(e){return t[e.type]?t[e.type](e):ue(e.type)},parseStrict:function(e){var o=e.blocks,n=an(t).validate({blocks:o});if(n.length)throw new Error("Parser Functions missing for blocks: "+n.toString());for(var s=[],r=0;r<o.length;r++){if(!t[o[r].type])throw ue(o[r].type);s.push(t[o[r].type](o[r]))}return s},validate:function(e){var o=e.blocks.map(function(s){return s.type}).filter(function(s,r,a){return a.indexOf(s)===r}),n=Object.keys(t);return o.filter(function(s){return!n.includes(s)})}}},Rr=an;const Nr=He(Rr),pe=i=>{i.querySelectorAll(".templator-variable").forEach(t=>{const e=t.querySelector(".variable-container").textContent;let o=document.createTextNode(`<%= ${e} %>`);t.replaceWith(o)})},mo=i=>(i=i.replaceAll("&lt;","<"),i=i.replaceAll("&gt;",">"),i),Dr=async i=>{try{const t=await i.save(),e=JSON.parse(JSON.stringify(t));e.blocks.forEach(a=>{if(a.type==="header"||a.type==="paragraph"){const l=document.createElement("div");l.innerHTML=a.data.text,l.querySelectorAll(".condition-start").forEach(d=>{const h=d.firstElementChild.getAttribute("data-statement"),p=d.querySelector(".condition-input-edit").textContent,g=h==="FOR"?"(const ":"(";let v=document.createTextNode(`<% ${h.toLowerCase()} ${g}${p}) { %>`);d.replaceWith(v)}),l.querySelectorAll(".condition-end").forEach(d=>{const h=d.firstElementChild.getAttribute("data-statement");let p=document.createTextNode(`<% ${h.toLowerCase()} %>`);d.replaceWith(p)}),pe(l);let c=mo(l.innerHTML);a.data.text=c}});const o=a=>a.replaceAll(`
`,"<br>");return Nr({IfCondition:({data:a})=>`<% if (${a.condition}) { %>`,IfElseCondition:({data:a})=>`<% } else if (${a.condition}) { %>`,ElseCondition:({data:a})=>"<% } else { %>",IfEndCondition:({data:a})=>"<% } %>",ForCondition:({data:a})=>`<% for (const ${a.condition}) { %>`,ForEndCondition:({data:a})=>"<% } %>",table:({data:a})=>{const l=B=>`<table>${B}</table>`,c=B=>`<thead>${B}</thead>`,d=B=>`<tbody>${B}</tbody>`,h=B=>`<tr>${B}</tr>`,p=B=>!!["if","endif"].find(S=>B===S),g=B=>{const E=B[0],S=B[1];return E==="if"?`<% if (${S}) { %>`:E==="endif"?"<% } %>":""},{withHeadings:f,content:v}=a;let u="";if(f){const B=v[0];let E="";B.forEach(S=>{const A=document.createElement("th");A.innerHTML=o(S),pe(A),E+=A.outerHTML}),u=c(E)}let w="";v.forEach((B,E)=>{if(E===0&&f)return;if(p(B[0])){w+=g(B);return}let S="";B.forEach(A=>{const x=document.createElement("td");x.innerHTML=o(A),pe(x),S+=x.outerHTML}),w+=h(S)});const b=u+d(w),L=l(b);return mo(L)}}).parse(e).join("")}catch(t){console.log("Saving failed: ",t)}},Pr={toEJS:Dr},Fr=i=>{var t=document.createElement("a");if(t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i)),t.setAttribute("download","index.html"),document.createEvent){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.dispatchEvent(e)}else t.click()};function bo(i,t,e){const o=i.slice();return o[9]=t[e],o}function vo(i){let t,e=i[9].title+"",o,n;return{c(){t=q("option"),o=wt(e),n=dt(),t.__value=i[9].title,xo(t,t.__value)},m(s,r){ct(s,t,r),z(t,o),z(t,n)},p:it,d(s){s&&rt(t)}}}function Hr(i){let t,e,o,n,s,r,a,l,c,d,h,p,g,f,v,u,w,b=qe(i[1]),L=[];for(let B=0;B<b.length;B+=1)L[B]=vo(bo(i,b,B));return{c(){t=q("div"),e=q("div"),o=q("div"),n=q("label"),n.textContent="DEMO:",s=dt(),r=q("select"),a=q("option"),a.textContent="Empty";for(let B=0;B<L.length;B+=1)L[B].c();l=dt(),c=q("div"),d=q("button"),d.textContent="Export to EJS",h=dt(),p=q("div"),g=q("button"),g.textContent="Log data",f=dt(),v=q("div"),X(n,"for","demos"),a.__value="empty",xo(a,a.__value),X(r,"name","demos"),X(r,"id","demos"),i[0]===void 0&&ee(()=>i[5].call(r)),X(o,"class","menu-button svelte-1ln6ukb"),X(c,"class","menu-button svelte-1ln6ukb"),X(p,"class","menu-button svelte-1ln6ukb"),X(e,"class","top-menu svelte-1ln6ukb"),X(v,"id","editorjs"),X(t,"class","demo")},m(B,E){ct(B,t,E),z(t,e),z(e,o),z(o,n),z(o,s),z(o,r),z(r,a);for(let S=0;S<L.length;S+=1)L[S]&&L[S].m(r,null);je(r,i[0],!0),z(e,l),z(e,c),z(c,d),z(e,h),z(e,p),z(p,g),z(t,f),z(t,v),u||(w=[yt(r,"change",i[5]),yt(r,"change",i[2]),yt(d,"click",i[4]),yt(g,"click",i[3])],u=!0)},p(B,[E]){if(E&2){b=qe(B[1]);let S;for(S=0;S<b.length;S+=1){const A=bo(B,b,S);L[S]?L[S].p(A,E):(L[S]=vo(A),L[S].c(),L[S].m(r,null))}for(;S<L.length;S+=1)L[S].d(1);L.length=b.length}E&3&&je(r,B[0])},i:it,o:it,d(B){B&&rt(t),hn(L,B),u=!1,Dt(w)}}}const zr="Start writing here";function jr(i,t,e){let o,n=null;const s=[{title:"indent",data:Pn},{title:"contrato",data:On},{title:"lorem",data:In}];let r={};Eo(()=>{a()});const a=()=>{n=new Ar({holder:"editorjs",placeholder:zr,data:r})},l=()=>{var p;r=(p=s.find(g=>g.title===o))==null?void 0:p.data,n==null||n.destroy(),a()},c=()=>{n.save().then(p=>console.log(p))},d=async()=>{const p=await Pr.toEJS(n);Fr(p)};function h(){o=gn(this),e(0,o),e(1,s)}return[o,s,l,c,d,h]}class Ur extends Zt{constructor(t){super(),Yt(this,t,jr,Hr,Xt,{})}}function $r(i){let t,e,o;return e=new Ur({}),{c(){t=q("main"),Cn(e.$$.fragment)},m(n,s){ct(n,t,s),Bo(e,t,null),o=!0},p:it,i(n){o||(To(e.$$.fragment,n),o=!0)},o(n){xn(e.$$.fragment,n),o=!1},d(n){n&&rt(t),Lo(e)}}}class qr extends Zt{constructor(t){super(),Yt(this,t,null,$r,Xt,{})}}new qr({target:document.getElementById("app")});
